
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Unlock the potential of eBPF">
      
      
      
        <link rel="canonical" href="https://eunomia.dev/en/blog/posts/iaprof-analysis/">
      
      
        <link rel="prev" href="../how-to-write-rust-in-wasm/">
      
      
        <link rel="next" href="../inline-hook/">
      
      
      <link rel="icon" href="../../../../assets/icon.svg">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.22">
    
    
      
        <title>Understanding iaprof: A Deep Dive into AI/GPU Flame Graph Profiling - eunomia</title>
      
    
    
      <link rel="stylesheet" href="../../../../assets/stylesheets/main.84d31ad4.min.css">
      
        
        <link rel="stylesheet" href="../../../../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("../../../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      
  


  
  

<script id="__analytics">function __md_analytics(){function e(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],e("js",new Date),e("config","G-1YVMXGL0MY"),document.addEventListener("DOMContentLoaded",(function(){document.forms.search&&document.forms.search.query.addEventListener("blur",(function(){this.value&&e("event","search",{search_term:this.value})}));document$.subscribe((function(){var t=document.forms.feedback;if(void 0!==t)for(var a of t.querySelectorAll("[type=submit]"))a.addEventListener("click",(function(a){a.preventDefault();var n=document.location.pathname,d=this.getAttribute("data-md-value");e("event","feedback",{page:n,data:d}),t.firstElementChild.disabled=!0;var r=t.querySelector(".md-feedback__note [data-md-value='"+d+"']");r&&(r.hidden=!1)})),t.hidden=!1})),location$.subscribe((function(t){e("config","G-1YVMXGL0MY",{page_path:t.pathname})}))}));var t=document.createElement("script");t.async=!0,t.src="https://www.googletagmanager.com/gtag/js?id=G-1YVMXGL0MY",document.getElementById("__analytics").insertAdjacentElement("afterEnd",t)}</script>
  
    <script>"undefined"!=typeof __md_analytics&&__md_analytics()</script>
  

    
    
      
        <meta  property="og:type"  content="website" >
      
        <meta  property="og:title"  content="Understanding iaprof: A Deep Dive into AI/GPU Flame Graph Profiling - eunomia" >
      
        <meta  property="og:description"  content="Unlock the potential of eBPF" >
      
        <meta  property="og:image"  content="https://eunomia.dev/assets/images/social/blog/posts/iaprof-analysis.png" >
      
        <meta  property="og:image:type"  content="image/png" >
      
        <meta  property="og:image:width"  content="1200" >
      
        <meta  property="og:image:height"  content="630" >
      
        <meta  property="og:url"  content="https://eunomia.dev/en/blog/posts/iaprof-analysis/" >
      
        <meta  name="twitter:card"  content="summary_large_image" >
      
        <meta  name="twitter:title"  content="Understanding iaprof: A Deep Dive into AI/GPU Flame Graph Profiling - eunomia" >
      
        <meta  name="twitter:description"  content="Unlock the potential of eBPF" >
      
        <meta  name="twitter:image"  content="https://eunomia.dev/assets/images/social/blog/posts/iaprof-analysis.png" >
      
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="white" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#understanding-iaprof-a-deep-dive-into-aigpu-flame-graph-profiling" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../../../" title="eunomia" class="md-header__button md-logo" aria-label="eunomia" data-md-component="logo">
      
  <img src="../../../../assets/icon.svg" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            eunomia
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Understanding iaprof: A Deep Dive into AI/GPU Flame Graph Profiling
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="white" data-md-color-accent="indigo"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="slate" data-md-color-primary="black" data-md-color-accent="indigo"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12s-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
      <div class="md-header__option">
  <div class="md-select">
    
    <button class="md-header__button md-icon" aria-label="Select language">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m12.87 15.07-2.54-2.51.03-.03A17.5 17.5 0 0 0 14.07 6H17V4h-7V2H8v2H1v2h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11zM18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2zm-2.62 7 1.62-4.33L19.12 17z"/></svg>
    </button>
    <div class="md-select__inner">
      <ul class="md-select__list">
        
          <li class="md-select__item">
            <a href="/en/" hreflang="en" class="md-select__link">
              English
            </a>
          </li>
        
          <li class="md-select__item">
            <a href="/zh/" hreflang="zh" class="md-select__link">
              Chinese
            </a>
          </li>
        
      </ul>
    </div>
  </div>
</div>
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
          <a href="javascript:void(0)" class="md-search__icon md-icon" title="Share" aria-label="Share" data-clipboard data-clipboard-text="" data-md-component="search-share" tabindex="-1">
            
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7s-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.15c-.05.21-.08.43-.08.66 0 1.61 1.31 2.91 2.92 2.91s2.92-1.3 2.92-2.91A2.92 2.92 0 0 0 18 16.08"/></svg>
          </a>
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
      <div class="md-header__source">
        <a href="https://github.com/eunomia-bpf/eunomia.dev" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../" class="md-tabs__link">
          
  
  
  Home

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../tutorials/" class="md-tabs__link">
          
  
  
  Tutorials

        </a>
      </li>
    
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../../../../blog" class="md-tabs__link">
        
  
  
    
  
  Blog

      </a>
    </li>
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../bpftime/" class="md-tabs__link">
          
  
  
  bpftime

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../GPTtrace/" class="md-tabs__link">
          
  
  
  eBPF×AI/LLMs

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../eunomia-bpf/" class="md-tabs__link">
          
  
  
  eunomia-bpf

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../others/" class="md-tabs__link">
          
  
  
  Ecosystem

        </a>
      </li>
    
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../../" title="eunomia" class="md-nav__button md-logo" aria-label="eunomia" data-md-component="logo">
      
  <img src="../../../../assets/icon.svg" alt="logo">

    </a>
    eunomia
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/eunomia-bpf/eunomia.dev" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_1" >
        
          
          <label class="md-nav__link" for="__nav_1" id="__nav_1_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Home
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1">
            <span class="md-nav__icon md-icon"></span>
            Home
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Eunomia - Unlock the potential of eBPF
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_2" >
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Tutorials
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            Tutorials
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../tutorials/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    eBPF Tutorial by Example: Learning CO-RE eBPF Step by Step
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../tutorials/0-introduce/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    eBPF Tutorial by Example 0: Introduction to Core Concepts and Tools
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../tutorials/1-helloworld/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    eBPF Tutorial by Example 1: Hello World, Framework and Development
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../tutorials/2-kprobe-unlink/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    eBPF Tutorial by Example 2: Monitoring unlink System Calls with kprobe
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../tutorials/3-fentry-unlink/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    eBPF Tutorial by Example 3: Monitoring unlink System Calls with fentry
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../tutorials/4-opensnoop/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    eBPF Tutorial by Example 4: Capturing Opening Files and Filter with Global Variables
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../tutorials/5-uprobe-bashreadline/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    eBPF Tutorial by Example 5: Capturing readline Function Calls with Uprobe
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../tutorials/6-sigsnoop/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    eBPF Tutorial by Example 6: Capturing Signal Sending and Store State with Hash Maps
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../tutorials/7-execsnoop/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    eBPF Tutorial by Example 7: Capturing Process Execution, Output with perf event array
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../tutorials/8-exitsnoop/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    eBPF Tutorial by Example 8: Monitoring Process Exit Events, Output with Ring Buffer
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../tutorials/9-runqlat/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    eBPF Tutorial by Example 9: Capturing Scheduling Latency and Recording as Histogram
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../tutorials/10-hardirqs/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    eBPF Tutorial by Example 10: Capturing Interrupts with hardirqs or softirqs
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../tutorials/11-bootstrap/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    eBPF Tutorial by Example 11: Develop User-Space Programs with libbpf and Trace exec() and exit()
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../tutorials/12-profile/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    eBPF Tutorial by Example 12: Using eBPF Program Profile for Performance Analysis
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../tutorials/13-tcpconnlat/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    eBPF Tutorial by Example 13: Statistics of TCP Connection Delay with libbpf
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../tutorials/14-tcpstates/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    eBPF Tutorial by Example 14: Recording TCP Connection Status and TCP RTT
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../tutorials/15-javagc/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    eBPF Tutorial by Example 15: Capturing User-Space Java GC Duration Using USDT
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../tutorials/16-memleak/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    eBPF Tutorial by Example 16: Monitoring Memory Leaks
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../tutorials/17-biopattern/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    eBPF Tutorial by Example 17: Count Random/Sequential Disk I/O
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../tutorials/18-further-reading/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    More Reference Materials： papers, projects
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../tutorials/19-lsm-connect/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    eBPF Tutorial by Example 19: Security Detection and Defense using LSM
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../tutorials/20-tc/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    eBPF Tutorial by Example 20: tc Traffic Control
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../tutorials/21-xdp/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    eBPF Tutorial by Example 21: Programmable Packet Processing with XDP
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../tutorials/22-android/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    eBPF Tutorial by Example: Using eBPF Programs on Android
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../tutorials/23-http/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    L7 Tracing with eBPF: HTTP and Beyond via Socket Filters and Syscall Tracepoints
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../tutorials/24-hide/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    eBPF Practical Tutorial: Hiding Process or File Information
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../tutorials/25-signal/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Using bpf_send_signal to Terminate Malicious Processes in eBPF
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../tutorials/26-sudo/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    eBPF Tutorial: Privilege Escalation via File Content Manipulation
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../tutorials/27-replace/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    eBPF Tutorial: Transparent Text Replacement in File Reads
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../tutorials/28-detach/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Running eBPF After Application Exits: The Lifecycle of eBPF Programs
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../tutorials/29-sockops/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    eBPF Development Practices: Accelerating Network Request Forwarding with Sockops
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../tutorials/30-sslsniff/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    eBPF Practical Tutorial: Capturing SSL/TLS Plain Text Data Using uprobe
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../tutorials/31-goroutine/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    eBPF Practical Tutorial: Using eBPF to Trace Go Routine States
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../tutorials/32-wallclock-profiler/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    eBPF Tutorial by Example 32: Wall Clock Profiling with Combined On-CPU and Off-CPU Analysis
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../tutorials/33-funclatency/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Measuring Function Latency with eBPF
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../tutorials/34-syscall/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    eBPF Development Practice: Modifying System Call Arguments with eBPF
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../tutorials/35-user-ringbuf/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    eBPF Development Practices: Asynchronously Send to Kernel with User Ring Buffer
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../tutorials/36-userspace-ebpf/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Userspace eBPF Runtimes: Overview and Applications
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../tutorials/37-uprobe-rust/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    eBPF Practice: Tracing User Space Rust Applications with Uprobe
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../tutorials/38-btf-uprobe/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Expanding eBPF Compile Once, Run Everywhere(CO-RE) to Userspace Compatibility
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../tutorials/39-nginx/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Using eBPF to Trace Nginx Requests
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../tutorials/40-mysql/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Using eBPF to Trace MySQL Queries
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../tutorials/41-xdp-tcpdump/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    eBPF Tutorial by Example: Capturing TCP Information with XDP
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../tutorials/42-xdp-loadbalancer/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    eBPF Developer Tutorial: XDP Load Balancer
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../tutorials/43-kfuncs/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Extending eBPF Beyond Its Limits: Custom kfuncs in Kernel Modules
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../tutorials/44-scx-simple/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    eBPF Tutorial: Introduction to the BPF Scheduler
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../tutorials/45-scx-nest/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    eBPF Tutorial by Example: Implementing the scx_nest Scheduler
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../tutorials/46-xdp-test/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    eBPF Tutorial by Example: Building a High-Performance XDP Packet Generator
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../tutorials/47-cuda-events/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    eBPF Tutorial: Tracing CUDA GPU Operations
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../tutorials/48-energy/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    eBPF Tutorial: Energy Monitoring for Process-Level Power Analysis
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../tutorials/SUMMARY/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    eBPF Tutorial by Example: Learning CO-RE eBPF Step by Step
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../tutorials/18-further-reading/ebpf-security/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    The Secure Path Forward for eBPF runtime: Challenges and Innovations
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../tutorials/38-btf-uprobe/test-verify/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    using BTF to verify userspace eBPF extensions
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../tutorials/42-xdp-loadbalancer/connect/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Network setup for bpf-developer-tutorial
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../tutorials/49-hid/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    eBPF Tutorial: Fixing Broken HID Devices Without Kernel Patches
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../tutorials/bpftrace-tutorial/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    The bpftrace One-Liner Tutorial
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../tutorials/features/bpf_arena/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    eBPF Tutorial by Example: BPF Arena for Zero-Copy Shared Memory
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../tutorials/features/bpf_iters/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    eBPF Tutorial: BPF Iterators for Kernel Data Export
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../tutorials/features/bpf_wq/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    eBPF Tutorial: BPF Workqueues for Asynchronous Sleepable Tasks
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../tutorials/xpu/flamegraph/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    eBPF by Example: Building a GPU Flamegraph Profiler with CUPTI
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../tutorials/xpu/gpu-kernel-driver/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    eBPF Tutorial by Example: Monitoring GPU Driver Activity with Kernel Tracepoints
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../tutorials/xpu/npu-kernel-driver/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    eBPF Tutorial by Example: Tracing Intel NPU Kernel Driver Operations
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../blog" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Blog
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_4" >
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    bpftime
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            bpftime
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../bpftime/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    bpftime document Userspace eBPF runtime for Observability, Network, GPU & General extensions Framework
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_4_2" >
        
          
          <label class="md-nav__link" for="__nav_4_2" id="__nav_4_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Documents
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_2">
            <span class="md-nav__icon md-icon"></span>
            Documents
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../bpftime/documents/introduction/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Introduction
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../bpftime/documents/build-and-test/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Installation and Test
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../bpftime/documents/usage/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Manual
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../bpftime/documents/examples/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Examples &amp; Use Cases
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../bpftime/documents/available-features/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Available kernel features in userspace
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../bpftime/documents/gpu/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Write and Run eBPF on GPU with bpftime
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../bpftime/documents/how-it-works/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    The design and implementation of bpftime
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../bpftime/documents/performance/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Benchmark and performance evaluation for bpftime
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../bpftime/documents/co-re/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Compile Once, Run Everywhere(CO-RE)
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../bpftime/documents/attach/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    bpftime Attach System
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../bpftime/documents/bpftimetool/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    bpftimetool
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../bpftime/documents/bpftimeaot/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    bpftime-aot
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../bpftime/documents/contact/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Contact and citations
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../bpftime/llvmbpf/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    LLVM BPF
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_4_4" >
        
          
          <label class="md-nav__link" for="__nav_4_4" id="__nav_4_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    EIM
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_4">
            <span class="md-nav__icon md-icon"></span>
            EIM
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../bpftime/EIM/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    EIM: Extension Interface Model
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../bpftime/EIM/spec/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    EIM: Extension Interface Model Specification
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../bpftime/EIM/uprobe/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    UProbe Role Definition README
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../bpftime/EIM/example/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    EIM: Example code
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../bpftime/EIM/usage/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    EIM Usage and people involved (Draft v1)
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_4_4_6" >
        
          
          <label class="md-nav__link" for="__nav_4_4_6" id="__nav_4_4_6_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Case Studies
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_4_4_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_4_6">
            <span class="md-nav__icon md-icon"></span>
            Case Studies
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../bpftime/EIM/study/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    studies on bugs in extensions/plugins
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../bpftime/EIM/study/browser-ide-bug-study/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Study on Bugs in Browser Extensions and IDE Plugins
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../bpftime/EIM/study/db-bug-study/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Study on Bugs in Database and Web Server Extension Interfaces
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../bpftime/EIM/study/docker-vm-bug-study/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Study on Hypervisor and Container Extension Bugs (2018–2024)
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../bpftime/EIM/study/game-office-bug-study/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Case Studies of Bugs in Productivity Software and Game Extensions/Plugins (2018–2024)
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../bpftime/EIM/study/compare/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Extension Systems compare with EIM
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_4_5" >
        
          
          <label class="md-nav__link" for="__nav_4_5" id="__nav_4_5_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Bpftime
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_5">
            <span class="md-nav__icon md-icon"></span>
            Bpftime
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_4_5_1" >
        
          
          <label class="md-nav__link" for="__nav_4_5_1" id="__nav_4_5_1_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    EIM
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_4_5_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_5_1">
            <span class="md-nav__icon md-icon"></span>
            EIM
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_4_5_1_1" >
        
          
          <label class="md-nav__link" for="__nav_4_5_1_1" id="__nav_4_5_1_1_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Draft spec
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_4_5_1_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_5_1_1">
            <span class="md-nav__icon md-icon"></span>
            Draft spec
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../bpftime/EIM/draft-spec/current-EIM-lack/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    EIM on verify: what can it do and what cannot
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../bpftime/EIM/draft-spec/spec/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Extension Inferface Model Specification V3
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../bpftime/EIM/draft-spec/spec_core/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Spec core
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../bpftime/EIM/draft-spec/spec_old/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Extension Model Specification V1
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_5" >
        
          
          <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    eBPF×AI/LLMs
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            eBPF×AI/LLMs
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../GPTtrace/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    eBPF × AI/LLMs: The Convergence of System Observability and Artificial Intelligence
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../GPTtrace/agentsight/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    AgentSight: Zero-Instrumentation LLM Agent Observability with eBPF
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../GPTtrace/mcptrace/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    MCPtrace: AI-Powered Kernel Debugging with bpftrace
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../GPTtrace/gpttrace/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    GPTtrace Documentation
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../bpftime/documents/gpu/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Write and Run eBPF on GPU with bpftime
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_5_6" >
        
          
          <label class="md-nav__link" for="__nav_5_6" id="__nav_5_6_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    GPTtrace
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_5_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_6">
            <span class="md-nav__icon md-icon"></span>
            GPTtrace
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../GPTtrace/schedcp/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    SchedCP - Automatically Optimize Linux Scheduler with MCP Server
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_6" >
        
          
          <label class="md-nav__link" for="__nav_6" id="__nav_6_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    eunomia-bpf
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6">
            <span class="md-nav__icon md-icon"></span>
            eunomia-bpf
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../eunomia-bpf/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    eunomia-bpf Documentation
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_6_2" >
        
          
          <label class="md-nav__link" for="__nav_6_2" id="__nav_6_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Eunomia bpf
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_6_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6_2">
            <span class="md-nav__icon md-icon"></span>
            Eunomia bpf
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../eunomia-bpf/benchmark/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    benchmark
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../eunomia-bpf/introduction/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    introduction
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../eunomia-bpf/manual/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    manual
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../eunomia-bpf/online/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Online Demo
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../eunomia-bpf/quickstart/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    quickstart
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../eunomia-bpf/supporting-external-BTF/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    supporting-external-BTF
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../eunomia-bpf/video/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    video
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_6_2_8" >
        
          
          <label class="md-nav__link" for="__nav_6_2_8" id="__nav_6_2_8_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Architecture
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_6_2_8_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6_2_8">
            <span class="md-nav__icon md-icon"></span>
            Architecture
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../eunomia-bpf/architecture/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Project architecture
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_6_2_9" >
        
          
          <label class="md-nav__link" for="__nav_6_2_9" id="__nav_6_2_9_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Ecc
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_6_2_9_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6_2_9">
            <span class="md-nav__icon md-icon"></span>
            Ecc
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../eunomia-bpf/ecc/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    eunomia-cc
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../eunomia-bpf/ecc/docker-usage/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    ecc docker usage
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../eunomia-bpf/ecc/github-template/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    github template
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../eunomia-bpf/ecc/usage/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    ecc usage
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_6_2_10" >
        
          
          <label class="md-nav__link" for="__nav_6_2_10" id="__nav_6_2_10_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Ecli
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_6_2_10_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6_2_10">
            <span class="md-nav__icon md-icon"></span>
            Ecli
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../eunomia-bpf/ecli/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    ecli
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../eunomia-bpf/ecli/ecli-dockerfile-usage.zh/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    ecli dockerfile usage
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../eunomia-bpf/ecli/server/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    ecli server
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_6_2_11" >
        
          
          <label class="md-nav__link" for="__nav_6_2_11" id="__nav_6_2_11_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Exporter
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_6_2_11_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6_2_11">
            <span class="md-nav__icon md-icon"></span>
            Exporter
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../eunomia-bpf/exporter/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    exporter
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../eunomia-bpf/exporter/usage/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    usage
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_6_2_12" >
        
          
          <label class="md-nav__link" for="__nav_6_2_12" id="__nav_6_2_12_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Setup
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_6_2_12_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6_2_12">
            <span class="md-nav__icon md-icon"></span>
            Setup
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../eunomia-bpf/setup/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Setup
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../eunomia-bpf/setup/build-android-arm/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    build on android aarch64
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../eunomia-bpf/setup/build/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    build from source
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_7" >
        
          
          <label class="md-nav__link" for="__nav_7" id="__nav_7_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Ecosystem
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_7">
            <span class="md-nav__icon md-icon"></span>
            Ecosystem
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../others/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Ecosystem & Other Projects
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_7_2" >
        
          
          <label class="md-nav__link" for="__nav_7_2" id="__nav_7_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    wasm-bpf
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_7_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_7_2">
            <span class="md-nav__icon md-icon"></span>
            wasm-bpf
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../wasm-bpf/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Wasm-bpf Documentation
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_7_3" >
        
          
          <label class="md-nav__link" for="__nav_7_3" id="__nav_7_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Others
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_7_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_7_3">
            <span class="md-nav__icon md-icon"></span>
            Others
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../others/bpf-benchmark/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    BPF-Benchmark
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../others/bpf-compatible/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    bpf-compatible
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../others/contribute/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Contributing to eunomia-bpf
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../others/ebpf-gpts/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    An experiment: GPTs for eBPF
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../others/ideas/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Possible ideas for the future
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../others/usecases/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    ebpf usecases analysis
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_7_3_7" >
        
          
          <label class="md-nav__link" for="__nav_7_3_7" id="__nav_7_3_7_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Cuda tutorial
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_7_3_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_7_3_7">
            <span class="md-nav__icon md-icon"></span>
            Cuda tutorial
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../others/cuda-tutorial/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    basic-cuda-tutorial
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../others/cuda-tutorial/01-vector-addition/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Tutorial: Your First CUDA Program - Vector Addition
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../others/cuda-tutorial/02-ptx-assembly/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Tutorial: Understanding GPU Assembly with PTX
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../others/cuda-tutorial/03-gpu-programming-methods/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    CUDA Programming Methods Comparison: Matrix Multiplication
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../others/cuda-tutorial/04-gpu-architecture/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Tutorial: Understanding GPU Architecture and Execution Model
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../others/cuda-tutorial/05-neural-network/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Tutorial: Neural Network Forward Pass on GPU
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../others/cuda-tutorial/06-cnn-convolution/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Tutorial: CNN Convolution with Shared Memory Optimization
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../others/cuda-tutorial/07-attention-mechanism/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Attention Mechanism for Transformer Models with CUDA
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../others/cuda-tutorial/08-profiling-tracing/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    CUDA GPU Profiling and Tracing
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../others/cuda-tutorial/09-gpu-extension/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    GPU Application Extension Mechanisms: Modifying Behavior Without Source Code Changes
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../others/cuda-tutorial/10-cpu-gpu-profiling-boundaries/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    CPU and GPU Profiling Boundaries: What to Measure Where
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../others/cuda-tutorial/11-fine-grained-gpu-modifications/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Fine-Grained GPU Code Modifications
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../others/cuda-tutorial/12-advanced-gpu-customizations/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Advanced GPU Customizations
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../others/cuda-tutorial/13-low-latency-gpu-packet-processing/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Low-Latency GPU Packet Processing
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../others/cuda-tutorial/14-cuda-function-annotations/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    CUDA Function Type Annotations: A Comprehensive Guide
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../others/cuda-tutorial/15-opencl-vector-addition/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    OpenCL Basic Example - Vector Addition Explanation
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../others/cuda-tutorial/README_PTX_Demo/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    PTX File Loading and Execution Demo
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_7_3_8" >
        
          
          <label class="md-nav__link" for="__nav_7_3_8" id="__nav_7_3_8_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Cupti tutorial
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_7_3_8_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_7_3_8">
            <span class="md-nav__icon md-icon"></span>
            Cupti tutorial
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../others/cupti-tutorial/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    NVIDIA CUPTI Tutorials
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_7_3_8_2" >
        
          
          <label class="md-nav__link" for="__nav_7_3_8_2" id="__nav_7_3_8_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Activity trace
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_7_3_8_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_7_3_8_2">
            <span class="md-nav__icon md-icon"></span>
            Activity trace
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../others/cupti-tutorial/activity_trace/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    CUPTI Activity Trace Tutorial
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_7_3_8_3" >
        
          
          <label class="md-nav__link" for="__nav_7_3_8_3" id="__nav_7_3_8_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Activity trace async
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_7_3_8_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_7_3_8_3">
            <span class="md-nav__icon md-icon"></span>
            Activity trace async
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../others/cupti-tutorial/activity_trace_async/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    CUPTI Asynchronous Activity Tracing Tutorial
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_7_3_8_4" >
        
          
          <label class="md-nav__link" for="__nav_7_3_8_4" id="__nav_7_3_8_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Autorange profiling
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_7_3_8_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_7_3_8_4">
            <span class="md-nav__icon md-icon"></span>
            Autorange profiling
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../others/cupti-tutorial/autorange_profiling/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    CUPTI Autorange Profiling Tutorial
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_7_3_8_5" >
        
          
          <label class="md-nav__link" for="__nav_7_3_8_5" id="__nav_7_3_8_5_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Callback event
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_7_3_8_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_7_3_8_5">
            <span class="md-nav__icon md-icon"></span>
            Callback event
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../others/cupti-tutorial/callback_event/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    CUPTI Callback Event Tutorial
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_7_3_8_6" >
        
          
          <label class="md-nav__link" for="__nav_7_3_8_6" id="__nav_7_3_8_6_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Callback metric
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_7_3_8_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_7_3_8_6">
            <span class="md-nav__icon md-icon"></span>
            Callback metric
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../others/cupti-tutorial/callback_metric/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    CUPTI Performance Metrics Tutorial
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_7_3_8_7" >
        
          
          <label class="md-nav__link" for="__nav_7_3_8_7" id="__nav_7_3_8_7_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Callback profiling
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_7_3_8_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_7_3_8_7">
            <span class="md-nav__icon md-icon"></span>
            Callback profiling
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../others/cupti-tutorial/callback_profiling/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    CUPTI Callback-Based Profiling Tutorial
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_7_3_8_8" >
        
          
          <label class="md-nav__link" for="__nav_7_3_8_8" id="__nav_7_3_8_8_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Callback timestamp
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_7_3_8_8_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_7_3_8_8">
            <span class="md-nav__icon md-icon"></span>
            Callback timestamp
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../others/cupti-tutorial/callback_timestamp/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    CUPTI Timestamp Callback Tutorial
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_7_3_8_9" >
        
          
          <label class="md-nav__link" for="__nav_7_3_8_9" id="__nav_7_3_8_9_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Checkpoint kernels
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_7_3_8_9_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_7_3_8_9">
            <span class="md-nav__icon md-icon"></span>
            Checkpoint kernels
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../others/cupti-tutorial/checkpoint_kernels/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    CUPTI Checkpoint API Tutorial
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_7_3_8_10" >
        
          
          <label class="md-nav__link" for="__nav_7_3_8_10" id="__nav_7_3_8_10_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Common
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_7_3_8_10_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_7_3_8_10">
            <span class="md-nav__icon md-icon"></span>
            Common
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../others/cupti-tutorial/common/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    CUPTI Common Helper Files
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_7_3_8_11" >
        
          
          <label class="md-nav__link" for="__nav_7_3_8_11" id="__nav_7_3_8_11_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Concurrent profiling
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_7_3_8_11_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_7_3_8_11">
            <span class="md-nav__icon md-icon"></span>
            Concurrent profiling
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../others/cupti-tutorial/concurrent_profiling/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    CUPTI Concurrent Profiling Tutorial
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_7_3_8_12" >
        
          
          <label class="md-nav__link" for="__nav_7_3_8_12" id="__nav_7_3_8_12_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Cuda graphs trace
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_7_3_8_12_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_7_3_8_12">
            <span class="md-nav__icon md-icon"></span>
            Cuda graphs trace
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../others/cupti-tutorial/cuda_graphs_trace/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    CUDA Graphs Tracing Tutorial
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_7_3_8_13" >
        
          
          <label class="md-nav__link" for="__nav_7_3_8_13" id="__nav_7_3_8_13_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Cuda memory trace
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_7_3_8_13_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_7_3_8_13">
            <span class="md-nav__icon md-icon"></span>
            Cuda memory trace
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../others/cupti-tutorial/cuda_memory_trace/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    CUDA Memory Tracing Tutorial
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_7_3_8_14" >
        
          
          <label class="md-nav__link" for="__nav_7_3_8_14" id="__nav_7_3_8_14_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Cupti correlation
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_7_3_8_14_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_7_3_8_14">
            <span class="md-nav__icon md-icon"></span>
            Cupti correlation
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../others/cupti-tutorial/cupti_correlation/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    CUPTI API-GPU Activity Correlation Tutorial
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_7_3_8_15" >
        
          
          <label class="md-nav__link" for="__nav_7_3_8_15" id="__nav_7_3_8_15_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Cupti external correlation
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_7_3_8_15_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_7_3_8_15">
            <span class="md-nav__icon md-icon"></span>
            Cupti external correlation
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../others/cupti-tutorial/cupti_external_correlation/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    CUPTI External Correlation Tutorial
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_7_3_8_16" >
        
          
          <label class="md-nav__link" for="__nav_7_3_8_16" id="__nav_7_3_8_16_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Cupti finalize
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_7_3_8_16_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_7_3_8_16">
            <span class="md-nav__icon md-icon"></span>
            Cupti finalize
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../others/cupti-tutorial/cupti_finalize/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    CUPTI Finalization and Cleanup Tutorial
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_7_3_8_17" >
        
          
          <label class="md-nav__link" for="__nav_7_3_8_17" id="__nav_7_3_8_17_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Cupti metric properties
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_7_3_8_17_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_7_3_8_17">
            <span class="md-nav__icon md-icon"></span>
            Cupti metric properties
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../others/cupti-tutorial/cupti_metric_properties/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    CUPTI Metric Properties Tutorial
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_7_3_8_18" >
        
          
          <label class="md-nav__link" for="__nav_7_3_8_18" id="__nav_7_3_8_18_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Cupti nvtx
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_7_3_8_18_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_7_3_8_18">
            <span class="md-nav__icon md-icon"></span>
            Cupti nvtx
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../others/cupti-tutorial/cupti_nvtx/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    CUPTI NVTX Integration Tutorial
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_7_3_8_19" >
        
          
          <label class="md-nav__link" for="__nav_7_3_8_19" id="__nav_7_3_8_19_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Cupti query
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_7_3_8_19_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_7_3_8_19">
            <span class="md-nav__icon md-icon"></span>
            Cupti query
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../others/cupti-tutorial/cupti_query/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    CUPTI Query API Tutorial
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_7_3_8_20" >
        
          
          <label class="md-nav__link" for="__nav_7_3_8_20" id="__nav_7_3_8_20_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Cupti trace injection
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_7_3_8_20_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_7_3_8_20">
            <span class="md-nav__icon md-icon"></span>
            Cupti trace injection
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../others/cupti-tutorial/cupti_trace_injection/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    CUPTI Trace Injection Tutorial
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_7_3_8_21" >
        
          
          <label class="md-nav__link" for="__nav_7_3_8_21" id="__nav_7_3_8_21_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Event multi gpu
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_7_3_8_21_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_7_3_8_21">
            <span class="md-nav__icon md-icon"></span>
            Event multi gpu
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../others/cupti-tutorial/event_multi_gpu/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    CUPTI Multi-GPU Event Profiling Tutorial
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_7_3_8_22" >
        
          
          <label class="md-nav__link" for="__nav_7_3_8_22" id="__nav_7_3_8_22_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Event sampling
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_7_3_8_22_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_7_3_8_22">
            <span class="md-nav__icon md-icon"></span>
            Event sampling
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../others/cupti-tutorial/event_sampling/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    CUPTI Event Sampling Tutorial
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_7_3_8_23" >
        
          
          <label class="md-nav__link" for="__nav_7_3_8_23" id="__nav_7_3_8_23_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Extensions
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_7_3_8_23_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_7_3_8_23">
            <span class="md-nav__icon md-icon"></span>
            Extensions
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../others/cupti-tutorial/extensions/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    CUPTI Extensions
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_7_3_8_24" >
        
          
          <label class="md-nav__link" for="__nav_7_3_8_24" id="__nav_7_3_8_24_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Nested range profiling
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_7_3_8_24_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_7_3_8_24">
            <span class="md-nav__icon md-icon"></span>
            Nested range profiling
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../others/cupti-tutorial/nested_range_profiling/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    CUPTI Nested Range Profiling Tutorial
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_7_3_8_25" >
        
          
          <label class="md-nav__link" for="__nav_7_3_8_25" id="__nav_7_3_8_25_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Nvlink bandwidth
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_7_3_8_25_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_7_3_8_25">
            <span class="md-nav__icon md-icon"></span>
            Nvlink bandwidth
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../others/cupti-tutorial/nvlink_bandwidth/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    CUPTI NVLink Bandwidth Monitoring Tutorial
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_7_3_8_26" >
        
          
          <label class="md-nav__link" for="__nav_7_3_8_26" id="__nav_7_3_8_26_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Openacc trace
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_7_3_8_26_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_7_3_8_26">
            <span class="md-nav__icon md-icon"></span>
            Openacc trace
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../others/cupti-tutorial/openacc_trace/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    CUPTI OpenACC Tracing Tutorial
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_7_3_8_27" >
        
          
          <label class="md-nav__link" for="__nav_7_3_8_27" id="__nav_7_3_8_27_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Pc sampling
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_7_3_8_27_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_7_3_8_27">
            <span class="md-nav__icon md-icon"></span>
            Pc sampling
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../others/cupti-tutorial/pc_sampling/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    CUPTI PC Sampling Tutorial
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_7_3_8_28" >
        
          
          <label class="md-nav__link" for="__nav_7_3_8_28" id="__nav_7_3_8_28_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Pc sampling continuous
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_7_3_8_28_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_7_3_8_28">
            <span class="md-nav__icon md-icon"></span>
            Pc sampling continuous
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../others/cupti-tutorial/pc_sampling_continuous/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    CUPTI Program Counter (PC) Sampling Continuous Tutorial
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_7_3_8_29" >
        
          
          <label class="md-nav__link" for="__nav_7_3_8_29" id="__nav_7_3_8_29_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Pc sampling start stop
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_7_3_8_29_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_7_3_8_29">
            <span class="md-nav__icon md-icon"></span>
            Pc sampling start stop
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../others/cupti-tutorial/pc_sampling_start_stop/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    CUPTI PC Sampling Start/Stop Control Tutorial
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_7_3_8_30" >
        
          
          <label class="md-nav__link" for="__nav_7_3_8_30" id="__nav_7_3_8_30_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Pc sampling utility
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_7_3_8_30_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_7_3_8_30">
            <span class="md-nav__icon md-icon"></span>
            Pc sampling utility
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../others/cupti-tutorial/pc_sampling_utility/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    CUPTI PC Sampling Analysis Utility Tutorial
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_7_3_8_31" >
        
          
          <label class="md-nav__link" for="__nav_7_3_8_31" id="__nav_7_3_8_31_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Pm sampling
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_7_3_8_31_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_7_3_8_31">
            <span class="md-nav__icon md-icon"></span>
            Pm sampling
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../others/cupti-tutorial/pm_sampling/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Performance Monitor Sampling Tutorial
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_7_3_8_32" >
        
          
          <label class="md-nav__link" for="__nav_7_3_8_32" id="__nav_7_3_8_32_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Profiling injection
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_7_3_8_32_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_7_3_8_32">
            <span class="md-nav__icon md-icon"></span>
            Profiling injection
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../others/cupti-tutorial/profiling_injection/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    CUPTI Profiling API Injection Tutorial
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_7_3_8_33" >
        
          
          <label class="md-nav__link" for="__nav_7_3_8_33" id="__nav_7_3_8_33_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Range profiling
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_7_3_8_33_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_7_3_8_33">
            <span class="md-nav__icon md-icon"></span>
            Range profiling
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../others/cupti-tutorial/range_profiling/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    CUPTI Range Profiling Tutorial
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_7_3_8_34" >
        
          
          <label class="md-nav__link" for="__nav_7_3_8_34" id="__nav_7_3_8_34_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Sass metrics
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_7_3_8_34_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_7_3_8_34">
            <span class="md-nav__icon md-icon"></span>
            Sass metrics
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../others/cupti-tutorial/sass_metrics/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    SASS Metrics Collection Tutorial
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_7_3_8_35" >
        
          
          <label class="md-nav__link" for="__nav_7_3_8_35" id="__nav_7_3_8_35_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Sass source map
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_7_3_8_35_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_7_3_8_35">
            <span class="md-nav__icon md-icon"></span>
            Sass source map
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../others/cupti-tutorial/sass_source_map/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    CUPTI SASS Source Mapping Tutorial
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_7_3_8_36" >
        
          
          <label class="md-nav__link" for="__nav_7_3_8_36" id="__nav_7_3_8_36_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Unified memory
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_7_3_8_36_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_7_3_8_36">
            <span class="md-nav__icon md-icon"></span>
            Unified memory
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../others/cupti-tutorial/unified_memory/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    CUPTI Unified Memory Profiling Tutorial
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_7_3_8_37" >
        
          
          <label class="md-nav__link" for="__nav_7_3_8_37" id="__nav_7_3_8_37_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Userrange profiling
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_7_3_8_37_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_7_3_8_37">
            <span class="md-nav__icon md-icon"></span>
            Userrange profiling
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../others/cupti-tutorial/userrange_profiling/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    CUPTI User-Range Profiling Tutorial
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_7_3_9" >
        
          
          <label class="md-nav__link" for="__nav_7_3_9" id="__nav_7_3_9_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Miscellaneous
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_7_3_9_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_7_3_9">
            <span class="md-nav__icon md-icon"></span>
            Miscellaneous
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../others/miscellaneous/bpftime-kubecon-draft/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    eBPF and Wasm: Unifying Userspace Extensions With Bpftime - Yusheng Zheng, eunomia-bpf
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../others/miscellaneous/bpftime-roadmap/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    About bpftime - bpftime ideas
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../others/miscellaneous/ebpf-fuse/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    基于内核态/用户态 eBPF 实现高性能用户态文件系统功能 - 操作系统大赛赛题
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../others/miscellaneous/ebpf-gpu/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    使用 eBPF 对 AI/ML 工作负载进行追踪和性能分析 - 操作系统大赛赛题
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../others/miscellaneous/ebpf-linux/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Project Proposal for bpftime - eBPF Foundation
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../others/miscellaneous/ebpf-lsm-usm/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    实现内核与用户态共同工作的 eBPF 安全框架 - 操作系统大赛赛题
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../others/miscellaneous/ebpf-usecases/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Categorization of eBPF Hooks and Use Cases
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../others/miscellaneous/ebpf-userspace-port/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    将用户态 eBPF 扩展到 MacOS、Windows、FreeBSD 等更多平台 - 操作系统大赛赛题
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../others/miscellaneous/ebpf-uxdp-workshop-talk/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    uXDP: Frictionless XDP Deployments in Userspace (12-min talk)
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../others/miscellaneous/gsoc-ospp/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    GSOC - OSPP draft proposal
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../others/miscellaneous/ideas/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    开源活动的可能想法 - eunomia-bpf 2024
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../others/miscellaneous/linux-plumbers-talk/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    bpftime talk at linux plumbers 2025
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../others/miscellaneous/osdi-talk/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Speech Script for OSDI 2025 bpftime talk "Extending Applications Safely and Efficiently"
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../others/miscellaneous/roadmap/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    bpftime roadmap and ideas for 2024
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../others/miscellaneous/talk-ebpf-summit/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    eBPF Summit 2025 bpftime talk
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../others/miscellaneous/wasm-bpf-kubecon/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Securing and Simplifying eBPF Deployments with WebAssembly
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../others/miscellaneous/wasm-bpf-talk/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    talk draft in kubecon
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_7_3_10" >
        
          
          <label class="md-nav__link" for="__nav_7_3_10" id="__nav_7_3_10_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Nvbit tutorial
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_7_3_10_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_7_3_10">
            <span class="md-nav__icon md-icon"></span>
            Nvbit tutorial
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../others/nvbit-tutorial/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    NVBit Tutorial: Comprehensive Guide to GPU Binary Instrumentation
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_7_3_10_2" >
        
          
          <label class="md-nav__link" for="__nav_7_3_10_2" id="__nav_7_3_10_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Tools
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_7_3_10_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_7_3_10_2">
            <span class="md-nav__icon md-icon"></span>
            Tools
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../others/nvbit-tutorial/tools/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    NVBit Tutorial Tools
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_7_3_10_2_2" >
        
          
          <label class="md-nav__link" for="__nav_7_3_10_2_2" id="__nav_7_3_10_2_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Instr count
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="5" aria-labelledby="__nav_7_3_10_2_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_7_3_10_2_2">
            <span class="md-nav__icon md-icon"></span>
            Instr count
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../others/nvbit-tutorial/tools/instr_count/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    NVBit Tutorial: Instruction Counting
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_7_3_10_2_3" >
        
          
          <label class="md-nav__link" for="__nav_7_3_10_2_3" id="__nav_7_3_10_2_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Instr count bb
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="5" aria-labelledby="__nav_7_3_10_2_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_7_3_10_2_3">
            <span class="md-nav__icon md-icon"></span>
            Instr count bb
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../others/nvbit-tutorial/tools/instr_count_bb/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    NVBit Tutorial: Basic Block Instruction Counting
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_7_3_10_2_4" >
        
          
          <label class="md-nav__link" for="__nav_7_3_10_2_4" id="__nav_7_3_10_2_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Instr count cuda graph
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="5" aria-labelledby="__nav_7_3_10_2_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_7_3_10_2_4">
            <span class="md-nav__icon md-icon"></span>
            Instr count cuda graph
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../others/nvbit-tutorial/tools/instr_count_cuda_graph/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    NVBit Tutorial: Instruction Counting with CUDA Graphs Support
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_7_3_10_2_5" >
        
          
          <label class="md-nav__link" for="__nav_7_3_10_2_5" id="__nav_7_3_10_2_5_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Mem printf2
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="5" aria-labelledby="__nav_7_3_10_2_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_7_3_10_2_5">
            <span class="md-nav__icon md-icon"></span>
            Mem printf2
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../others/nvbit-tutorial/tools/mem_printf2/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    NVBit Tutorial: GPU-to-CPU Printing with mem_printf2
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_7_3_10_2_6" >
        
          
          <label class="md-nav__link" for="__nav_7_3_10_2_6" id="__nav_7_3_10_2_6_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Mem trace
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="5" aria-labelledby="__nav_7_3_10_2_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_7_3_10_2_6">
            <span class="md-nav__icon md-icon"></span>
            Mem trace
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../others/nvbit-tutorial/tools/mem_trace/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    NVBit Tutorial: Memory Tracing
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_7_3_10_2_7" >
        
          
          <label class="md-nav__link" for="__nav_7_3_10_2_7" id="__nav_7_3_10_2_7_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Mov replace
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="5" aria-labelledby="__nav_7_3_10_2_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_7_3_10_2_7">
            <span class="md-nav__icon md-icon"></span>
            Mov replace
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../others/nvbit-tutorial/tools/mov_replace/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    NVBit Tutorial: MOV Instruction Replacement
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_7_3_10_2_8" >
        
          
          <label class="md-nav__link" for="__nav_7_3_10_2_8" id="__nav_7_3_10_2_8_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Opcode hist
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="5" aria-labelledby="__nav_7_3_10_2_8_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_7_3_10_2_8">
            <span class="md-nav__icon md-icon"></span>
            Opcode hist
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../others/nvbit-tutorial/tools/opcode_hist/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    NVBit Tutorial: Opcode Histogram
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_7_3_10_2_9" >
        
          
          <label class="md-nav__link" for="__nav_7_3_10_2_9" id="__nav_7_3_10_2_9_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Record reg vals
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="5" aria-labelledby="__nav_7_3_10_2_9_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_7_3_10_2_9">
            <span class="md-nav__icon md-icon"></span>
            Record reg vals
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../others/nvbit-tutorial/tools/record_reg_vals/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    NVBit Tutorial: Register Value Recording
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_7_3_11" >
        
          
          <label class="md-nav__link" for="__nav_7_3_11" id="__nav_7_3_11_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Papers
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_7_3_11_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_7_3_11">
            <span class="md-nav__icon md-icon"></span>
            Papers
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../others/papers/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    paper reading and translate
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../others/papers/osdi20-brunella/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    hXDP: Efficient Software Packet Processing on FPGA NICs
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#the-visibility-gap-in-gpu-computing" class="md-nav__link">
    <span class="md-ellipsis">
      The Visibility Gap in GPU Computing
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#how-iaprof-bridges-the-gap" class="md-nav__link">
    <span class="md-ellipsis">
      How iaprof Bridges the Gap
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#intel-gpu-architecture-background" class="md-nav__link">
    <span class="md-ellipsis">
      Intel GPU Architecture Background
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#the-architecture-inside-iaprof" class="md-nav__link">
    <span class="md-ellipsis">
      The Architecture: Inside iaprof
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#system-overview" class="md-nav__link">
    <span class="md-ellipsis">
      System Overview
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#core-components" class="md-nav__link">
    <span class="md-ellipsis">
      Core Components
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Core Components">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1-ebpf-subsystem-kernel-space" class="md-nav__link">
    <span class="md-ellipsis">
      1. eBPF Subsystem (Kernel Space)
    </span>
  </a>
  
    <nav class="md-nav" aria-label="1. eBPF Subsystem (Kernel Space)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#key-ebpf-programs" class="md-nav__link">
    <span class="md-ellipsis">
      Key eBPF Programs
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ebpf-maps" class="md-nav__link">
    <span class="md-ellipsis">
      eBPF Maps
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2-userspace-bpf-collector" class="md-nav__link">
    <span class="md-ellipsis">
      2. Userspace BPF Collector
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3-eu-stall-collector" class="md-nav__link">
    <span class="md-ellipsis">
      3. EU Stall Collector
    </span>
  </a>
  
    <nav class="md-nav" aria-label="3. EU Stall Collector">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#data-flow" class="md-nav__link">
    <span class="md-ellipsis">
      Data Flow
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#stall-types" class="md-nav__link">
    <span class="md-ellipsis">
      Stall Types
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#deferred-attribution" class="md-nav__link">
    <span class="md-ellipsis">
      Deferred Attribution
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#4-debug-collector" class="md-nav__link">
    <span class="md-ellipsis">
      4. Debug Collector
    </span>
  </a>
  
    <nav class="md-nav" aria-label="4. Debug Collector">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#capabilities" class="md-nav__link">
    <span class="md-ellipsis">
      Capabilities
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#5-oa-collector" class="md-nav__link">
    <span class="md-ellipsis">
      5. OA Collector
    </span>
  </a>
  
    <nav class="md-nav" aria-label="5. OA Collector">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#initialization-sequence" class="md-nav__link">
    <span class="md-ellipsis">
      Initialization Sequence
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#6-gpu-kernel-store" class="md-nav__link">
    <span class="md-ellipsis">
      6. GPU Kernel Store
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#7-stack-printer" class="md-nav__link">
    <span class="md-ellipsis">
      7. Stack Printer
    </span>
  </a>
  
    <nav class="md-nav" aria-label="7. Stack Printer">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#symbol-resolution" class="md-nav__link">
    <span class="md-ellipsis">
      Symbol Resolution
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#output-generation" class="md-nav__link">
    <span class="md-ellipsis">
      Output Generation
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#execution-flow" class="md-nav__link">
    <span class="md-ellipsis">
      Execution Flow
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Execution Flow">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#startup-sequence" class="md-nav__link">
    <span class="md-ellipsis">
      Startup Sequence
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#data-collection-multi-threaded" class="md-nav__link">
    <span class="md-ellipsis">
      Data Collection (Multi-threaded)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#shutdown-and-output" class="md-nav__link">
    <span class="md-ellipsis">
      Shutdown and Output
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#key-design-decisions" class="md-nav__link">
    <span class="md-ellipsis">
      Key Design Decisions
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Key Design Decisions">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1-why-ebpf" class="md-nav__link">
    <span class="md-ellipsis">
      1. Why eBPF?
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2-why-in-kernel-batch-buffer-parsing" class="md-nav__link">
    <span class="md-ellipsis">
      2. Why In-Kernel Batch Buffer Parsing?
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3-why-deferred-attribution" class="md-nav__link">
    <span class="md-ellipsis">
      3. Why Deferred Attribution?
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#4-why-two-level-locking" class="md-nav__link">
    <span class="md-ellipsis">
      4. Why Two-Level Locking?
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#5-why-folded-stack-format" class="md-nav__link">
    <span class="md-ellipsis">
      5. Why Folded Stack Format?
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#performance-characteristics" class="md-nav__link">
    <span class="md-ellipsis">
      Performance Characteristics
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Performance Characteristics">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#overhead" class="md-nav__link">
    <span class="md-ellipsis">
      Overhead
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#scalability" class="md-nav__link">
    <span class="md-ellipsis">
      Scalability
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#memory-usage" class="md-nav__link">
    <span class="md-ellipsis">
      Memory Usage
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#platform-support" class="md-nav__link">
    <span class="md-ellipsis">
      Platform Support
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Platform Support">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#supported-hardware" class="md-nav__link">
    <span class="md-ellipsis">
      Supported Hardware
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#kernel-requirements" class="md-nav__link">
    <span class="md-ellipsis">
      Kernel Requirements
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#future-enhancements" class="md-nav__link">
    <span class="md-ellipsis">
      Future Enhancements
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Future Enhancements">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#planned-features" class="md-nav__link">
    <span class="md-ellipsis">
      Planned Features
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#research-directions" class="md-nav__link">
    <span class="md-ellipsis">
      Research Directions
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#references" class="md-nav__link">
    <span class="md-ellipsis">
      References
    </span>
  </a>
  
    <nav class="md-nav" aria-label="References">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#external-resources" class="md-nav__link">
    <span class="md-ellipsis">
      External Resources
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#internal-documentation" class="md-nav__link">
    <span class="md-ellipsis">
      Internal Documentation
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#flame-graph-generation-pipeline" class="md-nav__link">
    <span class="md-ellipsis">
      Flame Graph Generation Pipeline
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Flame Graph Generation Pipeline">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#stage-1-data-collection-record-command" class="md-nav__link">
    <span class="md-ellipsis">
      Stage 1: Data Collection (record command)
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Stage 1: Data Collection (record command)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#collected-data-per-sample" class="md-nav__link">
    <span class="md-ellipsis">
      Collected Data Per Sample
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#output-format" class="md-nav__link">
    <span class="md-ellipsis">
      Output Format
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#stage-2-intermediate-processing-flame-command" class="md-nav__link">
    <span class="md-ellipsis">
      Stage 2: Intermediate Processing (flame command)
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Stage 2: Intermediate Processing (flame command)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#processing-steps" class="md-nav__link">
    <span class="md-ellipsis">
      Processing Steps
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#folded-stack-format" class="md-nav__link">
    <span class="md-ellipsis">
      Folded Stack Format
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#stage-3-flame-graph-rendering-flamegraphpl" class="md-nav__link">
    <span class="md-ellipsis">
      Stage 3: Flame Graph Rendering (flamegraph.pl)
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Stage 3: Flame Graph Rendering (flamegraph.pl)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#rendering-process" class="md-nav__link">
    <span class="md-ellipsis">
      Rendering Process
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#svg-structure" class="md-nav__link">
    <span class="md-ellipsis">
      SVG Structure
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


  
    <a href="https://github.com/eunomia-bpf/eunomia.dev/tree/main/docs/blog/posts/iaprof-analysis.md" title="Edit this page" class="md-content__button md-icon" rel="edit">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M10 20H6V4h7v5h5v3.1l2-2V8l-6-6H6c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h4zm10.2-7c.1 0 .3.1.4.2l1.3 1.3c.2.2.2.6 0 .8l-1 1-2.1-2.1 1-1c.1-.1.2-.2.4-.2m0 3.9L14.1 23H12v-2.1l6.1-6.1z"/></svg>
    </a>
  
  


<h1 id="understanding-iaprof-a-deep-dive-into-aigpu-flame-graph-profiling">Understanding iaprof: A Deep Dive into AI/GPU Flame Graph Profiling</h1>
<p><em>An exploration of Intel's innovative profiling tool that bridges the gap between CPU and GPU execution</em></p>
<blockquote>
<p><strong>Project Link</strong>: <a href="https://github.com/intel/iaprof">github.com/intel/iaprof</a> - Intel's AI/GPU flame graph profiler</p>
</blockquote>
<p>If you've ever tried to optimize a GPU-accelerated machine learning workload, you've likely encountered a frustrating problem: your code runs on the CPU, but the performance bottlenecks live on the GPU. Traditional profiling tools show you one world or the other, but never both together. This disconnect makes it nearly impossible to understand which lines of your Python or C++ code are responsible for expensive GPU operations.</p>
<p>Enter <strong>iaprof</strong>, Intel's solution to this observability challenge. At its core, iaprof is a profiling tool that generates what Intel calls "AI Flame Graphs" - interactive visualizations that seamlessly connect your application code to the GPU instructions it triggers, all while showing where performance is actually being lost. This blog post will take you on a deep dive into how iaprof works, the technologies it leverages, and the architecture that makes it possible.</p>
<!-- more -->

<h2 id="the-visibility-gap-in-gpu-computing">The Visibility Gap in GPU Computing</h2>
<p>To appreciate what iaprof accomplishes, we need to understand the fundamental challenge of profiling GPU workloads. When you write code that uses GPUs for computation, there's an inherent disconnect between where you write code and where that code actually executes. Your application runs on the CPU, making calls to high-level frameworks like PyTorch or TensorFlow, which in turn call runtime libraries like Level Zero or CUDA, which eventually communicate with kernel drivers that manage the GPU hardware.</p>
<p>This deep software stack creates multiple layers of abstraction. By the time your matrix multiplication reaches the GPU, it's been transformed from Python through multiple runtime layers into GPU machine code - shader instructions executing on Execution Units (EUs) deep inside the silicon. When that operation runs slowly, traditional tools struggle to tell you why.</p>
<p>General-purpose profilers like <code>perf</code> or Intel VTune excel at showing CPU execution patterns. They can tell you exactly which CPU functions are consuming time, but they treat the GPU as an opaque black box. When your profile shows that most time is spent in <code>cudaLaunchKernel</code> or <code>zeCommandListAppendLaunchKernel</code>, you know you're waiting on the GPU, but not which specific GPU operations are slow or what those operations are actually doing.</p>
<p>GPU-specific profilers take the opposite approach. Tools like Intel GPA or <code>nvidia-smi</code> provide detailed GPU metrics - memory bandwidth utilization, compute unit occupancy, instruction throughput. These metrics are invaluable for understanding GPU performance, but they lack the crucial connection back to your source code. You might see that a particular shader has memory access stalls, but determining which line of your training loop launched that shader requires manual detective work, correlating timestamps across separate CPU and GPU timelines.</p>
<h2 id="how-iaprof-bridges-the-gap">How iaprof Bridges the Gap</h2>
<p>iaprof's innovation is creating a single, unified view that connects application code to GPU hardware performance. The tool combines three sophisticated techniques to achieve this visibility.</p>
<p>First, it uses eBPF (extended Berkeley Packet Filter) to trace GPU driver operations at the kernel level. eBPF is a Linux kernel technology that allows safe, verified programs to run inside the kernel with minimal overhead. iaprof's eBPF programs hook into the GPU driver's execution paths, intercepting every GPU kernel launch and capturing the complete CPU call stack at the moment of launch. This happens transparently, without requiring any modifications to your application code or even recompilation.</p>
<p>Second, iaprof leverages Intel's Observability Architecture (OA) for hardware sampling. The OA is a hardware feature built into modern Intel GPUs that can collect performance counter samples directly from the Execution Units with minimal overhead - typically under 5%. These samples capture detailed information about what's happening at the hardware level: which instructions are executing, what types of stalls are occurring (memory access, control flow, synchronization), and how frequently each pattern appears.</p>
<p>Third, the tool uses the GPU debug API to retrieve shader binaries and execution metadata. This allows iaprof to disassemble GPU machine code and map hardware samples to specific instructions, complete with human-readable assembly syntax.</p>
<p>The magic happens when iaprof combines these three data streams. For every GPU instruction that shows up in hardware sampling, the tool can trace back through the debug information to identify the shader, through the driver trace to find the kernel launch, and through the CPU stack capture to determine which application functions triggered that launch. The result is a complete execution path from your Python script or C++ application all the way down to the specific multiply-add instruction stalling on memory access inside the GPU.</p>
<h2 id="intel-gpu-architecture-background">Intel GPU Architecture Background</h2>
<p>To understand how iaprof works, it's helpful to know the basics of Intel GPU architecture. Modern Intel GPUs are built around a hierarchy of parallel execution units designed for massive throughput.</p>
<p>At the lowest level are <strong>Execution Units (EUs)</strong>, the fundamental compute cores of the GPU. Each EU contains a SIMD (Single Instruction Multiple Data) processor that can execute the same instruction across multiple data elements simultaneously - typically 8 or 16 elements wide depending on the architecture. Think of an EU as analogous to a CPU core, but optimized for data-parallel workloads rather than sequential code.</p>
<p>Intel's use of SIMD differs from NVIDIA's SIMT (Single Instruction Multiple Thread) approach, though the distinction has blurred in modern architectures. In pure SIMD, all data lanes execute exactly the same instruction in lockstep with no per-lane control flow - if one lane needs to branch differently, all lanes must execute both paths with masking. NVIDIA's SIMT model, by contrast, treats each lane as an independent thread with its own instruction pointer and register file, allowing for more flexible divergence handling through hardware thread scheduling. Each NVIDIA "warp" contains 32 threads that preferentially execute together but can diverge when needed. However, Intel GPUs have evolved to include masked execution capabilities similar to SIMT, allowing individual SIMD lanes to be selectively enabled or disabled based on predicate masks. This hybrid approach gives Intel GPUs some SIMT-like flexibility while maintaining the efficiency of SIMD execution for uniform workloads. For profiling purposes, this means that control flow divergence can create performance artifacts where some EU lanes are active while others are masked off, wasting potential throughput.</p>
<p>EUs are organized into <strong>subslices</strong> (or <strong>Xe-cores</strong> in newer architectures), which group multiple EUs together with shared resources like a local L1 cache, texture sampling units, and load/store units. A subslice might contain 8-16 EUs working together. These subslices are further grouped into <strong>slices</strong>, which share larger caches and memory controllers.</p>
<p>When you launch a GPU kernel - whether it's a compute shader in SYCL, a CUDA kernel compiled for Intel, or a graphics shader in Vulkan - the GPU's thread dispatcher breaks your work into many parallel threads. These threads are grouped into <strong>SIMD lanes</strong> that execute together on an EU. The hardware automatically manages scheduling these threads across available EUs to maximize utilization.</p>
<p>The <strong>Observability Architecture (OA)</strong> is Intel's hardware performance monitoring system built into the GPU. It can sample the execution state of EUs at regular intervals, capturing which instruction each EU is executing and critically, what's preventing it from making progress. These "stall types" reveal whether an EU is actively computing, waiting for memory, blocked on control flow dependencies, or stalled on synchronization primitives.</p>
<p>This is where iaprof's power comes from: by sampling EU stall states and correlating them with specific shader instructions and CPU call stacks, it reveals exactly where your code is losing performance - not just that a kernel is slow, but which specific instructions within that kernel are causing the bottleneck and what hardware resource they're waiting on.</p>
<h2 id="the-architecture-inside-iaprof">The Architecture: Inside iaprof</h2>
<p>Understanding how iaprof works requires looking at its multi-threaded architecture. The tool runs as a privileged user-space application (requiring root or <code>CAP_PERFMON</code> capabilities) that coordinates several concurrent collection threads, each gathering different pieces of the profiling puzzle.</p>
<p>At the heart of iaprof's approach is the combination of four key technologies working in concert. eBPF kernel tracing intercepts GPU driver calls to track kernel launches and memory mappings without requiring any code changes to the target application. Hardware sampling collects Execution Unit (EU) stall samples via Intel's Observability Architecture with less than 5% overhead, ensuring the profiler doesn't significantly perturb the workload being measured. The debug API retrieves shader binaries and detailed execution information enabling instruction-level analysis of what the GPU is actually doing. Finally, sophisticated symbol resolution translates raw memory addresses in both CPU and kernel stacks into human-readable symbols complete with file and line number information.</p>
<p>The end result is an interactive flame graph showing the complete execution path from application code - whether that's Python, C++, or another language - through runtime libraries like PyTorch, Level Zero, or Vulkan, down through the kernel driver, all the way to specific GPU shader instructions. Each frame in this visualization is annotated with hardware stall metrics broken down by type: memory access stalls, control flow stalls, synchronization stalls, and more.</p>
<p>This comprehensive visibility enables several critical use cases in modern GPU computing. Teams can optimize AI training and inference workloads by identifying exactly which parts of their neural network architecture are causing GPU performance bottlenecks. Graphics engineers can pinpoint bottlenecks in rendering pipelines and trace them back to the specific draw calls or shader code responsible. Machine learning engineers can understand and quantify the overhead introduced by framework layers, distinguishing between actual computation time and framework coordination overhead. Compiler teams can validate whether their GPU compiler optimizations are having the intended effect at the hardware level. And development teams can run performance regression testing to catch when code changes inadvertently introduce GPU performance issues.</p>
<p>Currently, iaprof supports Intel Data Center GPU Max (Ponte Vecchio), Intel Arc B-series (Battlemage), and other Xe2-based GPUs, with ongoing work to expand hardware compatibility.</p>
<h2 id="system-overview">System Overview</h2>
<div class="highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a>┌─────────────────────────────────────────────────────────────────────┐
<a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a>│                           User Application                          │
<a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a>│         (e.g., PyTorch, TensorFlow, SYCL, Vulkan, etc.)             │
<a id="__codelineno-0-4" name="__codelineno-0-4" href="#__codelineno-0-4"></a>└────────────────────────────┬────────────────────────────────────────┘
<a id="__codelineno-0-5" name="__codelineno-0-5" href="#__codelineno-0-5"></a>                             │ API calls
<a id="__codelineno-0-6" name="__codelineno-0-6" href="#__codelineno-0-6"></a>┌────────────────────────────▼────────────────────────────────────────┐
<a id="__codelineno-0-7" name="__codelineno-0-7" href="#__codelineno-0-7"></a>│                     Runtime Libraries                                │
<a id="__codelineno-0-8" name="__codelineno-0-8" href="#__codelineno-0-8"></a>│       (Level Zero, Vulkan, OpenCL, oneDNN, cuDNN, etc.)             │
<a id="__codelineno-0-9" name="__codelineno-0-9" href="#__codelineno-0-9"></a>└────────────────────────────┬────────────────────────────────────────┘
<a id="__codelineno-0-10" name="__codelineno-0-10" href="#__codelineno-0-10"></a>                             │ ioctl()
<a id="__codelineno-0-11" name="__codelineno-0-11" href="#__codelineno-0-11"></a>┌────────────────────────────▼────────────────────────────────────────┐
<a id="__codelineno-0-12" name="__codelineno-0-12" href="#__codelineno-0-12"></a>│                      Linux Kernel                                    │
<a id="__codelineno-0-13" name="__codelineno-0-13" href="#__codelineno-0-13"></a>│  ┌──────────────────┐  ┌─────────────────┐  ┌────────────────────┐ │
<a id="__codelineno-0-14" name="__codelineno-0-14" href="#__codelineno-0-14"></a>│  │  DRM Subsystem   │  │  i915/Xe Driver │  │  eBPF Subsystem    │ │
<a id="__codelineno-0-15" name="__codelineno-0-15" href="#__codelineno-0-15"></a>│  │                  │◄─┤  (GPU Driver)   │  │                    │ │
<a id="__codelineno-0-16" name="__codelineno-0-16" href="#__codelineno-0-16"></a>│  │  - Device mgmt   │  │  - Memory mgmt  │◄─┤  - iaprof BPF      │ │
<a id="__codelineno-0-17" name="__codelineno-0-17" href="#__codelineno-0-17"></a>│  │  - IOCTL routing │  │  - Execution    │  │    programs        │ │
<a id="__codelineno-0-18" name="__codelineno-0-18" href="#__codelineno-0-18"></a>│  │                  │  │  - Batch buffers│  │  - Ringbuffer      │ │
<a id="__codelineno-0-19" name="__codelineno-0-19" href="#__codelineno-0-19"></a>│  └──────────────────┘  └────────┬────────┘  └─────────┬──────────┘ │
<a id="__codelineno-0-20" name="__codelineno-0-20" href="#__codelineno-0-20"></a>│                                 │                      │             │
<a id="__codelineno-0-21" name="__codelineno-0-21" href="#__codelineno-0-21"></a>│                                 │ Commands             │ Events      │
<a id="__codelineno-0-22" name="__codelineno-0-22" href="#__codelineno-0-22"></a>│                                 ▼                      │             │
<a id="__codelineno-0-23" name="__codelineno-0-23" href="#__codelineno-0-23"></a>│  ┌────────────────────────────────────────────────────┼──────────┐ │
<a id="__codelineno-0-24" name="__codelineno-0-24" href="#__codelineno-0-24"></a>│  │                 Intel GPU Hardware                  │          │ │
<a id="__codelineno-0-25" name="__codelineno-0-25" href="#__codelineno-0-25"></a>│  │  ┌──────────┐  ┌──────────┐  ┌─────────────────┐  │          │ │
<a id="__codelineno-0-26" name="__codelineno-0-26" href="#__codelineno-0-26"></a>│  │  │ EU Array │  │ L1/L3/RAM│  │ OA (Observ.    │  │          │ │
<a id="__codelineno-0-27" name="__codelineno-0-27" href="#__codelineno-0-27"></a>│  │  │ (Compute)│  │ (Memory) │  │  Architecture) │◄─┘          │ │
<a id="__codelineno-0-28" name="__codelineno-0-28" href="#__codelineno-0-28"></a>│  │  │          │  │          │  │ - Sampling HW  │             │ │
<a id="__codelineno-0-29" name="__codelineno-0-29" href="#__codelineno-0-29"></a>│  │  │ Execution│  │ Data     │  │ - Perf counters│             │ │
<a id="__codelineno-0-30" name="__codelineno-0-30" href="#__codelineno-0-30"></a>│  │  └──────────┘  └──────────┘  └─────────────────┘             │ │
<a id="__codelineno-0-31" name="__codelineno-0-31" href="#__codelineno-0-31"></a>│  └────────────────────────────────────────────────────────────────┘ │
<a id="__codelineno-0-32" name="__codelineno-0-32" href="#__codelineno-0-32"></a>└──────────────────────────────────────┬──────────────────────────────┘
<a id="__codelineno-0-33" name="__codelineno-0-33" href="#__codelineno-0-33"></a>                                       │
<a id="__codelineno-0-34" name="__codelineno-0-34" href="#__codelineno-0-34"></a>                                       │ 1. eBPF events (ringbuffer)
<a id="__codelineno-0-35" name="__codelineno-0-35" href="#__codelineno-0-35"></a>                                       │ 2. EU stall samples (debug API)
<a id="__codelineno-0-36" name="__codelineno-0-36" href="#__codelineno-0-36"></a>                                       │ 3. Shader uploads (debug API)
<a id="__codelineno-0-37" name="__codelineno-0-37" href="#__codelineno-0-37"></a>                                       ▼
<a id="__codelineno-0-38" name="__codelineno-0-38" href="#__codelineno-0-38"></a>┌─────────────────────────────────────────────────────────────────────┐
<a id="__codelineno-0-39" name="__codelineno-0-39" href="#__codelineno-0-39"></a>│                            iaprof                                    │
<a id="__codelineno-0-40" name="__codelineno-0-40" href="#__codelineno-0-40"></a>│  ┌──────────────┐  ┌──────────────┐  ┌──────────────┐             │
<a id="__codelineno-0-41" name="__codelineno-0-41" href="#__codelineno-0-41"></a>│  │ BPF Collector│  │Debug Collect.│  │EUStall Coll. │             │
<a id="__codelineno-0-42" name="__codelineno-0-42" href="#__codelineno-0-42"></a>│  │              │  │              │  │              │             │
<a id="__codelineno-0-43" name="__codelineno-0-43" href="#__codelineno-0-43"></a>│  │ - Load BPF   │  │ - Shader bin │  │ - HW samples │             │
<a id="__codelineno-0-44" name="__codelineno-0-44" href="#__codelineno-0-44"></a>│  │ - Parse BB   │  │ - Context    │  │ - Stall attr.│             │
<a id="__codelineno-0-45" name="__codelineno-0-45" href="#__codelineno-0-45"></a>│  │ - Stacks     │  │   tracking   │  │   -ibution   │             │
<a id="__codelineno-0-46" name="__codelineno-0-46" href="#__codelineno-0-46"></a>│  └──────┬───────┘  └──────┬───────┘  └──────┬───────┘             │
<a id="__codelineno-0-47" name="__codelineno-0-47" href="#__codelineno-0-47"></a>│         │                 │                 │                       │
<a id="__codelineno-0-48" name="__codelineno-0-48" href="#__codelineno-0-48"></a>│         └────────┬────────┴────────┬────────┘                       │
<a id="__codelineno-0-49" name="__codelineno-0-49" href="#__codelineno-0-49"></a>│                  ▼                 ▼                                 │
<a id="__codelineno-0-50" name="__codelineno-0-50" href="#__codelineno-0-50"></a>│         ┌────────────────────────────────┐                          │
<a id="__codelineno-0-51" name="__codelineno-0-51" href="#__codelineno-0-51"></a>│         │    GPU Kernel Store (Tree)     │                          │
<a id="__codelineno-0-52" name="__codelineno-0-52" href="#__codelineno-0-52"></a>│         │  - Shader metadata &amp; binaries  │                          │
<a id="__codelineno-0-53" name="__codelineno-0-53" href="#__codelineno-0-53"></a>│         │  - CPU/kernel stacks           │                          │
<a id="__codelineno-0-54" name="__codelineno-0-54" href="#__codelineno-0-54"></a>│         │  - Per-offset stall counts     │                          │
<a id="__codelineno-0-55" name="__codelineno-0-55" href="#__codelineno-0-55"></a>│         └───────────────┬────────────────┘                          │
<a id="__codelineno-0-56" name="__codelineno-0-56" href="#__codelineno-0-56"></a>│                         │                                            │
<a id="__codelineno-0-57" name="__codelineno-0-57" href="#__codelineno-0-57"></a>│                         ▼                                            │
<a id="__codelineno-0-58" name="__codelineno-0-58" href="#__codelineno-0-58"></a>│         ┌────────────────────────────────┐                          │
<a id="__codelineno-0-59" name="__codelineno-0-59" href="#__codelineno-0-59"></a>│         │       Stack Printer            │                          │
<a id="__codelineno-0-60" name="__codelineno-0-60" href="#__codelineno-0-60"></a>│         │  - Symbol resolution           │                          │
<a id="__codelineno-0-61" name="__codelineno-0-61" href="#__codelineno-0-61"></a>│         │  - Stack deduplication         │                          │
<a id="__codelineno-0-62" name="__codelineno-0-62" href="#__codelineno-0-62"></a>│         │  - Folded stack output         │                          │
<a id="__codelineno-0-63" name="__codelineno-0-63" href="#__codelineno-0-63"></a>│         └───────────────┬────────────────┘                          │
<a id="__codelineno-0-64" name="__codelineno-0-64" href="#__codelineno-0-64"></a>│                         │                                            │
<a id="__codelineno-0-65" name="__codelineno-0-65" href="#__codelineno-0-65"></a>└─────────────────────────┼────────────────────────────────────────────┘
<a id="__codelineno-0-66" name="__codelineno-0-66" href="#__codelineno-0-66"></a>                          │
<a id="__codelineno-0-67" name="__codelineno-0-67" href="#__codelineno-0-67"></a>                          ▼
<a id="__codelineno-0-68" name="__codelineno-0-68" href="#__codelineno-0-68"></a>                   Folded Stacks
<a id="__codelineno-0-69" name="__codelineno-0-69" href="#__codelineno-0-69"></a>  (CPU_stack;GPU_kernel;GPU_instruction stall_counts)
<a id="__codelineno-0-70" name="__codelineno-0-70" href="#__codelineno-0-70"></a>                          │
<a id="__codelineno-0-71" name="__codelineno-0-71" href="#__codelineno-0-71"></a>                          ▼
<a id="__codelineno-0-72" name="__codelineno-0-72" href="#__codelineno-0-72"></a>                   FlameGraph.pl
<a id="__codelineno-0-73" name="__codelineno-0-73" href="#__codelineno-0-73"></a>                          │
<a id="__codelineno-0-74" name="__codelineno-0-74" href="#__codelineno-0-74"></a>                          ▼
<a id="__codelineno-0-75" name="__codelineno-0-75" href="#__codelineno-0-75"></a>                  Interactive SVG
<a id="__codelineno-0-76" name="__codelineno-0-76" href="#__codelineno-0-76"></a>               (AI/GPU Flame Graph)
</code></pre></div>
<h2 id="core-components">Core Components</h2>
<h3 id="1-ebpf-subsystem-kernel-space">1. eBPF Subsystem (Kernel Space)</h3>
<p><strong>Location</strong>: <code>src/collectors/bpf/bpf/*.bpf.c</code></p>
<p><strong>Purpose</strong>: Trace GPU driver operations in real-time without modifying kernel source</p>
<h4 id="key-ebpf-programs">Key eBPF Programs</h4>
<p>iaprof uses several specialized eBPF programs, each targeting different aspects of GPU driver behavior. These programs work together to build a complete picture of what happens when your application submits work to the GPU.</p>
<p><strong>a) Execution Buffer Tracing</strong> (<code>i915/execbuffer.bpf.c</code>, <code>xe/exec.bpf.c</code>)</p>
<p>The execution buffer tracer is the cornerstone of iaprof's CPU-to-GPU correlation. It hooks into the critical moment when the GPU driver receives a submission request from userspace. This hook uses fexit (function exit) probes on <code>i915_gem_do_execbuffer</code> for i915 driver or <code>xe_exec_ioctl</code> for Xe driver, ensuring it captures the complete context after the driver has processed the submission.</p>
<p>At this point, the tracer captures:
- Execution buffer ID
- VM and context IDs
- CPU user-space stack (via <code>bpf_get_stack</code> with <code>BPF_F_USER_STACK</code>)
- Kernel stack (via <code>bpf_get_stack</code>)
- Process metadata (PID, TID, CPU, timestamp, command name)
- Batch buffer location (GPU address, CPU mapping)</p>
<p>Sends: <code>struct execbuf_info</code> to ringbuffer</p>
<p><strong>b) Batch Buffer Parser</strong> (<code>batchbuffer.bpf.c</code>)</p>
<p>The batch buffer parser represents one of iaprof's most sophisticated eBPF components. Batch buffers are the command streams that tell the GPU what to execute - they contain encoded instructions for loading shaders, configuring registers, and dispatching compute or graphics work. To correlate GPU execution with specific shaders, iaprof must parse these buffers to extract the addresses where shader code resides.</p>
<p>This parser runs in the same hook context as the execbuffer tracer, giving it access to the freshly submitted batch buffer. The parsing process:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a>1. Translates GPU batch buffer address to CPU address using gpu_cpu_map
<a id="__codelineno-1-2" name="__codelineno-1-2" href="#__codelineno-1-2"></a>2. Reads batch buffer from userspace memory (bpf_probe_read_user)
<a id="__codelineno-1-3" name="__codelineno-1-3" href="#__codelineno-1-3"></a>3. Parses GPU commands DWORD-by-DWORD:
<a id="__codelineno-1-4" name="__codelineno-1-4" href="#__codelineno-1-4"></a>   - Identifies command type from bits 31:29
<a id="__codelineno-1-5" name="__codelineno-1-5" href="#__codelineno-1-5"></a>   - Calculates command length (static or dynamic based on command)
<a id="__codelineno-1-6" name="__codelineno-1-6" href="#__codelineno-1-6"></a>   - Follows BATCH_BUFFER_START to chained buffers (up to 3 levels deep)
<a id="__codelineno-1-7" name="__codelineno-1-7" href="#__codelineno-1-7"></a>   - Extracts Kernel State Pointers (KSPs) from COMPUTE_WALKER and 3DSTATE commands
<a id="__codelineno-1-8" name="__codelineno-1-8" href="#__codelineno-1-8"></a>   - Extracts System Instruction Pointer (SIP) from STATE_SIP
<a id="__codelineno-1-9" name="__codelineno-1-9" href="#__codelineno-1-9"></a>4. If buffer incomplete (NOOPs encountered): Defers parsing with BPF timer
<a id="__codelineno-1-10" name="__codelineno-1-10" href="#__codelineno-1-10"></a>5. Emits KSPs and SIP to ringbuffer
</code></pre></div>
<p>Challenges:</p>
<p>Implementing this parser within eBPF presents several significant challenges. The eBPF verifier imposes strict constraints including maximum instruction counts and requirements that all loops must be provably bounded, making complex parsing logic difficult to express. The parser must also handle race conditions where the batch buffer may not yet be fully written by userspace when the execbuffer ioctl is called, requiring deferred parsing with timers. Additionally, nested batch buffers that chain to other buffers require careful state tracking to avoid infinite loops while ensuring all shader pointers are discovered.</p>
<p><strong>c) Memory Mapping Tracing</strong> (<code>i915/mmap.bpf.c</code>, <code>xe/mmap.bpf.c</code>)</p>
<p>GPU buffers live in a complex memory space with multiple address translations. A single buffer might have a GPU virtual address (what the GPU sees), a handle (what userspace uses to reference it), and a CPU virtual address (what the application can read/write). The memory mapping tracer maintains these translation tables, which are essential for the batch buffer parser to read GPU command streams from userspace memory.</p>
<p>This tracer hooks:
- <code>i915_gem_mmap_offset_ioctl</code> (fexit) - Records fake offset
- <code>i915_gem_mmap</code> (fexit) - Captures CPU address, associates with handle
- <code>unmap_region</code> (fentry) - Cleans up mappings on munmap</p>
<p>Maintains: <code>gpu_cpu_map</code> (GPU addr → CPU addr) and <code>cpu_gpu_map</code> (reverse)</p>
<p><strong>d) VM Bind Tracing</strong> (<code>i915/vm_bind.bpf.c</code>, <code>xe/vm_bind.bpf.c</code>)</p>
<p>Discrete GPUs (those with their own dedicated memory, separate from system RAM) use an additional layer of virtual memory management. Before the GPU can access a buffer, the buffer must be "bound" to a GPU virtual address within a specific virtual memory (VM) context. The VM bind tracer tracks these bindings, allowing iaprof to resolve GPU addresses back to the actual buffer contents.</p>
<p>This tracer hooks:
- <code>i915_gem_vm_bind_ioctl</code> / <code>xe_vm_bind</code> (fexit)
- <code>i915_gem_vm_unbind_ioctl</code> / <code>xe_vm_unbind</code> (fentry)</p>
<p>Purpose: For discrete GPUs, maps GPU virtual addresses to buffer handles and CPU addresses</p>
<p><strong>e) Context Tracking</strong> (<code>i915/context.bpf.c</code>, <code>xe/context.bpf.c</code>)</p>
<p>GPU contexts are execution environments that encapsulate state like which VM is being used, what shaders are loaded, and various configuration settings. When an execution buffer is submitted, it's associated with a specific context. The context tracker maintains the mapping from context IDs to VM IDs, which is crucial for tying everything together - when we see a GPU address in a batch buffer, we need to know which VM context it belongs to in order to translate it correctly.</p>
<p>Tracks: Context ID → VM ID mapping</p>
<p>Needed: To resolve which VM an execbuffer belongs to</p>
<h4 id="ebpf-maps">eBPF Maps</h4>
<p>eBPF maps are shared data structures that act as the communication and storage layer for the eBPF programs. They allow programs to share data with each other and with userspace, and persist state across multiple invocations. iaprof uses several key maps:</p>
<ul>
<li><strong><code>rb</code> (ringbuffer)</strong>: Main output channel, 512 MB</li>
<li><strong><code>gpu_cpu_map</code></strong>: Hash table, GPU address → CPU address/size</li>
<li><strong><code>cpu_gpu_map</code></strong>: Reverse lookup</li>
<li><strong><code>deferred_parse</code></strong>: Batch buffers awaiting retry</li>
<li><strong><code>deferred_timers</code></strong>: BPF timer wrappers for deferred parsing</li>
<li><strong><code>bb_ksps</code></strong>: Per-CPU hash table of discovered KSPs</li>
<li><strong><code>context_create_wait_for_exec</code></strong>: Context → VM ID mappings</li>
</ul>
<h3 id="2-userspace-bpf-collector">2. Userspace BPF Collector</h3>
<p><strong>Location</strong>: <code>src/collectors/bpf/bpf_collector.c</code></p>
<p><strong>Responsibilities</strong>:</p>
<p><strong>Initialization</strong>:</p>
<ul>
<li>Loads compiled eBPF object file (<code>.bpf.o</code>)</li>
<li>Resolves BTF relocations</li>
<li>Attaches programs to kernel tracepoints</li>
<li>Creates ringbuffer and maps file descriptors</li>
</ul>
<p><strong>Event Loop</strong> (runs in dedicated thread):</p>
<ul>
<li><code>epoll_wait()</code> on ringbuffer file descriptor</li>
<li><code>ring_buffer__poll()</code> to consume events</li>
<li>Dispatches to event handlers based on event type</li>
</ul>
<p><strong>Event Handlers</strong>:</p>
<ul>
<li><strong>EXECBUF</strong>: Creates or updates shader in GPU kernel store</li>
<li><strong>EXECBUF_END</strong>: Marks batch buffer parsing complete</li>
<li><strong>KSP</strong>: Adds kernel pointer to shader</li>
<li><strong>SIP</strong>: Adds system routine pointer</li>
<li><strong>UPROBE_</strong>* (if enabled): User-space probe events</li>
</ul>
<h3 id="3-eu-stall-collector">3. EU Stall Collector</h3>
<p><strong>Location</strong>: <code>src/collectors/eustall/eustall_collector.c</code></p>
<p><strong>Purpose</strong>: Collect and attribute hardware EU stall samples</p>
<p>The EU stall collector is where iaprof connects hardware performance data to the execution context captured by eBPF. Intel's Observability Architecture continuously samples the GPU's Execution Units, recording which instruction is executing and what type of stall (if any) is occurring at each sample point. The EU stall collector receives these samples and attributes them to specific shaders and instruction offsets, building up a statistical profile of where the GPU is spending its time and what's causing performance bottlenecks.</p>
<h4 id="data-flow">Data Flow</h4>
<div class="highlight"><pre><span></span><code><a id="__codelineno-2-1" name="__codelineno-2-1" href="#__codelineno-2-1"></a>GPU Hardware Sampling
<a id="__codelineno-2-2" name="__codelineno-2-2" href="#__codelineno-2-2"></a>    ↓
<a id="__codelineno-2-3" name="__codelineno-2-3" href="#__codelineno-2-3"></a>OA / Debug Interface
<a id="__codelineno-2-4" name="__codelineno-2-4" href="#__codelineno-2-4"></a>    ↓
<a id="__codelineno-2-5" name="__codelineno-2-5" href="#__codelineno-2-5"></a>struct eustall_sample {
<a id="__codelineno-2-6" name="__codelineno-2-6" href="#__codelineno-2-6"></a>    uint32_t ip;      // GPU instruction pointer (shifted by 3)
<a id="__codelineno-2-7" name="__codelineno-2-7" href="#__codelineno-2-7"></a>    uint64_t active;  // Active execution count
<a id="__codelineno-2-8" name="__codelineno-2-8" href="#__codelineno-2-8"></a>    uint64_t control; // Control flow stall count
<a id="__codelineno-2-9" name="__codelineno-2-9" href="#__codelineno-2-9"></a>    uint64_t send;    // Memory access stall count
<a id="__codelineno-2-10" name="__codelineno-2-10" href="#__codelineno-2-10"></a>    // ... more stall types
<a id="__codelineno-2-11" name="__codelineno-2-11" href="#__codelineno-2-11"></a>}
<a id="__codelineno-2-12" name="__codelineno-2-12" href="#__codelineno-2-12"></a>    ↓
<a id="__codelineno-2-13" name="__codelineno-2-13" href="#__codelineno-2-13"></a>handle_eustall_sample()
<a id="__codelineno-2-14" name="__codelineno-2-14" href="#__codelineno-2-14"></a>    ├─→ addr = ip &lt;&lt; 3
<a id="__codelineno-2-15" name="__codelineno-2-15" href="#__codelineno-2-15"></a>    ├─→ shader = acquire_containing_shader(addr)
<a id="__codelineno-2-16" name="__codelineno-2-16" href="#__codelineno-2-16"></a>    ├─→ if shader found:
<a id="__codelineno-2-17" name="__codelineno-2-17" href="#__codelineno-2-17"></a>    │   ├─→ offset = addr - shader-&gt;gpu_addr
<a id="__codelineno-2-18" name="__codelineno-2-18" href="#__codelineno-2-18"></a>    │   └─→ shader-&gt;stall_counts[offset] += sample counts
<a id="__codelineno-2-19" name="__codelineno-2-19" href="#__codelineno-2-19"></a>    └─→ else:
<a id="__codelineno-2-20" name="__codelineno-2-20" href="#__codelineno-2-20"></a>        └─→ add to deferred_eustall_waitlist
</code></pre></div>
<h4 id="stall-types">Stall Types</h4>
<p>Understanding stall types is key to interpreting iaprof's output. Not all time on the GPU represents productive computation. The hardware distinguishes between several categories of execution state, from hardware sampling:</p>
<ul>
<li><strong>Active</strong>: EU actively executing (not stalled)</li>
<li><strong>Control</strong>: Control flow dependencies (branches, predication)</li>
<li><strong>Pipestall</strong>: Pipeline resource stalls</li>
<li><strong>Send</strong>: Memory/sampler/URB send stalls</li>
<li><strong>Dist_acc</strong>: Distributed accumulator stalls</li>
<li><strong>SBID</strong>: Scoreboard ID stalls (dependency chains)</li>
<li><strong>Sync</strong>: Synchronization (barriers, fences)</li>
<li><strong>Inst_fetch</strong>: Instruction fetch stalls</li>
<li><strong>TDR</strong> (Xe only): Thread dispatch/retire stalls</li>
</ul>
<h4 id="deferred-attribution">Deferred Attribution</h4>
<p>One challenge in correlating hardware samples with shaders is timing - hardware samples can arrive before iaprof has received the shader metadata from the debug collector. This happens because the GPU might start executing a shader while the debug information is still being processed by the kernel and transmitted to userspace. Rather than discarding these samples, iaprof uses a deferred attribution mechanism.</p>
<p>When EU stall arrives before corresponding shader metadata:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-3-1" name="__codelineno-3-1" href="#__codelineno-3-1"></a><span class="k">struct</span><span class="w"> </span><span class="nc">deferred_eustall</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-3-2" name="__codelineno-3-2" href="#__codelineno-3-2"></a><span class="w">    </span><span class="k">struct</span><span class="w"> </span><span class="nc">eustall_sample</span><span class="w"> </span><span class="n">sample</span><span class="p">;</span>
<a id="__codelineno-3-3" name="__codelineno-3-3" href="#__codelineno-3-3"></a><span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">satisfied</span><span class="p">;</span><span class="w">  </span><span class="c1">// 0 = still waiting, 1 = attributed</span>
<a id="__codelineno-3-4" name="__codelineno-3-4" href="#__codelineno-3-4"></a><span class="p">};</span>
</code></pre></div>
<p>These deferred samples are placed on a waitlist. A separate thread periodically retries attribution when new shaders arrive from the debug collector, eventually matching samples to their corresponding shaders. This ensures no performance data is lost, even when events arrive out of order.</p>
<h3 id="4-debug-collector">4. Debug Collector</h3>
<p><strong>Location</strong>: <code>src/collectors/debug/debug_collector.c</code></p>
<p><strong>Purpose</strong>: Interface with GPU debug API for detailed execution information</p>
<p>The debug collector interfaces with Intel's GPU debug API to access information that's not available through standard driver interfaces. This includes the actual compiled shader binaries, detailed context information, and fine-grained execution control. Without the debug API, iaprof would only have GPU addresses - the debug API provides the actual machine code at those addresses, enabling instruction-level disassembly and analysis.</p>
<h4 id="capabilities">Capabilities</h4>
<p>The debug collector provides several critical capabilities that enable deep GPU inspection. For shader binary collection, it receives shader upload events directly from the driver, copies the shader binary to the shader store, and enables instruction-level disassembly. This is essential for translating GPU instruction pointers into human-readable assembly code.</p>
<p>Context tracking is another key responsibility - the collector monitors context create and destroy events and tracks VM (virtual memory) associations. This information helps iaprof understand which memory space each shader operates in, crucial for correct address resolution.</p>
<p>For deterministic sampling scenarios, the debug collector can exercise execution control by sending SIGSTOP signals to GPU processes for synchronized sampling and triggering EU attention events. This allows for more precise profiling in controlled environments.</p>
<p>The implementation varies by platform: on i915 systems, it uses <code>PRELIM_DRM_I915_DEBUG_*</code> ioctls which require a patched kernel, while on Xe systems it uses <code>DRM_XE_EUDEBUG_*</code> ioctls that have mainline support starting from Linux 6.2.</p>
<h3 id="5-oa-collector">5. OA Collector</h3>
<p><strong>Location</strong>: <code>src/collectors/oa/oa_collector.c</code></p>
<p><strong>Purpose</strong>: Initialize Observability Architecture hardware</p>
<p>The OA (Observability Architecture) collector is responsible for configuring Intel's hardware performance monitoring infrastructure. The OA is a dedicated hardware unit within Intel GPUs that can sample execution state with minimal performance impact. This collector sets up the OA hardware to specifically capture EU stall information, configuring sampling rates and which performance counters to monitor.</p>
<h4 id="initialization-sequence">Initialization Sequence</h4>
<div class="highlight"><pre><span></span><code><a id="__codelineno-4-1" name="__codelineno-4-1" href="#__codelineno-4-1"></a>1. Open DRM device
<a id="__codelineno-4-2" name="__codelineno-4-2" href="#__codelineno-4-2"></a>2. Write to OA control registers:
<a id="__codelineno-4-3" name="__codelineno-4-3" href="#__codelineno-4-3"></a>   - Enable OA unit
<a id="__codelineno-4-4" name="__codelineno-4-4" href="#__codelineno-4-4"></a>   - Configure sampling period
<a id="__codelineno-4-5" name="__codelineno-4-5" href="#__codelineno-4-5"></a>   - Select counter set (EU stalls)
<a id="__codelineno-4-6" name="__codelineno-4-6" href="#__codelineno-4-6"></a>   - Enable triggers
<a id="__codelineno-4-7" name="__codelineno-4-7" href="#__codelineno-4-7"></a>3. Start sampling
</code></pre></div>
<p>Interfaces with EU stall collector to provide sample stream.</p>
<h3 id="6-gpu-kernel-store">6. GPU Kernel Store</h3>
<p><strong>Location</strong>: <code>src/stores/gpu_kernel.c</code></p>
<p>The GPU kernel store is iaprof's central data repository - a thread-safe tree structure that maintains information about all discovered GPU shaders. Each shader entry contains not just the shader binary and GPU address, but also the CPU call stack that launched it and accumulated performance samples. This store acts as the meeting point where data from all the collectors comes together, enabling the correlation between CPU code, GPU shaders, and hardware performance metrics.</p>
<p><strong>Data Structure</strong>:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-5-1" name="__codelineno-5-1" href="#__codelineno-5-1"></a><span class="n">tree</span><span class="p">(</span><span class="kt">uint64_t</span><span class="p">,</span><span class="w"> </span><span class="n">shader_struct</span><span class="p">)</span><span class="w"> </span><span class="n">shaders</span><span class="p">;</span><span class="w">  </span><span class="c1">// Global, sorted by GPU address</span>
<a id="__codelineno-5-2" name="__codelineno-5-2" href="#__codelineno-5-2"></a><span class="n">pthread_rwlock_t</span><span class="w"> </span><span class="n">shaders_lock</span><span class="p">;</span><span class="w">          </span><span class="c1">// Protects tree operations</span>
<a id="__codelineno-5-3" name="__codelineno-5-3" href="#__codelineno-5-3"></a>
<a id="__codelineno-5-4" name="__codelineno-5-4" href="#__codelineno-5-4"></a><span class="k">struct</span><span class="w"> </span><span class="nc">shader</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-5-5" name="__codelineno-5-5" href="#__codelineno-5-5"></a><span class="w">    </span><span class="n">pthread_mutex_t</span><span class="w"> </span><span class="n">lock</span><span class="p">;</span><span class="w">                </span><span class="c1">// Per-shader lock</span>
<a id="__codelineno-5-6" name="__codelineno-5-6" href="#__codelineno-5-6"></a>
<a id="__codelineno-5-7" name="__codelineno-5-7" href="#__codelineno-5-7"></a><span class="w">    </span><span class="c1">// Identity</span>
<a id="__codelineno-5-8" name="__codelineno-5-8" href="#__codelineno-5-8"></a><span class="w">    </span><span class="kt">uint64_t</span><span class="w"> </span><span class="n">gpu_addr</span><span class="p">;</span>
<a id="__codelineno-5-9" name="__codelineno-5-9" href="#__codelineno-5-9"></a><span class="w">    </span><span class="kt">uint64_t</span><span class="w"> </span><span class="n">size</span><span class="p">;</span>
<a id="__codelineno-5-10" name="__codelineno-5-10" href="#__codelineno-5-10"></a><span class="w">    </span><span class="k">enum</span><span class="w"> </span><span class="n">shader_type</span><span class="w"> </span><span class="n">type</span><span class="p">;</span><span class="w">               </span><span class="c1">// SHADER, SYSTEM_ROUTINE, DEBUG_AREA</span>
<a id="__codelineno-5-11" name="__codelineno-5-11" href="#__codelineno-5-11"></a>
<a id="__codelineno-5-12" name="__codelineno-5-12" href="#__codelineno-5-12"></a><span class="w">    </span><span class="c1">// Attribution</span>
<a id="__codelineno-5-13" name="__codelineno-5-13" href="#__codelineno-5-13"></a><span class="w">    </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">pid</span><span class="p">;</span>
<a id="__codelineno-5-14" name="__codelineno-5-14" href="#__codelineno-5-14"></a><span class="w">    </span><span class="kt">uint64_t</span><span class="w"> </span><span class="n">proc_name_id</span><span class="p">,</span><span class="w"> </span><span class="n">ustack_id</span><span class="p">,</span><span class="w"> </span><span class="n">kstack_id</span><span class="p">;</span>
<a id="__codelineno-5-15" name="__codelineno-5-15" href="#__codelineno-5-15"></a><span class="w">    </span><span class="kt">uint64_t</span><span class="w"> </span><span class="n">symbol_id</span><span class="p">,</span><span class="w"> </span><span class="n">filename_id</span><span class="p">;</span>
<a id="__codelineno-5-16" name="__codelineno-5-16" href="#__codelineno-5-16"></a><span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">linenum</span><span class="p">;</span>
<a id="__codelineno-5-17" name="__codelineno-5-17" href="#__codelineno-5-17"></a>
<a id="__codelineno-5-18" name="__codelineno-5-18" href="#__codelineno-5-18"></a><span class="w">    </span><span class="c1">// Binary</span>
<a id="__codelineno-5-19" name="__codelineno-5-19" href="#__codelineno-5-19"></a><span class="w">    </span><span class="kt">unsigned</span><span class="w"> </span><span class="kt">char</span><span class="w"> </span><span class="o">*</span><span class="n">binary</span><span class="p">;</span>
<a id="__codelineno-5-20" name="__codelineno-5-20" href="#__codelineno-5-20"></a>
<a id="__codelineno-5-21" name="__codelineno-5-21" href="#__codelineno-5-21"></a><span class="w">    </span><span class="c1">// Profiling data</span>
<a id="__codelineno-5-22" name="__codelineno-5-22" href="#__codelineno-5-22"></a><span class="w">    </span><span class="n">hash_table</span><span class="p">(</span><span class="kt">uint64_t</span><span class="p">,</span><span class="w"> </span><span class="n">offset_profile_struct</span><span class="p">)</span><span class="w"> </span><span class="n">stall_counts</span><span class="p">;</span>
<a id="__codelineno-5-23" name="__codelineno-5-23" href="#__codelineno-5-23"></a><span class="p">};</span>
</code></pre></div>
<p><strong>Thread Safety</strong>:</p>
<p>The GPU kernel store uses a sophisticated two-level locking strategy to maximize concurrency while maintaining data consistency. At the first level, a reader-writer lock protects the tree structure itself, allowing multiple threads to search for shaders concurrently while ensuring exclusive access for structural modifications. At the second level, each individual shader has its own mutex that protects its fields, enabling different threads to update different shaders simultaneously without contention. This design ensures that the high-frequency operations like stall attribution don't block other collectors from accessing the store.</p>
<p><strong>Operations</strong>:</p>
<ul>
<li><code>acquire_containing_shader(addr)</code>: Range query, finds shader where <code>addr ∈ [gpu_addr, gpu_addr+size)</code></li>
<li><code>acquire_or_create_shader(addr)</code>: Gets existing or allocates new</li>
<li><code>release_shader(shader)</code>: Unlocks shader mutex</li>
</ul>
<h3 id="7-stack-printer">7. Stack Printer</h3>
<p><strong>Location</strong>: <code>src/printers/stack/stack_printer.c</code></p>
<p><strong>Purpose</strong>: Transform collected data into folded stacks for flame graphs</p>
<p>The stack printer is the final transformation stage that converts iaprof's internal data structures into the "folded stack" text format that FlameGraph tools understand. This involves translating raw memory addresses from CPU call stacks into human-readable function names, file paths, and line numbers, then combining them with GPU shader names and instruction disassembly to create complete execution traces.</p>
<h4 id="symbol-resolution">Symbol Resolution</h4>
<p>Symbol resolution is the process of converting raw instruction pointer addresses into meaningful names. The stack printer handles both kernel and user-space symbols differently, using appropriate symbol sources for each.</p>
<p><strong>Kernel Symbols</strong>:
<div class="highlight"><pre><span></span><code><a id="__codelineno-6-1" name="__codelineno-6-1" href="#__codelineno-6-1"></a><span class="k">struct</span><span class="w"> </span><span class="nc">ksyms</span><span class="w"> </span><span class="o">*</span><span class="n">ksyms</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">ksyms_load</span><span class="p">();</span><span class="w">  </span><span class="c1">// Loads /proc/kallsyms</span>
<a id="__codelineno-6-2" name="__codelineno-6-2" href="#__codelineno-6-2"></a><span class="k">const</span><span class="w"> </span><span class="k">struct</span><span class="w"> </span><span class="nc">ksym</span><span class="w"> </span><span class="o">*</span><span class="n">sym</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">ksyms_search</span><span class="p">(</span><span class="n">ksyms</span><span class="p">,</span><span class="w"> </span><span class="n">addr</span><span class="p">);</span>
</code></pre></div></p>
<p><strong>User-Space Symbols</strong>:
<div class="highlight"><pre><span></span><code><a id="__codelineno-7-1" name="__codelineno-7-1" href="#__codelineno-7-1"></a><span class="k">struct</span><span class="w"> </span><span class="nc">syms_cache</span><span class="w"> </span><span class="o">*</span><span class="n">cache</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">syms_cache_create</span><span class="p">();</span><span class="w">  </span><span class="c1">// Per-PID cache</span>
<a id="__codelineno-7-2" name="__codelineno-7-2" href="#__codelineno-7-2"></a><span class="k">const</span><span class="w"> </span><span class="k">struct</span><span class="w"> </span><span class="nc">sym</span><span class="w"> </span><span class="o">*</span><span class="n">sym</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">syms_cache_get</span><span class="p">(</span><span class="n">cache</span><span class="p">,</span><span class="w"> </span><span class="n">pid</span><span class="p">,</span><span class="w"> </span><span class="n">addr</span><span class="p">);</span>
<a id="__codelineno-7-3" name="__codelineno-7-3" href="#__codelineno-7-3"></a><span class="c1">// Parses ELF + DWARF to get function, file, line</span>
</code></pre></div></p>
<h4 id="output-generation">Output Generation</h4>
<div class="highlight"><pre><span></span><code><a id="__codelineno-8-1" name="__codelineno-8-1" href="#__codelineno-8-1"></a>For each shader:
<a id="__codelineno-8-2" name="__codelineno-8-2" href="#__codelineno-8-2"></a>  For each offset with stall counts:
<a id="__codelineno-8-3" name="__codelineno-8-3" href="#__codelineno-8-3"></a>    1. Resolve CPU user stack to symbols: main;worker;submit_kernel
<a id="__codelineno-8-4" name="__codelineno-8-4" href="#__codelineno-8-4"></a>    2. Append GPU kernel name: main;worker;submit_kernel;my_compute_kernel
<a id="__codelineno-8-5" name="__codelineno-8-5" href="#__codelineno-8-5"></a>    3. Disassemble GPU instruction at offset: mad(8) r10.0&lt;1&gt;:f ...
<a id="__codelineno-8-6" name="__codelineno-8-6" href="#__codelineno-8-6"></a>    4. Format stall counts: active=1234,send=567,control=89
<a id="__codelineno-8-7" name="__codelineno-8-7" href="#__codelineno-8-7"></a>    5. Output: main;worker;submit_kernel;my_compute_kernel;mad(8) active=1234,send=567
</code></pre></div>
<p><strong>Optimizations</strong>:</p>
<p>Symbol resolution can be expensive when performed repeatedly for thousands of samples. The stack printer employs several optimization strategies to minimize this overhead. Stack string caching uses a hash table to map complete stacks to their folded string representations, ensuring that identical call stacks are only processed once regardless of how many samples they appear in. Symbol caching maintains per-PID symbol tables, so function addresses are resolved just once per process rather than for every sample. Additionally, batch symbol lookups group address resolution operations together, amortizing the cost of parsing debug information across multiple addresses.</p>
<h2 id="execution-flow">Execution Flow</h2>
<p>Now that we understand the individual components, let's see how they work together during a typical profiling session. The execution flow shows how iaprof initializes, collects data, and produces output.</p>
<h3 id="startup-sequence">Startup Sequence</h3>
<p>When you run <code>iaprof record</code>, a carefully orchestrated initialization sequence sets up all the collectors and prepares the system for profiling. Each step must complete successfully before moving to the next, ensuring that all components are ready to capture data.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-9-1" name="__codelineno-9-1" href="#__codelineno-9-1"></a>1. main(argc, argv)
<a id="__codelineno-9-2" name="__codelineno-9-2" href="#__codelineno-9-2"></a>     ↓
<a id="__codelineno-9-3" name="__codelineno-9-3" href="#__codelineno-9-3"></a>2. Parse command (record / flame / flamescope)
<a id="__codelineno-9-4" name="__codelineno-9-4" href="#__codelineno-9-4"></a>     ↓
<a id="__codelineno-9-5" name="__codelineno-9-5" href="#__codelineno-9-5"></a>3. record(argc, argv)
<a id="__codelineno-9-6" name="__codelineno-9-6" href="#__codelineno-9-6"></a>     ↓
<a id="__codelineno-9-7" name="__codelineno-9-7" href="#__codelineno-9-7"></a>4. check_permissions() - Verify root or CAP_PERFMON
<a id="__codelineno-9-8" name="__codelineno-9-8" href="#__codelineno-9-8"></a>     ↓
<a id="__codelineno-9-9" name="__codelineno-9-9" href="#__codelineno-9-9"></a>5. drm_open_device() - Open /dev/dri/card0
<a id="__codelineno-9-10" name="__codelineno-9-10" href="#__codelineno-9-10"></a>     ↓
<a id="__codelineno-9-11" name="__codelineno-9-11" href="#__codelineno-9-11"></a>6. drm_get_driver_name() - Detect i915 vs Xe
<a id="__codelineno-9-12" name="__codelineno-9-12" href="#__codelineno-9-12"></a>     ↓
<a id="__codelineno-9-13" name="__codelineno-9-13" href="#__codelineno-9-13"></a>7. Initialize collectors:
<a id="__codelineno-9-14" name="__codelineno-9-14" href="#__codelineno-9-14"></a>   a. init_bpf()
<a id="__codelineno-9-15" name="__codelineno-9-15" href="#__codelineno-9-15"></a>        ├─→ bpf_object__open_file(&quot;main.bpf.o&quot;)
<a id="__codelineno-9-16" name="__codelineno-9-16" href="#__codelineno-9-16"></a>        ├─→ bpf_object__load(obj)  // Loads into kernel
<a id="__codelineno-9-17" name="__codelineno-9-17" href="#__codelineno-9-17"></a>        └─→ attach tracepoints
<a id="__codelineno-9-18" name="__codelineno-9-18" href="#__codelineno-9-18"></a>   b. init_oa()
<a id="__codelineno-9-19" name="__codelineno-9-19" href="#__codelineno-9-19"></a>        └─→ Configure OA hardware registers
<a id="__codelineno-9-20" name="__codelineno-9-20" href="#__codelineno-9-20"></a>   c. init_debug()
<a id="__codelineno-9-21" name="__codelineno-9-21" href="#__codelineno-9-21"></a>        └─→ debug_attach(pid=0)  // Attach to all processes
<a id="__codelineno-9-22" name="__codelineno-9-22" href="#__codelineno-9-22"></a>   d. init_eustall()
<a id="__codelineno-9-23" name="__codelineno-9-23" href="#__codelineno-9-23"></a>        └─→ Initialize waitlists, start deferred thread
<a id="__codelineno-9-24" name="__codelineno-9-24" href="#__codelineno-9-24"></a>     ↓
<a id="__codelineno-9-25" name="__codelineno-9-25" href="#__codelineno-9-25"></a>8. Spawn collector threads:
<a id="__codelineno-9-26" name="__codelineno-9-26" href="#__codelineno-9-26"></a>   - bpf_collect_thread()
<a id="__codelineno-9-27" name="__codelineno-9-27" href="#__codelineno-9-27"></a>   - eustall_collect_thread()
<a id="__codelineno-9-28" name="__codelineno-9-28" href="#__codelineno-9-28"></a>   - debug_collect_thread()
<a id="__codelineno-9-29" name="__codelineno-9-29" href="#__codelineno-9-29"></a>   - eustall_deferred_attrib_thread()
<a id="__codelineno-9-30" name="__codelineno-9-30" href="#__codelineno-9-30"></a>     ↓
<a id="__codelineno-9-31" name="__codelineno-9-31" href="#__codelineno-9-31"></a>9. If command specified:
<a id="__codelineno-9-32" name="__codelineno-9-32" href="#__codelineno-9-32"></a>     fork() + exec() child process
<a id="__codelineno-9-33" name="__codelineno-9-33" href="#__codelineno-9-33"></a>   Else:
<a id="__codelineno-9-34" name="__codelineno-9-34" href="#__codelineno-9-34"></a>     Wait for SIGINT (Ctrl-C)
</code></pre></div>
<h3 id="data-collection-multi-threaded">Data Collection (Multi-threaded)</h3>
<p>Once initialization completes, iaprof runs several threads concurrently, each collecting different types of data. These threads operate independently but coordinate through the shared GPU kernel store. This multi-threaded design allows iaprof to handle high event rates without dropping data.</p>
<p><strong>BPF Thread</strong>:
<div class="highlight"><pre><span></span><code><a id="__codelineno-10-1" name="__codelineno-10-1" href="#__codelineno-10-1"></a>while (!should_stop) {
<a id="__codelineno-10-2" name="__codelineno-10-2" href="#__codelineno-10-2"></a>    epoll_wait(rb_fd)  // Block until events
<a id="__codelineno-10-3" name="__codelineno-10-3" href="#__codelineno-10-3"></a>    ring_buffer__poll(rb, timeout)
<a id="__codelineno-10-4" name="__codelineno-10-4" href="#__codelineno-10-4"></a>        ↓ callback for each event
<a id="__codelineno-10-5" name="__codelineno-10-5" href="#__codelineno-10-5"></a>    handle_execbuf_event()
<a id="__codelineno-10-6" name="__codelineno-10-6" href="#__codelineno-10-6"></a>        ├─→ shader = acquire_or_create_shader(gpu_addr)
<a id="__codelineno-10-7" name="__codelineno-10-7" href="#__codelineno-10-7"></a>        ├─→ shader-&gt;pid = execbuf-&gt;pid
<a id="__codelineno-10-8" name="__codelineno-10-8" href="#__codelineno-10-8"></a>        ├─→ shader-&gt;ustack_id = store_stack(execbuf-&gt;ustack)
<a id="__codelineno-10-9" name="__codelineno-10-9" href="#__codelineno-10-9"></a>        └─→ release_shader(shader)
<a id="__codelineno-10-10" name="__codelineno-10-10" href="#__codelineno-10-10"></a>    handle_ksp_event()
<a id="__codelineno-10-11" name="__codelineno-10-11" href="#__codelineno-10-11"></a>        ├─→ shader = acquire_shader(ksp-&gt;gpu_addr)
<a id="__codelineno-10-12" name="__codelineno-10-12" href="#__codelineno-10-12"></a>        ├─→ shader-&gt;type = SHADER_TYPE_SHADER
<a id="__codelineno-10-13" name="__codelineno-10-13" href="#__codelineno-10-13"></a>        └─→ release_shader(shader)
<a id="__codelineno-10-14" name="__codelineno-10-14" href="#__codelineno-10-14"></a>}
</code></pre></div></p>
<p><strong>EU Stall Thread</strong>:
<div class="highlight"><pre><span></span><code><a id="__codelineno-11-1" name="__codelineno-11-1" href="#__codelineno-11-1"></a>while (!should_stop) {
<a id="__codelineno-11-2" name="__codelineno-11-2" href="#__codelineno-11-2"></a>    debug_read_eustall_sample(&amp;sample)  // Block until sample
<a id="__codelineno-11-3" name="__codelineno-11-3" href="#__codelineno-11-3"></a>    handle_eustall_sample(&amp;sample)
<a id="__codelineno-11-4" name="__codelineno-11-4" href="#__codelineno-11-4"></a>        ├─→ addr = sample.ip &lt;&lt; 3
<a id="__codelineno-11-5" name="__codelineno-11-5" href="#__codelineno-11-5"></a>        ├─→ shader = acquire_containing_shader(addr)
<a id="__codelineno-11-6" name="__codelineno-11-6" href="#__codelineno-11-6"></a>        ├─→ if shader:
<a id="__codelineno-11-7" name="__codelineno-11-7" href="#__codelineno-11-7"></a>        │   ├─→ offset = addr - shader-&gt;gpu_addr
<a id="__codelineno-11-8" name="__codelineno-11-8" href="#__codelineno-11-8"></a>        │   ├─→ profile = shader-&gt;stall_counts[offset]
<a id="__codelineno-11-9" name="__codelineno-11-9" href="#__codelineno-11-9"></a>        │   ├─→ profile-&gt;active += sample.active
<a id="__codelineno-11-10" name="__codelineno-11-10" href="#__codelineno-11-10"></a>        │   └─→ ... (other stall types)
<a id="__codelineno-11-11" name="__codelineno-11-11" href="#__codelineno-11-11"></a>        └─→ else:
<a id="__codelineno-11-12" name="__codelineno-11-12" href="#__codelineno-11-12"></a>            └─→ add to deferred_eustall_waitlist
<a id="__codelineno-11-13" name="__codelineno-11-13" href="#__codelineno-11-13"></a>}
</code></pre></div></p>
<p><strong>Debug Thread</strong>:
<div class="highlight"><pre><span></span><code><a id="__codelineno-12-1" name="__codelineno-12-1" href="#__codelineno-12-1"></a>while (!should_stop) {
<a id="__codelineno-12-2" name="__codelineno-12-2" href="#__codelineno-12-2"></a>    debug_wait_event(&amp;event)  // Block until event
<a id="__codelineno-12-3" name="__codelineno-12-3" href="#__codelineno-12-3"></a>    switch (event.type) {
<a id="__codelineno-12-4" name="__codelineno-12-4" href="#__codelineno-12-4"></a>    case SHADER_UPLOAD:
<a id="__codelineno-12-5" name="__codelineno-12-5" href="#__codelineno-12-5"></a>        shader = acquire_shader(event.addr)
<a id="__codelineno-12-6" name="__codelineno-12-6" href="#__codelineno-12-6"></a>        shader-&gt;binary = malloc(event.size)
<a id="__codelineno-12-7" name="__codelineno-12-7" href="#__codelineno-12-7"></a>        memcpy(shader-&gt;binary, event.data, event.size)
<a id="__codelineno-12-8" name="__codelineno-12-8" href="#__codelineno-12-8"></a>        release_shader(shader)
<a id="__codelineno-12-9" name="__codelineno-12-9" href="#__codelineno-12-9"></a>        signal_deferred_attrib_thread()  // Wake deferred thread
<a id="__codelineno-12-10" name="__codelineno-12-10" href="#__codelineno-12-10"></a>        break;
<a id="__codelineno-12-11" name="__codelineno-12-11" href="#__codelineno-12-11"></a>    case CONTEXT_CREATE:
<a id="__codelineno-12-12" name="__codelineno-12-12" href="#__codelineno-12-12"></a>        track_context_vm_mapping(event)
<a id="__codelineno-12-13" name="__codelineno-12-13" href="#__codelineno-12-13"></a>        break;
<a id="__codelineno-12-14" name="__codelineno-12-14" href="#__codelineno-12-14"></a>    }
<a id="__codelineno-12-15" name="__codelineno-12-15" href="#__codelineno-12-15"></a>}
</code></pre></div></p>
<p><strong>Deferred Attribution Thread</strong>:
<div class="highlight"><pre><span></span><code><a id="__codelineno-13-1" name="__codelineno-13-1" href="#__codelineno-13-1"></a>while (!should_stop) {
<a id="__codelineno-13-2" name="__codelineno-13-2" href="#__codelineno-13-2"></a>    pthread_cond_wait(&amp;deferred_cond)  // Wait for signal
<a id="__codelineno-13-3" name="__codelineno-13-3" href="#__codelineno-13-3"></a>    for each deferred_sample in waitlist:
<a id="__codelineno-13-4" name="__codelineno-13-4" href="#__codelineno-13-4"></a>        shader = acquire_containing_shader(deferred_sample.addr)
<a id="__codelineno-13-5" name="__codelineno-13-5" href="#__codelineno-13-5"></a>        if shader:
<a id="__codelineno-13-6" name="__codelineno-13-6" href="#__codelineno-13-6"></a>            associate_sample(&amp;deferred_sample, shader)
<a id="__codelineno-13-7" name="__codelineno-13-7" href="#__codelineno-13-7"></a>            deferred_sample.satisfied = 1
<a id="__codelineno-13-8" name="__codelineno-13-8" href="#__codelineno-13-8"></a>        release_shader(shader)
<a id="__codelineno-13-9" name="__codelineno-13-9" href="#__codelineno-13-9"></a>    remove satisfied samples from waitlist
<a id="__codelineno-13-10" name="__codelineno-13-10" href="#__codelineno-13-10"></a>}
</code></pre></div></p>
<h3 id="shutdown-and-output">Shutdown and Output</h3>
<p>When profiling ends (either because a profiled command exits or the user presses Ctrl-C), iaprof performs an orderly shutdown. This involves stopping all collector threads, processing any remaining deferred samples, walking through the entire shader store to generate output, and cleaning up resources.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-14-1" name="__codelineno-14-1" href="#__codelineno-14-1"></a>SIGINT received
<a id="__codelineno-14-2" name="__codelineno-14-2" href="#__codelineno-14-2"></a>    ↓
<a id="__codelineno-14-3" name="__codelineno-14-3" href="#__codelineno-14-3"></a>collect_threads_should_stop = STOP_REQUESTED
<a id="__codelineno-14-4" name="__codelineno-14-4" href="#__codelineno-14-4"></a>    ↓
<a id="__codelineno-14-5" name="__codelineno-14-5" href="#__codelineno-14-5"></a>Join all collector threads
<a id="__codelineno-14-6" name="__codelineno-14-6" href="#__codelineno-14-6"></a>    ↓
<a id="__codelineno-14-7" name="__codelineno-14-7" href="#__codelineno-14-7"></a>Process remaining deferred samples (final retry)
<a id="__codelineno-14-8" name="__codelineno-14-8" href="#__codelineno-14-8"></a>    ↓
<a id="__codelineno-14-9" name="__codelineno-14-9" href="#__codelineno-14-9"></a>FOR_SHADER (shader in shaders tree):
<a id="__codelineno-14-10" name="__codelineno-14-10" href="#__codelineno-14-10"></a>    pthread_rwlock_rdlock(&amp;shaders_lock)
<a id="__codelineno-14-11" name="__codelineno-14-11" href="#__codelineno-14-11"></a>    for each (offset, stall_profile) in shader-&gt;stall_counts:
<a id="__codelineno-14-12" name="__codelineno-14-12" href="#__codelineno-14-12"></a>        cpu_stack_str = resolve_stack(shader-&gt;ustack_id, shader-&gt;pid)
<a id="__codelineno-14-13" name="__codelineno-14-13" href="#__codelineno-14-13"></a>        kernel_name = get_kernel_name(shader)
<a id="__codelineno-14-14" name="__codelineno-14-14" href="#__codelineno-14-14"></a>        inst_str = disassemble(shader-&gt;binary, offset)
<a id="__codelineno-14-15" name="__codelineno-14-15" href="#__codelineno-14-15"></a>        stalls_str = format_stalls(stall_profile)
<a id="__codelineno-14-16" name="__codelineno-14-16" href="#__codelineno-14-16"></a>        printf(&quot;%s;%s;%s %s\n&quot;, cpu_stack_str, kernel_name, inst_str, stalls_str)
<a id="__codelineno-14-17" name="__codelineno-14-17" href="#__codelineno-14-17"></a>    pthread_rwlock_unlock(&amp;shaders_lock)
<a id="__codelineno-14-18" name="__codelineno-14-18" href="#__codelineno-14-18"></a>    ↓
<a id="__codelineno-14-19" name="__codelineno-14-19" href="#__codelineno-14-19"></a>Cleanup:
<a id="__codelineno-14-20" name="__codelineno-14-20" href="#__codelineno-14-20"></a>    deinit_bpf()
<a id="__codelineno-14-21" name="__codelineno-14-21" href="#__codelineno-14-21"></a>    deinit_debug()
<a id="__codelineno-14-22" name="__codelineno-14-22" href="#__codelineno-14-22"></a>    deinit_eustall()
<a id="__codelineno-14-23" name="__codelineno-14-23" href="#__codelineno-14-23"></a>    free_profiles()
<a id="__codelineno-14-24" name="__codelineno-14-24" href="#__codelineno-14-24"></a>    ↓
<a id="__codelineno-14-25" name="__codelineno-14-25" href="#__codelineno-14-25"></a>Exit
</code></pre></div>
<h2 id="key-design-decisions">Key Design Decisions</h2>
<p>Throughout iaprof's development, the team made several critical architectural choices that fundamentally shaped how the tool works. Understanding these decisions provides insight into the trade-offs involved in building a production-quality GPU profiler.</p>
<h3 id="1-why-ebpf">1. Why eBPF?</h3>
<p>The decision to use eBPF for kernel-level tracing was fundamental to iaprof's design. Traditional approaches would require either a custom kernel module (difficult to maintain across kernel versions) or heavy instrumentation of the application (defeats the goal of transparent profiling). eBPF provides a middle ground that's both powerful and safe.</p>
<p>eBPF brings significant advantages: no kernel module is required, eliminating complex build and distribution issues; programs are verified by the kernel before loading, ensuring safety and preventing crashes; JIT compilation provides high performance approaching native code; and the comprehensive tracing capabilities allow hooking virtually any kernel function. However, there are trade-offs. The eBPF verifier imposes complexity constraints including instruction count limits and requirements for bounded loops, making sophisticated parsing logic challenging to implement. The system requires BTF (BPF Type Format) type information to be available in the kernel, and needs a relatively recent kernel version (5.8 or later) for the CO-RE (Compile Once, Run Everywhere) features that iaprof relies on.</p>
<h3 id="2-why-in-kernel-batch-buffer-parsing">2. Why In-Kernel Batch Buffer Parsing?</h3>
<p>One of the most complex parts of iaprof is the batch buffer parser that runs inside the kernel via eBPF. An alternative would be to copy batch buffers to userspace and parse them there, which would be simpler to implement and debug. However, the team chose in-kernel parsing for important practical reasons.</p>
<p><strong>Alternative</strong>: Parse in userspace after capturing buffer</p>
<p><strong>Chosen</strong>: Parse in kernel with eBPF</p>
<p><strong>Rationale</strong>:</p>
<p>Copying batch buffers to userspace would be expensive since these buffers can be megabytes in size, adding significant overhead to every GPU submission. More critically, the parsing needs to happen before the buffer is reused or unmapped by the driver, which could happen immediately after submission. The deferred parsing mechanism handles the case where buffers aren't yet complete when first intercepted, retrying later when the data is ready.</p>
<p><strong>Trade-off</strong>: Higher kernel overhead, but more reliable</p>
<h3 id="3-why-deferred-attribution">3. Why Deferred Attribution?</h3>
<p><strong>Problem</strong>: EU stall samples can arrive before shader metadata</p>
<p><strong>Solution</strong>: Waitlist with retry mechanism</p>
<p><strong>Triggered by</strong>:
- New shader arrival (debug collector signals)
- Periodic retry (every N seconds)
- Final cleanup (at shutdown)</p>
<h3 id="4-why-two-level-locking">4. Why Two-Level Locking?</h3>
<p><strong>Alternative</strong>: Global lock for entire shader tree</p>
<p><strong>Chosen</strong>: RW-lock on tree + per-shader mutex</p>
<p><strong>Benefits</strong>:</p>
<p>The two-level locking approach enables multiple readers to traverse the shader tree concurrently without blocking each other, which is crucial for lookup-heavy workloads. Stall attribution can proceed on one shader while other collectors work on different shaders, preventing bottlenecks. This fine-grained locking strategy significantly reduces contention compared to a global lock, allowing the profiler to scale efficiently with the number of shaders and collection threads.</p>
<h3 id="5-why-folded-stack-format">5. Why Folded Stack Format?</h3>
<p><strong>Alternative</strong>: Custom binary format, JSON, protobuf</p>
<p><strong>Chosen</strong>: Text-based folded stacks</p>
<p><strong>Rationale</strong>:</p>
<p>The text-based folded stack format provides multiple advantages over binary alternatives. It's compatible with Brendan Gregg's existing FlameGraph ecosystem, allowing iaprof to leverage mature, well-tested visualization tools. The human-readable format makes debugging and validation straightforward - you can simply look at the output to verify correctness. Standard Unix tools like grep, sed, and awk can easily filter and transform the data for custom analyses. Despite being text-based, the format is remarkably compact due to its deduplication strategy where identical stack prefixes are represented once with semicolon-separated paths.</p>
<h2 id="performance-characteristics">Performance Characteristics</h2>
<h3 id="overhead">Overhead</h3>
<p><strong>i915 Driver</strong>:
- <strong>BPF Collection</strong>: 10-20% (batch buffer parsing expensive)
- <strong>EU Stall</strong>: 2-5% (hardware sampling + attribution)
- <strong>Debug</strong>: 1-3% (event-driven)
- <strong>Total</strong>: 15-30% (workload-dependent)</p>
<p><strong>Xe Driver</strong>:
- <strong>BPF Collection</strong>: 3-5% (simpler batch buffer handling)
- <strong>EU Stall</strong>: 2-5%
- <strong>Debug</strong>: 1-3%
- <strong>Total</strong>: 5-10% (generally lower)</p>
<h3 id="scalability">Scalability</h3>
<p><strong>Number of Shaders</strong>: O(log n) lookup, O(n) iteration</p>
<p><strong>Number of EU Stall Samples</strong>: O(1) attribution (hash table)</p>
<p><strong>Stack Depth</strong>: Linear in depth (but capped at 512)</p>
<p><strong>Multi-GPU</strong>: Currently limited to first GPU found</p>
<h3 id="memory-usage">Memory Usage</h3>
<p><strong>Typical</strong>:
- Shader store: 100-500 MB (depends on number/size of shaders)
- eBPF ringbuffer: 512 MB (fixed)
- Symbol caches: 50-200 MB (per-PID symbol tables)
- <strong>Total</strong>: 1-2 GB</p>
<h2 id="platform-support">Platform Support</h2>
<h3 id="supported-hardware">Supported Hardware</h3>
<table>
<thead>
<tr>
<th>Platform</th>
<th>Architecture</th>
<th>Driver</th>
<th>Status</th>
</tr>
</thead>
<tbody>
<tr>
<td>Ponte Vecchio (PVC)</td>
<td>Xe HPC</td>
<td>i915 (patched)</td>
<td>Fully supported</td>
</tr>
<tr>
<td>Battlemage (BMG)</td>
<td>Xe2</td>
<td>Xe</td>
<td>Fully supported</td>
</tr>
<tr>
<td>Lunar Lake</td>
<td>Xe2</td>
<td>Xe</td>
<td>Supported (iGPU)</td>
</tr>
<tr>
<td>Meteor Lake</td>
<td>Xe</td>
<td>Xe</td>
<td>Partial support</td>
</tr>
<tr>
<td>Older Gen9-Gen12</td>
<td>Various</td>
<td>i915</td>
<td>Limited support</td>
</tr>
</tbody>
</table>
<h3 id="kernel-requirements">Kernel Requirements</h3>
<ul>
<li><strong>Linux 5.8+</strong>: eBPF CO-RE support</li>
<li><strong>BTF</strong>: <code>/sys/kernel/btf/vmlinux</code> must exist</li>
<li><strong>i915 debug</strong>: Requires Intel backport kernel with <code>PRELIM_DRM_I915_DEBUG</code> patches</li>
<li><strong>Xe debug</strong>: Mainline support in Linux 6.2+, full support in 6.6+</li>
</ul>
<h2 id="future-enhancements">Future Enhancements</h2>
<h3 id="planned-features">Planned Features</h3>
<ol>
<li><strong>Multi-GPU Profiling</strong>: Profile multiple GPUs simultaneously</li>
<li><strong>JSON Output</strong>: Structured output for analysis tools</li>
<li><strong>Differential Profiling</strong>: Compare two profile runs</li>
<li><strong>Continuous Profiling</strong>: Lower overhead, always-on mode</li>
<li><strong>TUI</strong>: Terminal UI for live profiling</li>
<li><strong>Remote Profiling</strong>: Profile remote systems</li>
<li><strong>Container Support</strong>: Profile containerized GPU workloads</li>
</ol>
<h3 id="research-directions">Research Directions</h3>
<ol>
<li><strong>ML-Based Bottleneck Detection</strong>: Automatically identify performance issues</li>
<li><strong>Predictive Profiling</strong>: Suggest optimizations based on patterns</li>
<li><strong>Cross-Platform Support</strong>: NVIDIA, AMD GPU support</li>
<li><strong>Distributed Profiling</strong>: Multi-node GPU cluster profiling</li>
</ol>
<h2 id="references">References</h2>
<h3 id="external-resources">External Resources</h3>
<ul>
<li><a href="https://www.brendangregg.com/flamegraphs.html">FlameGraph</a> - Original flame graph concept</li>
<li><a href="https://www.brendangregg.com/blog/2024-10-29/ai-flame-graphs.html">AI Flame Graphs</a> - iaprof announcement blog</li>
<li><a href="https://ebpf.io/">eBPF Documentation</a> - eBPF programming guide</li>
<li><a href="https://www.intel.com/content/www/us/en/developer/articles/technical/overview-of-the-compute-architecture-of-intel-processor-graphics-gen11.html">Intel GPU Architecture</a> - Gen11 architecture (similar to PVC/Xe)</li>
</ul>
<h3 id="internal-documentation">Internal Documentation</h3>
<ul>
<li><a href="src/README.md"><code>src/README.md</code></a> - Source code overview</li>
<li><a href="src/collectors/bpf/README.md"><code>src/collectors/bpf/README.md</code></a> - BPF collector details</li>
<li><a href="src/stores/README.md"><code>src/stores/README.md</code></a> - GPU kernel store internals</li>
<li><a href="docs/README.pvc.md"><code>docs/README.pvc.md</code></a> - PVC-specific setup (if exists)</li>
<li><a href="docs/README.bmg.md"><code>docs/README.bmg.md</code></a> - Battlemage-specific setup (if exists)</li>
</ul>
<h2 id="flame-graph-generation-pipeline">Flame Graph Generation Pipeline</h2>
<p>The transformation from raw profiling data to interactive flame graphs involves multiple stages, each adding value and enabling different analyses. Understanding this pipeline helps explain why iaprof uses its particular data formats and how the tool chains together.</p>
<h3 id="stage-1-data-collection-record-command">Stage 1: Data Collection (record command)</h3>
<p>The <code>iaprof record</code> command captures raw profiling data and outputs it in a structured text format. This intermediate format serves as a language between iaprof's internal representation and the flame graph visualization tools.</p>
<p><strong>Input</strong>: GPU execution + hardware sampling
<strong>Output</strong>: Intermediate profile format (structured text)
<strong>Location</strong>: <code>src/commands/record.c</code>, collectors</p>
<h4 id="collected-data-per-sample">Collected Data Per Sample</h4>
<p>For each EU stall sample, the record command collects:</p>
<p><strong>Process Context</strong>:</p>
<ul>
<li>PID, TID, CPU, timestamp</li>
<li>Process name (16 chars)</li>
</ul>
<p><strong>CPU Execution Context</strong>:</p>
<ul>
<li>User-space stack (up to 512 frames)</li>
<li>Kernel stack (up to 512 frames)</li>
</ul>
<p><strong>GPU Execution Context</strong>:</p>
<ul>
<li>GPU instruction pointer (IP)</li>
<li>Shader GPU address</li>
<li>Shader binary (from debug collector)</li>
</ul>
<p><strong>Performance Metrics</strong>:</p>
<ul>
<li>EU stall type breakdown (active, control, send, sync, etc.)</li>
<li>Sample counts per stall type</li>
</ul>
<h4 id="output-format">Output Format</h4>
<p>The record command outputs a custom structured format:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-15-1" name="__codelineno-15-1" href="#__codelineno-15-1"></a>STRING;&lt;id&gt;;&lt;string_value&gt;
<a id="__codelineno-15-2" name="__codelineno-15-2" href="#__codelineno-15-2"></a>PROC_NAME;&lt;proc_name_id&gt;;&lt;pid&gt;
<a id="__codelineno-15-3" name="__codelineno-15-3" href="#__codelineno-15-3"></a>USTACK;&lt;ustack_id&gt;;&lt;frame1&gt;;&lt;frame2&gt;;...
<a id="__codelineno-15-4" name="__codelineno-15-4" href="#__codelineno-15-4"></a>KSTACK;&lt;kstack_id&gt;;&lt;frame1&gt;;&lt;frame2&gt;;...
<a id="__codelineno-15-5" name="__codelineno-15-5" href="#__codelineno-15-5"></a>GPU_FILE;&lt;gpu_file_id&gt;;&lt;filename&gt;
<a id="__codelineno-15-6" name="__codelineno-15-6" href="#__codelineno-15-6"></a>GPU_SYMBOL;&lt;gpu_symbol_id&gt;;&lt;symbol_name&gt;
<a id="__codelineno-15-7" name="__codelineno-15-7" href="#__codelineno-15-7"></a>INSN_TEXT;&lt;insn_text_id&gt;;&lt;instruction_text&gt;
<a id="__codelineno-15-8" name="__codelineno-15-8" href="#__codelineno-15-8"></a>EUSTALL;&lt;proc_name_id&gt;;&lt;pid&gt;;&lt;ustack_id&gt;;&lt;kstack_id&gt;;&lt;gpu_file_id&gt;;&lt;gpu_symbol_id&gt;;&lt;insn_text_id&gt;;&lt;stall_type_id&gt;;&lt;offset&gt;;&lt;count&gt;
</code></pre></div>
<p><strong>Key Features</strong>:</p>
<p>The format incorporates several optimizations to reduce file size and improve processing efficiency. String interning ensures that repeated strings (like library names or function names) are stored only once, with subsequent references using compact numeric IDs. Stack deduplication means identical call stacks are assigned the same ID and only serialized once, dramatically reducing output size for workloads with repetitive execution patterns. The structured event system uses different event types (STRING for string definitions, EUSTALL for stall samples, etc.) to clearly delineate different kinds of profiling data.</p>
<p><strong>Example</strong>:
<div class="highlight"><pre><span></span><code><a id="__codelineno-16-1" name="__codelineno-16-1" href="#__codelineno-16-1"></a>STRING;1;python3.11
<a id="__codelineno-16-2" name="__codelineno-16-2" href="#__codelineno-16-2"></a>STRING;2;libpython3.11.so.1.0
<a id="__codelineno-16-3" name="__codelineno-16-3" href="#__codelineno-16-3"></a>STRING;3;PyEval_EvalFrameDefault
<a id="__codelineno-16-4" name="__codelineno-16-4" href="#__codelineno-16-4"></a>STRING;4;libze_loader.so.1
<a id="__codelineno-16-5" name="__codelineno-16-5" href="#__codelineno-16-5"></a>STRING;5;zeCommandListAppendLaunchKernel
<a id="__codelineno-16-6" name="__codelineno-16-6" href="#__codelineno-16-6"></a>PROC_NAME;1;12345
<a id="__codelineno-16-7" name="__codelineno-16-7" href="#__codelineno-16-7"></a>USTACK;100;0x7f8000001234;0x7f8000005678;0x7f800000abcd
<a id="__codelineno-16-8" name="__codelineno-16-8" href="#__codelineno-16-8"></a>KSTACK;200;0xffffffffc0123456;0xffffffffc0234567
<a id="__codelineno-16-9" name="__codelineno-16-9" href="#__codelineno-16-9"></a>GPU_FILE;10;my_kernel.cpp
<a id="__codelineno-16-10" name="__codelineno-16-10" href="#__codelineno-16-10"></a>GPU_SYMBOL;11;my_compute_kernel
<a id="__codelineno-16-11" name="__codelineno-16-11" href="#__codelineno-16-11"></a>INSN_TEXT;20;mad(8) r10.0&lt;1&gt;:f r2.0:f r3.0:f r4.0:f
<a id="__codelineno-16-12" name="__codelineno-16-12" href="#__codelineno-16-12"></a>EUSTALL;1;12345;100;200;10;11;20;1;0x40;1234
</code></pre></div></p>
<p>This represents:
- Process: python3.11 (PID 12345)
- User stack: 3 frames (resolved later)
- Kernel stack: 2 frames (resolved later)
- GPU kernel: my_compute_kernel in my_kernel.cpp
- Instruction: <code>mad(8) ...</code> at offset 0x40
- Stall count: 1234 samples</p>
<h3 id="stage-2-intermediate-processing-flame-command">Stage 2: Intermediate Processing (flame command)</h3>
<p><strong>Input</strong>: Record output (structured text)
<strong>Output</strong>: Folded stacks (semicolon-separated)
<strong>Location</strong>: <code>src/commands/flame.c</code></p>
<h4 id="processing-steps">Processing Steps</h4>
<p><strong>Parse Structured Input</strong>:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-17-1" name="__codelineno-17-1" href="#__codelineno-17-1"></a><span class="k">while</span><span class="w"> </span><span class="p">(</span><span class="n">getline</span><span class="p">(</span><span class="o">&amp;</span><span class="n">line</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">size</span><span class="p">,</span><span class="w"> </span><span class="n">stdin</span><span class="p">))</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-17-2" name="__codelineno-17-2" href="#__codelineno-17-2"></a><span class="w">    </span><span class="n">event</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">get_profile_event_func</span><span class="p">(</span><span class="n">line</span><span class="p">);</span>
<a id="__codelineno-17-3" name="__codelineno-17-3" href="#__codelineno-17-3"></a><span class="w">    </span><span class="k">switch</span><span class="w"> </span><span class="p">(</span><span class="n">event</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-17-4" name="__codelineno-17-4" href="#__codelineno-17-4"></a><span class="w">    </span><span class="k">case</span><span class="w"> </span><span class="no">PROFILE_EVENT_STRING</span><span class="p">:</span>
<a id="__codelineno-17-5" name="__codelineno-17-5" href="#__codelineno-17-5"></a><span class="w">        </span><span class="n">store_string</span><span class="p">(</span><span class="n">id</span><span class="p">,</span><span class="w"> </span><span class="n">value</span><span class="p">);</span>
<a id="__codelineno-17-6" name="__codelineno-17-6" href="#__codelineno-17-6"></a><span class="w">        </span><span class="k">break</span><span class="p">;</span>
<a id="__codelineno-17-7" name="__codelineno-17-7" href="#__codelineno-17-7"></a><span class="w">    </span><span class="k">case</span><span class="w"> </span><span class="no">PROFILE_EVENT_EUSTALL</span><span class="p">:</span>
<a id="__codelineno-17-8" name="__codelineno-17-8" href="#__codelineno-17-8"></a><span class="w">        </span><span class="n">parse_eustall</span><span class="p">(</span><span class="o">&amp;</span><span class="n">result</span><span class="p">);</span>
<a id="__codelineno-17-9" name="__codelineno-17-9" href="#__codelineno-17-9"></a><span class="w">        </span><span class="n">aggregate_sample</span><span class="p">(</span><span class="n">result</span><span class="p">);</span>
<a id="__codelineno-17-10" name="__codelineno-17-10" href="#__codelineno-17-10"></a><span class="w">        </span><span class="k">break</span><span class="p">;</span>
<a id="__codelineno-17-11" name="__codelineno-17-11" href="#__codelineno-17-11"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-17-12" name="__codelineno-17-12" href="#__codelineno-17-12"></a><span class="p">}</span>
</code></pre></div>
<p><strong>Aggregate Samples</strong>:</p>
<p>The flame command uses a hash table to deduplicate identical stack traces, combining their sample counts. The hash key consists of the complete stack fingerprint: process name, PID, user stack ID, kernel stack ID, GPU file, GPU symbol, instruction text, stall type, and instruction offset. The value is simply the accumulated count of how many times this exact stack was observed. This aggregation is crucial for reducing the data volume - a workload might generate millions of samples, but if they come from a few hot paths, they'll collapse down to just a few unique stacks with large counts.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-18-1" name="__codelineno-18-1" href="#__codelineno-18-1"></a><span class="n">hash_table</span><span class="p">(</span><span class="n">eustall_result</span><span class="p">,</span><span class="w"> </span><span class="kt">uint64_t</span><span class="p">)</span><span class="w"> </span><span class="n">flame_counts</span><span class="p">;</span>
<a id="__codelineno-18-2" name="__codelineno-18-2" href="#__codelineno-18-2"></a>
<a id="__codelineno-18-3" name="__codelineno-18-3" href="#__codelineno-18-3"></a><span class="n">lookup</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">hash_table_get_val</span><span class="p">(</span><span class="n">flame_counts</span><span class="p">,</span><span class="w"> </span><span class="n">result</span><span class="p">);</span>
<a id="__codelineno-18-4" name="__codelineno-18-4" href="#__codelineno-18-4"></a><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">lookup</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-18-5" name="__codelineno-18-5" href="#__codelineno-18-5"></a><span class="w">    </span><span class="o">*</span><span class="n">lookup</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span><span class="n">result</span><span class="p">.</span><span class="n">samp_count</span><span class="p">;</span>
<a id="__codelineno-18-6" name="__codelineno-18-6" href="#__codelineno-18-6"></a><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-18-7" name="__codelineno-18-7" href="#__codelineno-18-7"></a><span class="w">    </span><span class="n">hash_table_insert</span><span class="p">(</span><span class="n">flame_counts</span><span class="p">,</span><span class="w"> </span><span class="n">result</span><span class="p">,</span><span class="w"> </span><span class="n">result</span><span class="p">.</span><span class="n">samp_count</span><span class="p">);</span>
<a id="__codelineno-18-8" name="__codelineno-18-8" href="#__codelineno-18-8"></a><span class="p">}</span>
</code></pre></div>
<p><strong>Resolve String IDs</strong>:</p>
<p>Before outputting the final folded stacks, all numeric string IDs must be converted back to their actual string values. The flame command maintains a string table built from the STRING events encountered earlier in the input stream, allowing efficient lookup of any string by its ID.</p>
<p><strong>Format Folded Stacks</strong>:
   <div class="highlight"><pre><span></span><code><a id="__codelineno-19-1" name="__codelineno-19-1" href="#__codelineno-19-1"></a><span class="k">const</span><span class="w"> </span><span class="kt">char</span><span class="w"> </span><span class="o">*</span><span class="n">flame_fmt</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;%s;%u;%s%s-;%s_[G];%s_[G];%s_[g];%s_[g];0x%lx_[g]&quot;</span><span class="p">;</span>
<a id="__codelineno-19-2" name="__codelineno-19-2" href="#__codelineno-19-2"></a>
<a id="__codelineno-19-3" name="__codelineno-19-3" href="#__codelineno-19-3"></a><span class="n">printf</span><span class="p">(</span><span class="n">flame_fmt</span><span class="p">,</span>
<a id="__codelineno-19-4" name="__codelineno-19-4" href="#__codelineno-19-4"></a><span class="w">    </span><span class="n">proc_name</span><span class="p">,</span><span class="w">        </span><span class="c1">// Process name</span>
<a id="__codelineno-19-5" name="__codelineno-19-5" href="#__codelineno-19-5"></a><span class="w">    </span><span class="n">pid</span><span class="p">,</span><span class="w">              </span><span class="c1">// Process ID</span>
<a id="__codelineno-19-6" name="__codelineno-19-6" href="#__codelineno-19-6"></a><span class="w">    </span><span class="n">ustack</span><span class="p">,</span><span class="w">           </span><span class="c1">// User stack (semicolon-separated)</span>
<a id="__codelineno-19-7" name="__codelineno-19-7" href="#__codelineno-19-7"></a><span class="w">    </span><span class="n">kstack</span><span class="p">,</span><span class="w">           </span><span class="c1">// Kernel stack (semicolon-separated)</span>
<a id="__codelineno-19-8" name="__codelineno-19-8" href="#__codelineno-19-8"></a><span class="w">    </span><span class="n">gpu_file</span><span class="p">,</span><span class="w">         </span><span class="c1">// GPU source file</span>
<a id="__codelineno-19-9" name="__codelineno-19-9" href="#__codelineno-19-9"></a><span class="w">    </span><span class="n">gpu_symbol</span><span class="p">,</span><span class="w">       </span><span class="c1">// GPU kernel name</span>
<a id="__codelineno-19-10" name="__codelineno-19-10" href="#__codelineno-19-10"></a><span class="w">    </span><span class="n">insn_text</span><span class="p">,</span><span class="w">        </span><span class="c1">// GPU instruction</span>
<a id="__codelineno-19-11" name="__codelineno-19-11" href="#__codelineno-19-11"></a><span class="w">    </span><span class="n">stall_type</span><span class="p">,</span><span class="w">       </span><span class="c1">// Stall type</span>
<a id="__codelineno-19-12" name="__codelineno-19-12" href="#__codelineno-19-12"></a><span class="w">    </span><span class="n">offset</span><span class="p">);</span><span class="w">          </span><span class="c1">// Instruction offset</span>
<a id="__codelineno-19-13" name="__codelineno-19-13" href="#__codelineno-19-13"></a><span class="n">printf</span><span class="p">(</span><span class="s">&quot;;%lu</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">count</span><span class="p">);</span><span class="w">  </span><span class="c1">// Sample count</span>
</code></pre></div></p>
<h4 id="folded-stack-format">Folded Stack Format</h4>
<p>Format: <code>frame1;frame2;...;frameN count</code></p>
<p><strong>Annotations</strong> (for coloring):
- <code>_[G]</code>: GPU frame (uppercase G) - Major GPU components
- <code>_[g]</code>: GPU instruction frame (lowercase g) - Individual instructions
- <code>-</code>: Stack separator (between user and kernel)</p>
<p><strong>Example Output</strong>:
<div class="highlight"><pre><span></span><code><a id="__codelineno-20-1" name="__codelineno-20-1" href="#__codelineno-20-1"></a>python3.11;12345;PyEval_EvalFrameDefault;zeCommandListAppendLaunchKernel-;i915_gem_do_execbuffer_[G];my_kernel.cpp_[G];my_compute_kernel_[G];mad(8)_[g];active_[g];0x40_[g];1234
</code></pre></div></p>
<p>Breaking down this stack (bottom to top):</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-21-1" name="__codelineno-21-1" href="#__codelineno-21-1"></a>1. python3.11 - Process name
<a id="__codelineno-21-2" name="__codelineno-21-2" href="#__codelineno-21-2"></a>2. 12345 - PID
<a id="__codelineno-21-3" name="__codelineno-21-3" href="#__codelineno-21-3"></a>3. PyEval_EvalFrameDefault - Python interpreter frame
<a id="__codelineno-21-4" name="__codelineno-21-4" href="#__codelineno-21-4"></a>4. zeCommandListAppendLaunchKernel - Level Zero API call
<a id="__codelineno-21-5" name="__codelineno-21-5" href="#__codelineno-21-5"></a>5. - (dash) - User/kernel separator
<a id="__codelineno-21-6" name="__codelineno-21-6" href="#__codelineno-21-6"></a>6. i915_gem_do_execbuffer - Kernel driver function
<a id="__codelineno-21-7" name="__codelineno-21-7" href="#__codelineno-21-7"></a>7. my_kernel.cpp - GPU source file
<a id="__codelineno-21-8" name="__codelineno-21-8" href="#__codelineno-21-8"></a>8. my_compute_kernel - GPU kernel function
<a id="__codelineno-21-9" name="__codelineno-21-9" href="#__codelineno-21-9"></a>9. mad(8) - GPU instruction (multiply-add, 8-wide SIMD)
<a id="__codelineno-21-10" name="__codelineno-21-10" href="#__codelineno-21-10"></a>10. active - Stall type
<a id="__codelineno-21-11" name="__codelineno-21-11" href="#__codelineno-21-11"></a>11. 0x40 - Instruction offset
<a id="__codelineno-21-12" name="__codelineno-21-12" href="#__codelineno-21-12"></a>12. Count: 1234 samples
</code></pre></div>
<h3 id="stage-3-flame-graph-rendering-flamegraphpl">Stage 3: Flame Graph Rendering (flamegraph.pl)</h3>
<p><strong>Input</strong>: Folded stacks
<strong>Output</strong>: Interactive SVG
<strong>Location</strong>: <code>deps/flamegraph/flamegraph.pl</code></p>
<p>This is Brendan Gregg's FlameGraph toolkit, invoked as:
<div class="highlight"><pre><span></span><code><a id="__codelineno-22-1" name="__codelineno-22-1" href="#__codelineno-22-1"></a>flamegraph.pl<span class="w"> </span>--colors<span class="o">=</span>gpu<span class="w"> </span>--title<span class="o">=</span><span class="s2">&quot;AI Flame Graph&quot;</span><span class="w"> </span>&lt;<span class="w"> </span>folded_stacks.txt<span class="w"> </span>&gt;<span class="w"> </span>flame.svg
</code></pre></div></p>
<h4 id="rendering-process">Rendering Process</h4>
<p><strong>Parse Folded Stacks</strong>:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-23-1" name="__codelineno-23-1" href="#__codelineno-23-1"></a><span class="k">while</span><span class="w"> </span><span class="p">(</span><span class="sr">&lt;STDIN&gt;</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-23-2" name="__codelineno-23-2" href="#__codelineno-23-2"></a><span class="w">    </span><span class="nb">chomp</span><span class="p">;</span>
<a id="__codelineno-23-3" name="__codelineno-23-3" href="#__codelineno-23-3"></a><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="sr">/^(.*)\s+(\d+)$/</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-23-4" name="__codelineno-23-4" href="#__codelineno-23-4"></a><span class="w">        </span><span class="nv">$stack</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">$1</span><span class="p">;</span>
<a id="__codelineno-23-5" name="__codelineno-23-5" href="#__codelineno-23-5"></a><span class="w">        </span><span class="nv">$count</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">$2</span><span class="p">;</span>
<a id="__codelineno-23-6" name="__codelineno-23-6" href="#__codelineno-23-6"></a><span class="w">        </span><span class="nv">@frames</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">split</span><span class="w"> </span><span class="sr">/;/</span><span class="p">,</span><span class="w"> </span><span class="nv">$stack</span><span class="p">;</span>
<a id="__codelineno-23-7" name="__codelineno-23-7" href="#__codelineno-23-7"></a><span class="w">        </span><span class="n">accumulate</span><span class="p">(</span><span class="o">\</span><span class="nv">@frames</span><span class="p">,</span><span class="w"> </span><span class="nv">$count</span><span class="p">);</span>
<a id="__codelineno-23-8" name="__codelineno-23-8" href="#__codelineno-23-8"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-23-9" name="__codelineno-23-9" href="#__codelineno-23-9"></a><span class="p">}</span>
</code></pre></div>
<p><strong>Build Call Tree</strong>:</p>
<p>From the folded stacks, FlameGraph.pl constructs a hierarchical tree structure where each node contains a function name, sample count, and list of children. As it processes each stack, it merges common prefixes - stacks that share the same initial call path are represented by the same nodes in the tree, with branches only where execution diverges. This tree structure is what enables the characteristic flame graph visualization where wide bases represent common entry points and narrower tops show specialized execution paths.</p>
<p><strong>Calculate Widths</strong>:</p>
<p>The visual width of each frame in the flame graph is proportional to its sample count. The algorithm starts with the total image width (default 1200 pixels) and allocates space to each frame based on its percentage of total samples: <code>frame_width = (frame_count / total_samples) × image_width</code>. Frames narrower than a minimum threshold (default 0.1 pixels) are omitted entirely to avoid visual clutter and improve rendering performance.</p>
<p><strong>Assign Colors</strong>:</p>
<p>Color assignment uses the <code>--colors=gpu</code> custom palette optimized for CPU/GPU profiling. The coloring is annotation-based: frames marked with <code>_[G]</code> (uppercase) representing major GPU components render in bright blue or cyan, while <code>_[g]</code> (lowercase) frames for individual GPU instructions use light blue, stack separator frames marked with <code>-</code> appear in gray, and all other frames (CPU code) use warm colors in the yellow/orange/red spectrum. Within each color family, the specific hue varies based on a hash of the function name, ensuring the same function always gets the same color across different profile runs for easy visual comparison.</p>
<p><strong>Generate SVG</strong>:</p>
<p>The final step produces the interactive SVG visualization. Each frame becomes an SVG rectangle element with calculated x, y, width, and height attributes, filled with the assigned color. A text label containing the function name is overlaid on each rectangle. Embedded JavaScript provides rich interactivity: mouse-over displays a tooltip showing the full function name and percentage of total samples, clicking a frame zooms the view to show just that frame's subtree, Ctrl+F enables searching and highlighting frames by name, and a reset button returns to the full view.</p>
<h4 id="svg-structure">SVG Structure</h4>
<div class="highlight"><pre><span></span><code><a id="__codelineno-24-1" name="__codelineno-24-1" href="#__codelineno-24-1"></a><span class="nt">&lt;svg</span><span class="w"> </span><span class="na">xmlns=</span><span class="s">&quot;http://www.w3.org/2000/svg&quot;</span><span class="w"> </span><span class="na">width=</span><span class="s">&quot;1200&quot;</span><span class="w"> </span><span class="na">height=</span><span class="s">&quot;...&quot;</span><span class="w"> </span><span class="nt">&gt;</span>
<a id="__codelineno-24-2" name="__codelineno-24-2" href="#__codelineno-24-2"></a><span class="w">  </span><span class="cm">&lt;!-- Title --&gt;</span>
<a id="__codelineno-24-3" name="__codelineno-24-3" href="#__codelineno-24-3"></a><span class="w">  </span><span class="nt">&lt;text</span><span class="w"> </span><span class="na">y=</span><span class="s">&quot;24&quot;</span><span class="nt">&gt;</span>AI<span class="w"> </span>Flame<span class="w"> </span>Graph<span class="nt">&lt;/text&gt;</span>
<a id="__codelineno-24-4" name="__codelineno-24-4" href="#__codelineno-24-4"></a>
<a id="__codelineno-24-5" name="__codelineno-24-5" href="#__codelineno-24-5"></a><span class="w">  </span><span class="cm">&lt;!-- Flame graph frames --&gt;</span>
<a id="__codelineno-24-6" name="__codelineno-24-6" href="#__codelineno-24-6"></a><span class="w">  </span><span class="nt">&lt;g</span><span class="w"> </span><span class="na">class=</span><span class="s">&quot;func_g&quot;</span><span class="nt">&gt;</span>
<a id="__codelineno-24-7" name="__codelineno-24-7" href="#__codelineno-24-7"></a><span class="w">    </span><span class="nt">&lt;title&gt;</span>python3.11<span class="w"> </span>(1234<span class="w"> </span>samples,<span class="w"> </span>45%)<span class="nt">&lt;/title&gt;</span>
<a id="__codelineno-24-8" name="__codelineno-24-8" href="#__codelineno-24-8"></a><span class="w">    </span><span class="nt">&lt;rect</span><span class="w"> </span><span class="na">x=</span><span class="s">&quot;0&quot;</span><span class="w"> </span><span class="na">y=</span><span class="s">&quot;100&quot;</span><span class="w"> </span><span class="na">width=</span><span class="s">&quot;540&quot;</span><span class="w"> </span><span class="na">height=</span><span class="s">&quot;16&quot;</span><span class="w"> </span><span class="na">fill=</span><span class="s">&quot;rgb(230,150,80)&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<a id="__codelineno-24-9" name="__codelineno-24-9" href="#__codelineno-24-9"></a><span class="w">    </span><span class="nt">&lt;text</span><span class="w"> </span><span class="na">x=</span><span class="s">&quot;5&quot;</span><span class="w"> </span><span class="na">y=</span><span class="s">&quot;110&quot;</span><span class="nt">&gt;</span>python3.11<span class="nt">&lt;/text&gt;</span>
<a id="__codelineno-24-10" name="__codelineno-24-10" href="#__codelineno-24-10"></a><span class="w">  </span><span class="nt">&lt;/g&gt;</span>
<a id="__codelineno-24-11" name="__codelineno-24-11" href="#__codelineno-24-11"></a>
<a id="__codelineno-24-12" name="__codelineno-24-12" href="#__codelineno-24-12"></a><span class="w">  </span><span class="nt">&lt;g</span><span class="w"> </span><span class="na">class=</span><span class="s">&quot;func_g&quot;</span><span class="nt">&gt;</span>
<a id="__codelineno-24-13" name="__codelineno-24-13" href="#__codelineno-24-13"></a><span class="w">    </span><span class="nt">&lt;title&gt;</span>PyEval_EvalFrameDefault<span class="w"> </span>(1000<span class="w"> </span>samples,<span class="w"> </span>36%)<span class="nt">&lt;/title&gt;</span>
<a id="__codelineno-24-14" name="__codelineno-24-14" href="#__codelineno-24-14"></a><span class="w">    </span><span class="nt">&lt;rect</span><span class="w"> </span><span class="na">x=</span><span class="s">&quot;0&quot;</span><span class="w"> </span><span class="na">y=</span><span class="s">&quot;84&quot;</span><span class="w"> </span><span class="na">width=</span><span class="s">&quot;450&quot;</span><span class="w"> </span><span class="na">height=</span><span class="s">&quot;16&quot;</span><span class="w"> </span><span class="na">fill=</span><span class="s">&quot;rgb(240,160,90)&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<a id="__codelineno-24-15" name="__codelineno-24-15" href="#__codelineno-24-15"></a><span class="w">    </span><span class="nt">&lt;text</span><span class="w"> </span><span class="na">x=</span><span class="s">&quot;5&quot;</span><span class="w"> </span><span class="na">y=</span><span class="s">&quot;94&quot;</span><span class="nt">&gt;</span>PyEval_EvalFrameDefault<span class="nt">&lt;/text&gt;</span>
<a id="__codelineno-24-16" name="__codelineno-24-16" href="#__codelineno-24-16"></a><span class="w">  </span><span class="nt">&lt;/g&gt;</span>
<a id="__codelineno-24-17" name="__codelineno-24-17" href="#__codelineno-24-17"></a>
<a id="__codelineno-24-18" name="__codelineno-24-18" href="#__codelineno-24-18"></a><span class="w">  </span><span class="cm">&lt;!-- GPU frames (blue) --&gt;</span>
<a id="__codelineno-24-19" name="__codelineno-24-19" href="#__codelineno-24-19"></a><span class="w">  </span><span class="nt">&lt;g</span><span class="w"> </span><span class="na">class=</span><span class="s">&quot;func_g&quot;</span><span class="nt">&gt;</span>
<a id="__codelineno-24-20" name="__codelineno-24-20" href="#__codelineno-24-20"></a><span class="w">    </span><span class="nt">&lt;title&gt;</span>my_compute_kernel<span class="w"> </span>(500<span class="w"> </span>samples,<span class="w"> </span>18%)<span class="nt">&lt;/title&gt;</span>
<a id="__codelineno-24-21" name="__codelineno-24-21" href="#__codelineno-24-21"></a><span class="w">    </span><span class="nt">&lt;rect</span><span class="w"> </span><span class="na">x=</span><span class="s">&quot;0&quot;</span><span class="w"> </span><span class="na">y=</span><span class="s">&quot;36&quot;</span><span class="w"> </span><span class="na">width=</span><span class="s">&quot;225&quot;</span><span class="w"> </span><span class="na">height=</span><span class="s">&quot;16&quot;</span><span class="w"> </span><span class="na">fill=</span><span class="s">&quot;rgb(80,150,230)&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<a id="__codelineno-24-22" name="__codelineno-24-22" href="#__codelineno-24-22"></a><span class="w">    </span><span class="nt">&lt;text</span><span class="w"> </span><span class="na">x=</span><span class="s">&quot;5&quot;</span><span class="w"> </span><span class="na">y=</span><span class="s">&quot;46&quot;</span><span class="nt">&gt;</span>my_compute_kernel<span class="nt">&lt;/text&gt;</span>
<a id="__codelineno-24-23" name="__codelineno-24-23" href="#__codelineno-24-23"></a><span class="w">  </span><span class="nt">&lt;/g&gt;</span>
<a id="__codelineno-24-24" name="__codelineno-24-24" href="#__codelineno-24-24"></a>
<a id="__codelineno-24-25" name="__codelineno-24-25" href="#__codelineno-24-25"></a><span class="w">  </span><span class="cm">&lt;!-- GPU instruction (light blue) --&gt;</span>
<a id="__codelineno-24-26" name="__codelineno-24-26" href="#__codelineno-24-26"></a><span class="w">  </span><span class="nt">&lt;g</span><span class="w"> </span><span class="na">class=</span><span class="s">&quot;func_g&quot;</span><span class="nt">&gt;</span>
<a id="__codelineno-24-27" name="__codelineno-24-27" href="#__codelineno-24-27"></a><span class="w">    </span><span class="nt">&lt;title&gt;</span>mad(8)<span class="w"> </span>r10<span class="w"> </span>(200<span class="w"> </span>samples,<span class="w"> </span>7%)<span class="nt">&lt;/title&gt;</span>
<a id="__codelineno-24-28" name="__codelineno-24-28" href="#__codelineno-24-28"></a><span class="w">    </span><span class="nt">&lt;rect</span><span class="w"> </span><span class="na">x=</span><span class="s">&quot;0&quot;</span><span class="w"> </span><span class="na">y=</span><span class="s">&quot;20&quot;</span><span class="w"> </span><span class="na">width=</span><span class="s">&quot;90&quot;</span><span class="w"> </span><span class="na">height=</span><span class="s">&quot;16&quot;</span><span class="w"> </span><span class="na">fill=</span><span class="s">&quot;rgb(150,200,250)&quot;</span><span class="w"> </span><span class="nt">/&gt;</span>
<a id="__codelineno-24-29" name="__codelineno-24-29" href="#__codelineno-24-29"></a><span class="w">    </span><span class="nt">&lt;text</span><span class="w"> </span><span class="na">x=</span><span class="s">&quot;5&quot;</span><span class="w"> </span><span class="na">y=</span><span class="s">&quot;30&quot;</span><span class="nt">&gt;</span>mad(8)<span class="w"> </span>r10<span class="nt">&lt;/text&gt;</span>
<a id="__codelineno-24-30" name="__codelineno-24-30" href="#__codelineno-24-30"></a><span class="w">  </span><span class="nt">&lt;/g&gt;</span>
<a id="__codelineno-24-31" name="__codelineno-24-31" href="#__codelineno-24-31"></a>
<a id="__codelineno-24-32" name="__codelineno-24-32" href="#__codelineno-24-32"></a><span class="w">  </span><span class="cm">&lt;!-- JavaScript for interactivity --&gt;</span>
<a id="__codelineno-24-33" name="__codelineno-24-33" href="#__codelineno-24-33"></a><span class="w">  </span><span class="nt">&lt;script</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;text/ecmascript&quot;</span><span class="nt">&gt;</span>
<a id="__codelineno-24-34" name="__codelineno-24-34" href="#__codelineno-24-34"></a><span class="w">    </span><span class="cp">&lt;![CDATA[</span>
<a id="__codelineno-24-35" name="__codelineno-24-35" href="#__codelineno-24-35"></a><span class="cp">      function zoom(e) { ... }</span>
<a id="__codelineno-24-36" name="__codelineno-24-36" href="#__codelineno-24-36"></a><span class="cp">      function search() { ... }</span>
<a id="__codelineno-24-37" name="__codelineno-24-37" href="#__codelineno-24-37"></a><span class="cp">      function reset() { ... }</span>
<a id="__codelineno-24-38" name="__codelineno-24-38" href="#__codelineno-24-38"></a><span class="cp">    ]]&gt;</span>
<a id="__codelineno-24-39" name="__codelineno-24-39" href="#__codelineno-24-39"></a><span class="w">  </span><span class="nt">&lt;/script&gt;</span>
<a id="__codelineno-24-40" name="__codelineno-24-40" href="#__codelineno-24-40"></a><span class="nt">&lt;/svg&gt;</span>
</code></pre></div>
<p><a class="md-button" href="https://x.com/intent/tweet?text=Understanding%20iaprof%3A%20A%20Deep%20Dive%20into%20AI/GPU%20Flame%20Graph%20Profiling%0A&amp;url=https://eunomia.dev/en/blog/posts/iaprof-analysis/">Share on <span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M14.234 10.162 22.977 0h-2.072l-7.591 8.824L7.251 0H.258l9.168 13.343L.258 24H2.33l8.016-9.318L16.749 24h6.993zm-2.837 3.299-.929-1.329L3.076 1.56h3.182l5.965 8.532.929 1.329 7.754 11.09h-3.182z"/></svg></span></a>
<a class="md-button" href="https://www.facebook.com/sharer/sharer.php?u=https://eunomia.dev/en/blog/posts/iaprof-analysis/">Share on <span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.101 23.691v-7.98H6.627v-3.667h2.474v-1.58c0-4.085 1.848-5.978 5.858-5.978.401 0 .955.042 1.468.103a9 9 0 0 1 1.141.195v3.325a9 9 0 0 0-.653-.036 27 27 0 0 0-.733-.009c-.707 0-1.259.096-1.675.309a1.7 1.7 0 0 0-.679.622c-.258.42-.374.995-.374 1.752v1.297h3.919l-.386 2.103-.287 1.564h-3.246v8.245C19.396 23.238 24 18.179 24 12.044c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.628 3.874 10.35 9.101 11.647"/></svg></span></a></p>







  
    
  
  
    
  


  <aside class="md-source-file">
    
      
  <span class="md-source-file__fact">
    <span class="md-icon" title="Last update">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M21 13.1c-.1 0-.3.1-.4.2l-1 1 2.1 2.1 1-1c.2-.2.2-.6 0-.8l-1.3-1.3c-.1-.1-.2-.2-.4-.2m-1.9 1.8-6.1 6V23h2.1l6.1-6.1zM12.5 7v5.2l4 2.4-1 1L11 13V7zM11 21.9c-5.1-.5-9-4.8-9-9.9C2 6.5 6.5 2 12 2c5.3 0 9.6 4.1 10 9.3-.3-.1-.6-.2-1-.2s-.7.1-1 .2C19.6 7.2 16.2 4 12 4c-4.4 0-8 3.6-8 8 0 4.1 3.1 7.5 7.1 7.9l-.1.2z"/></svg>
    </span>
    <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-date" title="October 13, 2025 13:37:31 UTC">October 13, 2025</span>
  </span>

    
    
      
  <span class="md-source-file__fact">
    <span class="md-icon" title="Created">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M14.47 15.08 11 13V7h1.5v5.25l3.08 1.83c-.41.28-.79.62-1.11 1m-1.39 4.84c-.36.05-.71.08-1.08.08-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8c0 .37-.03.72-.08 1.08.69.1 1.33.32 1.92.64.1-.56.16-1.13.16-1.72 0-5.5-4.5-10-10-10S2 6.5 2 12s4.47 10 10 10c.59 0 1.16-.06 1.72-.16-.32-.59-.54-1.23-.64-1.92M18 15v3h-3v2h3v3h2v-3h3v-2h-3v-3z"/></svg>
    </span>
    <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-date" title="October 7, 2025 21:59:13 UTC">October 7, 2025</span>
  </span>

    
    
      
  
  <span class="md-source-file__fact">
    <span class="md-icon" title="Contributors">
      
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 4a4 4 0 0 1 4 4 4 4 0 0 1-4 4 4 4 0 0 1-4-4 4 4 0 0 1 4-4m0 10c4.42 0 8 1.79 8 4v2H4v-2c0-2.21 3.58-4 8-4"/></svg>
      
    </span>
    <nav>
      
        <a href="mailto:yunwei356@gmail.com">yunwei37</a>
    </nav>
  </span>

    
    
  </aside>


  



  <form class="md-feedback" name="feedback" hidden>
    <fieldset>
      <legend class="md-feedback__title">
        Was this page helpful?
      </legend>
      <div class="md-feedback__inner">
        <div class="md-feedback__list">
          
            <button class="md-feedback__icon md-icon" type="submit" title="This page was helpful" data-md-value="1">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 12a8 8 0 0 0-8-8 8 8 0 0 0-8 8 8 8 0 0 0 8 8 8 8 0 0 0 8-8m2 0a10 10 0 0 1-10 10A10 10 0 0 1 2 12 10 10 0 0 1 12 2a10 10 0 0 1 10 10M10 9.5c0 .8-.7 1.5-1.5 1.5S7 10.3 7 9.5 7.7 8 8.5 8s1.5.7 1.5 1.5m7 0c0 .8-.7 1.5-1.5 1.5S14 10.3 14 9.5 14.7 8 15.5 8s1.5.7 1.5 1.5m-5 7.73c-1.75 0-3.29-.73-4.19-1.81L9.23 14c.45.72 1.52 1.23 2.77 1.23s2.32-.51 2.77-1.23l1.42 1.42c-.9 1.08-2.44 1.81-4.19 1.81"/></svg>
            </button>
          
            <button class="md-feedback__icon md-icon" type="submit" title="This page could be improved" data-md-value="0">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 12a8 8 0 0 0-8-8 8 8 0 0 0-8 8 8 8 0 0 0 8 8 8 8 0 0 0 8-8m2 0a10 10 0 0 1-10 10A10 10 0 0 1 2 12 10 10 0 0 1 12 2a10 10 0 0 1 10 10m-6.5-4c.8 0 1.5.7 1.5 1.5s-.7 1.5-1.5 1.5-1.5-.7-1.5-1.5.7-1.5 1.5-1.5M10 9.5c0 .8-.7 1.5-1.5 1.5S7 10.3 7 9.5 7.7 8 8.5 8s1.5.7 1.5 1.5m2 4.5c1.75 0 3.29.72 4.19 1.81l-1.42 1.42C14.32 16.5 13.25 16 12 16s-2.32.5-2.77 1.23l-1.42-1.42C8.71 14.72 10.25 14 12 14"/></svg>
            </button>
          
        </div>
        <div class="md-feedback__note">
          
            <div data-md-value="1" hidden>
              
              
                
              
              
              
                
                
              
              Thanks for your feedback!
            </div>
          
            <div data-md-value="0" hidden>
              
              
                
              
              
              
                
                
              
              Thanks for your feedback! Help us improve this page by using our <a href="https://github.com/orgs/eunomia-bpf/discussions" target="_blank" rel="noopener">Github discussion</a>.
            </div>
          
        </div>
      </div>
    </fieldset>
  </form>


<script src="https://giscus.app/client.js"
        data-repo="eunomia-bpf/bpf-developer-tutorial"
        data-repo-id="R_kgDOIi0KhQ"
        data-category="General"
        data-category-id="DIC_kwDOIi0Khc4CYq-h"
        data-mapping="pathname"
        data-strict="0"
        data-reactions-enabled="1"
        data-emit-metadata="0"
        data-input-position="bottom"
        data-theme="preferred_color_scheme"
        data-lang="en"
        crossorigin="anonymous"
        async>
</script>

                
              </article>
            </div>
          
          
  <script>var tabs=__md_get("__tabs");if(Array.isArray(tabs))e:for(var set of document.querySelectorAll(".tabbed-set")){var labels=set.querySelector(".tabbed-labels");for(var tab of tabs)for(var label of labels.getElementsByTagName("label"))if(label.innerText.trim()===tab){var input=document.getElementById(label.htmlFor);input.checked=!0;continue e}}</script>

<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg>
  Back to top
</button>
        
      </main>
      
        <footer class="md-footer">
  
    
      
      <nav class="md-footer__inner md-grid" aria-label="Footer" >
        
          
          <a href="../how-to-write-rust-in-wasm/" class="md-footer__link md-footer__link--prev" aria-label="Previous: 在 WebAssembly 中使用 Rust 编写 eBPF 程序并发布 OCI 镜像">
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
            </div>
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Previous
              </span>
              <div class="md-ellipsis">
                在 WebAssembly 中使用 Rust 编写 eBPF 程序并发布 OCI 镜像
              </div>
            </div>
          </a>
        
        
          
          <a href="../inline-hook/" class="md-footer__link md-footer__link--next" aria-label="Next: Implementing an Inline Hook in C in 5 minutes">
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Next
              </span>
              <div class="md-ellipsis">
                Implementing an Inline Hook in C in 5 minutes
              </div>
            </div>
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11z"/></svg>
            </div>
          </a>
        
      </nav>
    
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Copyright (c) 2025 eunomia-bpf org.
    </div>
  
  
</div>
      
        
<div class="md-social">
  
    
    
    
    
      
      
    
    <a href="https://github.com/eunomia-bpf" target="_blank" rel="noopener" title="github.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
    </a>
  
    
    
    
    
    <a href="mailto:yunwei356@gmail.com" target="_blank" rel="noopener" title="" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M536.4-26.3c9.8-3.5 20.6-1 28 6.3s9.8 18.2 6.3 28l-178 496.9c-5 13.9-18.1 23.1-32.8 23.1-14.2 0-27-8.6-32.3-21.7l-64.2-158c-4.5-11-2.5-23.6 5.2-32.6l94.5-112.4c5.1-6.1 4.7-15-.9-20.6s-14.6-6-20.6-.9l-112.4 94.3c-9.1 7.6-21.6 9.6-32.6 5.2L38.1 216.8c-13.1-5.3-21.7-18.1-21.7-32.3 0-14.7 9.2-27.8 23.1-32.8z"/></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
      <div class="md-progress" data-md-component="progress" role="progressbar"></div>
    
    
    
      
      <script id="__config" type="application/json">{"base": "../../../..", "features": ["search.suggest", "search.highlight", "search.share", "navigation.footer", "navigation.instant", "navigation.instant.progress", "navigation.tabs", "navigation.expand", "navigation.path", "navigation.top", "content.tabs.link", "content.action.edit"], "search": "../../../../assets/javascripts/workers/search.973d3a69.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
<script src="https://cdn.usefathom.com/script.js" data-site="ZLDAHRNN" defer></script>

      <script src="../../../../assets/javascripts/bundle.f55a23d4.min.js"></script>
      
    

  </body>
</html>