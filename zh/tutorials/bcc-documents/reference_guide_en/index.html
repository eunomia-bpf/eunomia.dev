
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Unlock the potential of eBPF">
      
      
      
        <link rel="canonical" href="https://eunomia.dev/zh/tutorials/bcc-documents/reference_guide_en/">
      
      
        <link rel="prev" href="../reference_guide/">
      
      
        <link rel="next" href="../special_filtering/">
      
      
      <link rel="icon" href="../../../../assets/icon.svg">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.18">
    
    
      
        <title>bcc Reference Guide - eunomia</title>
      
    
    
      <link rel="stylesheet" href="../../../../assets/stylesheets/main.7e37652d.min.css">
      
        
        <link rel="stylesheet" href="../../../../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("../../../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      
  


  
  

<script id="__analytics">function __md_analytics(){function e(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],e("js",new Date),e("config","G-1YVMXGL0MY"),document.addEventListener("DOMContentLoaded",(function(){document.forms.search&&document.forms.search.query.addEventListener("blur",(function(){this.value&&e("event","search",{search_term:this.value})}));document$.subscribe((function(){var t=document.forms.feedback;if(void 0!==t)for(var a of t.querySelectorAll("[type=submit]"))a.addEventListener("click",(function(a){a.preventDefault();var n=document.location.pathname,d=this.getAttribute("data-md-value");e("event","feedback",{page:n,data:d}),t.firstElementChild.disabled=!0;var r=t.querySelector(".md-feedback__note [data-md-value='"+d+"']");r&&(r.hidden=!1)})),t.hidden=!1})),location$.subscribe((function(t){e("config","G-1YVMXGL0MY",{page_path:t.pathname})}))}));var t=document.createElement("script");t.async=!0,t.src="https://www.googletagmanager.com/gtag/js?id=G-1YVMXGL0MY",document.getElementById("__analytics").insertAdjacentElement("afterEnd",t)}</script>
  
    <script>"undefined"!=typeof __md_analytics&&__md_analytics()</script>
  

    
    
      
        <meta  property="og:type"  content="website" >
      
        <meta  property="og:title"  content="bcc Reference Guide - eunomia" >
      
        <meta  property="og:description"  content="Unlock the potential of eBPF" >
      
        <meta  property="og:image"  content="https://eunomia.dev/assets/images/social/tutorials/bcc-documents/reference_guide_en.png" >
      
        <meta  property="og:image:type"  content="image/png" >
      
        <meta  property="og:image:width"  content="1200" >
      
        <meta  property="og:image:height"  content="630" >
      
        <meta  property="og:url"  content="https://eunomia.dev/zh/tutorials/bcc-documents/reference_guide_en/" >
      
        <meta  name="twitter:card"  content="summary_large_image" >
      
        <meta  name="twitter:title"  content="bcc Reference Guide - eunomia" >
      
        <meta  name="twitter:description"  content="Unlock the potential of eBPF" >
      
        <meta  name="twitter:image"  content="https://eunomia.dev/assets/images/social/tutorials/bcc-documents/reference_guide_en.png" >
      
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="white" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#bcc-reference-guide" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../../../" title="eunomia" class="md-header__button md-logo" aria-label="eunomia" data-md-component="logo">
      
  <img src="../../../../assets/icon.svg" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            eunomia
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              bcc Reference Guide
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="white" data-md-color-accent="indigo"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="slate" data-md-color-primary="black" data-md-color-accent="indigo"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12s-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
      <div class="md-header__option">
  <div class="md-select">
    
    <button class="md-header__button md-icon" aria-label="Select language">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m12.87 15.07-2.54-2.51.03-.03A17.5 17.5 0 0 0 14.07 6H17V4h-7V2H8v2H1v2h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11zM18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2zm-2.62 7 1.62-4.33L19.12 17z"/></svg>
    </button>
    <div class="md-select__inner">
      <ul class="md-select__list">
        
          <li class="md-select__item">
            <a href="/en/" hreflang="en" class="md-select__link">
              English
            </a>
          </li>
        
          <li class="md-select__item">
            <a href="/zh/" hreflang="zh" class="md-select__link">
              Chinese
            </a>
          </li>
        
      </ul>
    </div>
  </div>
</div>
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
          <a href="javascript:void(0)" class="md-search__icon md-icon" title="Share" aria-label="Share" data-clipboard data-clipboard-text="" data-md-component="search-share" tabindex="-1">
            
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7s-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.15c-.05.21-.08.43-.08.66 0 1.61 1.31 2.91 2.92 2.91s2.92-1.3 2.92-2.91A2.92 2.92 0 0 0 18 16.08"/></svg>
          </a>
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
      <div class="md-header__source">
        <a href="https://github.com/eunomia-bpf/eunomia.dev" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path fill="currentColor" d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../" class="md-tabs__link">
          
  
  
  主页

        </a>
      </li>
    
  

      
        
  
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="../../" class="md-tabs__link">
          
  
  
  教程

        </a>
      </li>
    
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../../../../blog" class="md-tabs__link">
        
  
  
    
  
  Blog

      </a>
    </li>
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../bpftime/" class="md-tabs__link">
          
  
  
  bpftime

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../eunomia-bpf/" class="md-tabs__link">
          
  
  
  eunomia-bpf

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../GPTtrace/" class="md-tabs__link">
          
  
  
  GPTtrace

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../wasm-bpf/" class="md-tabs__link">
          
  
  
  wasm-bpf

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../others/" class="md-tabs__link">
          
  
  
  Ecosystem

        </a>
      </li>
    
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../../" title="eunomia" class="md-nav__button md-logo" aria-label="eunomia" data-md-component="logo">
      
  <img src="../../../../assets/icon.svg" alt="logo">

    </a>
    eunomia
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/eunomia-bpf/eunomia.dev" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path fill="currentColor" d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_1" >
        
          
          <label class="md-nav__link" for="__nav_1" id="__nav_1_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    主页
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1">
            <span class="md-nav__icon md-icon"></span>
            主页
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Eunomia - Unlock the potential of eBPF
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
    
      
        
        
      
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" checked>
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    教程
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            教程
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    eBPF 开发实践教程：基于 CO-RE，通过小工具快速上手 eBPF 开发
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../SUMMARY/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    eBPF 开发实践教程：基于 CO-RE，通过小工具快速上手 eBPF 开发
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../0-introduce/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    eBPF 示例教程 0：核心概念与工具简介
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../1-helloworld/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    eBPF 入门开发实践教程一：Hello World，基本框架和开发流程
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../10-hardirqs/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    eBPF 入门开发实践教程十：在 eBPF 中使用 hardirqs 或 softirqs 捕获中断事件
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../11-bootstrap/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    eBPF 入门开发实践教程十一：在 eBPF 中使用 libbpf 开发用户态程序并跟踪 exec() 和 exit() 系统调用
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../12-profile/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    eBPF 入门实践教程十二：使用 eBPF 程序 profile 进行性能分析
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../13-tcpconnlat/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    eBPF入门开发实践教程十三：统计 TCP 连接延时，并使用 libbpf 在用户态处理数据
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../14-tcpstates/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    eBPF入门实践教程十四：记录 TCP 连接状态与 TCP RTT
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../15-javagc/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    eBPF 入门实践教程十五：使用 USDT 捕获用户态 Java GC 事件耗时
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../16-memleak/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    eBPF 入门实践教程十六：编写 eBPF 程序 Memleak 监控内存泄漏
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../17-biopattern/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    eBPF 入门实践教程十七：编写 eBPF 程序统计随机/顺序磁盘 I/O
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../18-further-reading/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    更多的参考资料：论文、项目等等
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../18-further-reading/ebpf-security/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    eBPF 运行时安全性：面临的挑战与前沿创新
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../19-lsm-connect/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    eBPF 入门实践教程：使用 LSM 进行安全检测防御
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../2-kprobe-unlink/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    eBPF 入门开发实践教程二：在 eBPF 中使用 kprobe 监测捕获 unlink 系统调用
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../20-tc/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    eBPF 入门实践教程二十：使用 eBPF 进行 tc 流量控制
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../21-xdp/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    eBPF 入门实践教程二十一： 使用 XDP 进行可编程数据包处理
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../22-android/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    在 Android 上使用 eBPF 程序
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../23-http/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    通过 eBPF socket filter 或 syscall trace 追踪 HTTP 请求等七层协议 - eBPF 实践教程
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../24-hide/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    eBPF 开发实践：使用 eBPF 隐藏进程或文件信息
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../25-signal/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    eBPF 入门实践教程：用 bpf_send_signal 发送信号终止恶意进程
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../26-sudo/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    使用 eBPF 添加 sudo 用户
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../27-replace/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    使用 eBPF 替换任意程序读取或写入的文本
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../28-detach/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    在应用程序退出后运行 eBPF 程序：eBPF 程序的生命周期
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../29-sockops/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    eBPF 开发实践：使用 sockops 加速网络请求转发
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../3-fentry-unlink/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    eBPF 入门开发实践教程三：在 eBPF 中使用 fentry 监测捕获 unlink 系统调用
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../30-sslsniff/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    eBPF 实践教程：使用 uprobe 捕获多种库的 SSL/TLS 明文数据
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../31-goroutine/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    eBPF 实践教程：使用 eBPF 跟踪 Go 协程状态
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../33-funclatency/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    使用 eBPF 测量函数延迟
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../34-syscall/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    eBPF 开发实践：使用 eBPF 修改系统调用参数
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../35-user-ringbuf/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    eBPF开发实践：使用 user ring buffer 向内核异步发送信息
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../36-userspace-ebpf/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    用户空间 eBPF 运行时：深度解析与应用实践
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../37-uprobe-rust/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    eBPF 实践：使用 Uprobe 追踪用户态 Rust 应用
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../38-btf-uprobe/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    借助 eBPF 和 BTF，让用户态也能一次编译、到处运行
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../38-btf-uprobe/test-verify/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    using BTF to verify userspace eBPF extensions
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../38-btf-uprobe/test-verify/minimal/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    minimal examples
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../38-btf-uprobe/test-verify/module/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    write a basic kernel module
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../39-nginx/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    使用 eBPF 跟踪 Nginx 请求
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../4-opensnoop/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    eBPF 入门开发实践教程四：在 eBPF 中捕获进程打开文件的系统调用集合，使用全局变量过滤进程 pid
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../40-mysql/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    使用 eBPF 跟踪 MySQL 查询
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../41-xdp-tcpdump/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    eBPF 示例教程：使用 XDP 捕获 TCP 信息
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../42-xdp-loadbalancer/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    eBPF 开发者教程： 简单的 XDP 负载均衡器
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../42-xdp-loadbalancer/connect/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Network setup for bpf-developer-tutorial
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../43-kfuncs/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    超越 eBPF 的极限：在内核模块中定义自定义 kfunc
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../43-kfuncs/module/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    write a basic kernel module
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../44-scx-simple/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    eBPF 教程：BPF 调度器入门
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../45-scx-nest/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    eBPF 示例教程：实现 scx_nest 调度器
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../46-xdp-test/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    xdp-pktgen: xdp based packet generator
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../47-cuda-events/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    eBPF 与机器学习可观测：追踪 CUDA GPU 操作
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../48-energy/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    eBPF 教程：进程级能源监控与功耗分析
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../48-energy/README_zh/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    eBPF 教程：进程级能源监控与功耗分析
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../48-energy/ebpf-energy/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Ebpf energy
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../48-energy/%E8%83%BD%E6%BA%90%E7%9B%91%E6%8E%A7%E7%B3%BB%E7%BB%9F%E8%AF%A6%E8%A7%A3/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    eBPF 能源监控系统详解
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../5-uprobe-bashreadline/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    eBPF 入门开发实践教程五：在 eBPF 中使用 uprobe 捕获 bash 的 readline 函数调用
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../6-sigsnoop/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    eBPF 入门开发实践教程六：捕获进程发送信号的系统调用集合，使用 hash map 保存状态
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../7-execsnoop/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    eBPF 入门实践教程七：捕获进程执行事件，通过 perf event array 向用户态打印输出
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../8-exitsnoop/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    eBPF 入门开发实践教程八：在 eBPF 中使用 exitsnoop 监控进程退出事件，使用 ring buffer 向用户态打印输出
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../9-runqlat/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    eBPF 入门开发实践教程九：捕获进程调度延迟，以直方图方式记录
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../kernel-versions/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Linux 内核版本的 BPF 功能
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../kernel-versions_en/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    BPF Features by Linux Kernel Version
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../kernel_config/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    BPF 特性的内核配置
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../kernel_config_en/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Kernel Configuration for BPF Features
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../reference_guide/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    bcc 参考指南
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    bcc Reference Guide
    
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    bcc Reference Guide
    
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#contents" class="md-nav__link">
    <span class="md-ellipsis">
      Contents
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../special_filtering/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    特殊过滤
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../special_filtering_en/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Special Filtering
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../tutorial/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    bcc 教程
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../tutorial_bcc_python_developer/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    bcc Python 开发者教程
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../tutorial_bcc_python_developer_en/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    bcc Python Developer Tutorial
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../tutorial_en/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    bcc Tutorial
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../bpftrace-tutorial/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    bpftrace一行教程
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../scripts/guideline_advance/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Blog Guidelines for Advanced eBPF Tutorials
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../scripts/guideline_basic/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    blog guideline or pattern
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../blog" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Blog
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_4" >
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    bpftime
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            bpftime
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../bpftime/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    bpftime Documentation
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../bpftime/documents/build-and-test/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Building and Test
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../bpftime/documents/usage/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Manual
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../bpftime/documents/examples/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Examples &amp; Use Cases
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../bpftime/documents/available-features/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Available kernel features in userspace
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_4_6" >
        
          
          <label class="md-nav__link" for="__nav_4_6" id="__nav_4_6_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Bpftime
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_6">
            <span class="md-nav__icon md-icon"></span>
            Bpftime
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../bpftime/llvmbpf/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Userspace eBPF VM with LLVM JIT/AOT Compiler
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_4_6_2" >
        
          
          <label class="md-nav__link" for="__nav_4_6_2" id="__nav_4_6_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    EIM
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_4_6_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_6_2">
            <span class="md-nav__icon md-icon"></span>
            EIM
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../bpftime/EIM/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    EIM: Extension Interface Model
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../bpftime/EIM/example/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    EIM: Example code
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../bpftime/EIM/spec/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    EIM: Extension Interface Model Specification
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../bpftime/EIM/uprobe/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    UProbe Role Definition README
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../bpftime/EIM/usage/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    EIM Usage and people involved (Draft v1)
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_4_6_2_6" >
        
          
          <label class="md-nav__link" for="__nav_4_6_2_6" id="__nav_4_6_2_6_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Draft spec
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_4_6_2_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_6_2_6">
            <span class="md-nav__icon md-icon"></span>
            Draft spec
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../bpftime/EIM/draft-spec/current-EIM-lack/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    EIM on verify: what can it do and what cannot
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../bpftime/EIM/draft-spec/spec/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Extension Inferface Model Specification V3
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../bpftime/EIM/draft-spec/spec_core/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Spec core
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../bpftime/EIM/draft-spec/spec_old/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Extension Model Specification V1
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_4_6_2_7" >
        
          
          <label class="md-nav__link" for="__nav_4_6_2_7" id="__nav_4_6_2_7_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Study
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_4_6_2_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_6_2_7">
            <span class="md-nav__icon md-icon"></span>
            Study
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../bpftime/EIM/study/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    studies on bugs in extensions/plugins
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../bpftime/EIM/study/browser-ide-bug-study/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    关于浏览器扩展和 IDE 插件漏洞的研究
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../bpftime/EIM/study/compare/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Extension Systems compare with EIM
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../bpftime/EIM/study/db-bug-study/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    关于数据库和 Web 服务器扩展接口中的缺陷研究
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../bpftime/EIM/study/docker-vm-bug-study/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    关于虚拟机管理程序和容器扩展漏洞的研究（2018–2024）
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../bpftime/EIM/study/game-office-bug-study/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    关于生产力软件和游戏扩展/插件漏洞的案例研究（2018–2024）
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_4_6_3" >
        
          
          <label class="md-nav__link" for="__nav_4_6_3" id="__nav_4_6_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    文档
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_4_6_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_6_3">
            <span class="md-nav__icon md-icon"></span>
            文档
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../bpftime/documents/attach/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Detailed Implementation of the Attach Part
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../bpftime/documents/bpftimeaot/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    bpftime-aot cli
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../bpftime/documents/bpftimetool/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    bpftimetool
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../bpftime/documents/co-re/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Compile Once, Run Everywhere(CO-RE)
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../bpftime/documents/contact/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Contact and citations
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../bpftime/documents/how-it-works/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    The design and implementation of bpftime
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../bpftime/documents/introduction/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    简介
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../bpftime/documents/performance/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    performance and benchmark
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_5" >
        
          
          <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    eunomia-bpf
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            eunomia-bpf
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../eunomia-bpf/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    eunomia-bpf：简化并增强eBPF，支持CO-RE和WebAssembly
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_5_2" >
        
          
          <label class="md-nav__link" for="__nav_5_2" id="__nav_5_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Eunomia bpf
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_5_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_2">
            <span class="md-nav__icon md-icon"></span>
            Eunomia bpf
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../eunomia-bpf/benchmark/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    benchmark
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../eunomia-bpf/introduction/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    introduction
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../eunomia-bpf/manual/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    eunomia-bpf 用户手册: 让 eBPF 程序的开发和部署尽可能简单
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../eunomia-bpf/online/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    在线体验网站
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../eunomia-bpf/quickstart/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    quickstart
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../eunomia-bpf/supporting-external-BTF/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    supporting-external-BTF
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../eunomia-bpf/video/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    video
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_5_2_8" >
        
          
          <label class="md-nav__link" for="__nav_5_2_8" id="__nav_5_2_8_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    项目架构
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_5_2_8_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_2_8">
            <span class="md-nav__icon md-icon"></span>
            项目架构
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../eunomia-bpf/architecture/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Project architecture
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_5_2_9" >
        
          
          <label class="md-nav__link" for="__nav_5_2_9" id="__nav_5_2_9_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Ecc
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_5_2_9_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_2_9">
            <span class="md-nav__icon md-icon"></span>
            Ecc
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../eunomia-bpf/ecc/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    eunomia-cc
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../eunomia-bpf/ecc/docker-usage/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    ecc docker usage
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../eunomia-bpf/ecc/github-template/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    github template
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../eunomia-bpf/ecc/usage/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    ecc usage
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_5_2_10" >
        
          
          <label class="md-nav__link" for="__nav_5_2_10" id="__nav_5_2_10_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Ecli
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_5_2_10_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_2_10">
            <span class="md-nav__icon md-icon"></span>
            Ecli
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../eunomia-bpf/ecli/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    ecli
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../eunomia-bpf/ecli/ecli-dockerfile-usage/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    ecli dockerfile usage
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../eunomia-bpf/ecli/server/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    ecli server
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_5_2_11" >
        
          
          <label class="md-nav__link" for="__nav_5_2_11" id="__nav_5_2_11_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Exporter
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_5_2_11_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_2_11">
            <span class="md-nav__icon md-icon"></span>
            Exporter
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../eunomia-bpf/exporter/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    exporter
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../eunomia-bpf/exporter/usage/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    usage
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_5_2_12" >
        
          
          <label class="md-nav__link" for="__nav_5_2_12" id="__nav_5_2_12_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Setup
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_5_2_12_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_2_12">
            <span class="md-nav__icon md-icon"></span>
            Setup
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../eunomia-bpf/setup/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Setup
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../eunomia-bpf/setup/build-android-arm/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    build on android aarch64
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../eunomia-bpf/setup/build/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    build from source
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_6" >
        
          
          <label class="md-nav__link" for="__nav_6" id="__nav_6_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    GPTtrace
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6">
            <span class="md-nav__icon md-icon"></span>
            GPTtrace
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../GPTtrace/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    GPTtrace 文档
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_7" >
        
          
          <label class="md-nav__link" for="__nav_7" id="__nav_7_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    wasm-bpf
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_7">
            <span class="md-nav__icon md-icon"></span>
            wasm-bpf
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../wasm-bpf/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Wasm-bpf Documentation
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_8" >
        
          
          <label class="md-nav__link" for="__nav_8" id="__nav_8_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Ecosystem
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_8_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_8">
            <span class="md-nav__icon md-icon"></span>
            Ecosystem
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../others/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Ecosystem & Other Projects
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_8_2" >
        
          
          <label class="md-nav__link" for="__nav_8_2" id="__nav_8_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Others
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_8_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_8_2">
            <span class="md-nav__icon md-icon"></span>
            Others
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../others/bpf-benchmark/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    BPF-Benchmark
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../others/bpf-compatible/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    bpf-compatible
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../others/contribute/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Contributing to eunomia-bpf
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../others/ebpf-gpts/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    An experiment: GPTs for eBPF
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../others/ideas/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Possible ideas for the future
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../others/usecases/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    ebpf usecases analysis
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_8_2_7" >
        
          
          <label class="md-nav__link" for="__nav_8_2_7" id="__nav_8_2_7_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Cuda tutorial
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_8_2_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_8_2_7">
            <span class="md-nav__icon md-icon"></span>
            Cuda tutorial
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../others/cuda-tutorial/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    basic-cuda-tutorial
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../others/cuda-tutorial/01-vector-addition/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    CUDA 基础示例 - 向量加法解释
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../others/cuda-tutorial/02-ptx-assembly/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    CUDA PTX示例：使用内联PTX汇编进行向量乘法
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../others/cuda-tutorial/03-gpu-programming-methods/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    CUDA编程方法比较：矩阵乘法
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../others/cuda-tutorial/04-gpu-architecture/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    CUDA GPU组织层次结构
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../others/cuda-tutorial/05-neural-network/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    使用CUDA在GPU上实现神经网络前向传播
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../others/cuda-tutorial/06-cnn-convolution/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    使用共享内存优化的GPU加速卷积操作
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../others/cuda-tutorial/07-attention-mechanism/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    使用CUDA实现Transformer模型的注意力机制
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../others/cuda-tutorial/08-profiling-tracing/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    CUDA GPU性能分析与跟踪
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../others/cuda-tutorial/09-gpu-extension/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    GPU应用程序扩展机制：无需更改源代码修改行为
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../others/cuda-tutorial/10-cpu-gpu-profiling-boundaries/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    CPU和GPU分析边界：在哪里测量什么
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../others/cuda-tutorial/11-fine-grained-gpu-modifications/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    细粒度GPU代码修改
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../others/cuda-tutorial/12-advanced-gpu-customizations/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    高级GPU定制技术
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../others/cuda-tutorial/13-low-latency-gpu-packet-processing/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    低延迟GPU数据包处理
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../others/cuda-tutorial/14-cuda-function-annotations/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    CUDA函数类型注解：全面指南
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../others/cuda-tutorial/15-opencl-vector-addition/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    OpenCL基础示例 - 向量加法解释
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../others/cuda-tutorial/README_PTX_Demo/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    PTX文件加载和执行演示
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_8_2_8" >
        
          
          <label class="md-nav__link" for="__nav_8_2_8" id="__nav_8_2_8_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Cupti tutorial
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_8_2_8_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_8_2_8">
            <span class="md-nav__icon md-icon"></span>
            Cupti tutorial
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../others/cupti-tutorial/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    NVIDIA CUPTI Tutorials
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_8_2_8_2" >
        
          
          <label class="md-nav__link" for="__nav_8_2_8_2" id="__nav_8_2_8_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Activity trace
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_8_2_8_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_8_2_8_2">
            <span class="md-nav__icon md-icon"></span>
            Activity trace
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../others/cupti-tutorial/activity_trace/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    CUPTI 活动跟踪教程
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_8_2_8_3" >
        
          
          <label class="md-nav__link" for="__nav_8_2_8_3" id="__nav_8_2_8_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Activity trace async
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_8_2_8_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_8_2_8_3">
            <span class="md-nav__icon md-icon"></span>
            Activity trace async
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../others/cupti-tutorial/activity_trace_async/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    CUPTI 异步活动跟踪教程
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_8_2_8_4" >
        
          
          <label class="md-nav__link" for="__nav_8_2_8_4" id="__nav_8_2_8_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Autorange profiling
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_8_2_8_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_8_2_8_4">
            <span class="md-nav__icon md-icon"></span>
            Autorange profiling
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../others/cupti-tutorial/autorange_profiling/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    CUPTI 自动范围性能分析教程
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_8_2_8_5" >
        
          
          <label class="md-nav__link" for="__nav_8_2_8_5" id="__nav_8_2_8_5_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Callback event
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_8_2_8_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_8_2_8_5">
            <span class="md-nav__icon md-icon"></span>
            Callback event
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../others/cupti-tutorial/callback_event/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    CUPTI 回调事件教程
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_8_2_8_6" >
        
          
          <label class="md-nav__link" for="__nav_8_2_8_6" id="__nav_8_2_8_6_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Callback metric
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_8_2_8_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_8_2_8_6">
            <span class="md-nav__icon md-icon"></span>
            Callback metric
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../others/cupti-tutorial/callback_metric/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    CUPTI 性能指标教程
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_8_2_8_7" >
        
          
          <label class="md-nav__link" for="__nav_8_2_8_7" id="__nav_8_2_8_7_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Callback profiling
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_8_2_8_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_8_2_8_7">
            <span class="md-nav__icon md-icon"></span>
            Callback profiling
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../others/cupti-tutorial/callback_profiling/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    CUPTI 基于回调的性能分析教程
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_8_2_8_8" >
        
          
          <label class="md-nav__link" for="__nav_8_2_8_8" id="__nav_8_2_8_8_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Callback timestamp
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_8_2_8_8_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_8_2_8_8">
            <span class="md-nav__icon md-icon"></span>
            Callback timestamp
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../others/cupti-tutorial/callback_timestamp/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    CUPTI 时间戳回调教程
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_8_2_8_9" >
        
          
          <label class="md-nav__link" for="__nav_8_2_8_9" id="__nav_8_2_8_9_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Checkpoint kernels
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_8_2_8_9_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_8_2_8_9">
            <span class="md-nav__icon md-icon"></span>
            Checkpoint kernels
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../others/cupti-tutorial/checkpoint_kernels/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    CUPTI 检查点 API 教程
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_8_2_8_10" >
        
          
          <label class="md-nav__link" for="__nav_8_2_8_10" id="__nav_8_2_8_10_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Common
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_8_2_8_10_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_8_2_8_10">
            <span class="md-nav__icon md-icon"></span>
            Common
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../others/cupti-tutorial/common/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    CUPTI 通用辅助文件
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_8_2_8_11" >
        
          
          <label class="md-nav__link" for="__nav_8_2_8_11" id="__nav_8_2_8_11_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Concurrent profiling
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_8_2_8_11_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_8_2_8_11">
            <span class="md-nav__icon md-icon"></span>
            Concurrent profiling
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../others/cupti-tutorial/concurrent_profiling/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    CUPTI 并发分析教程
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_8_2_8_12" >
        
          
          <label class="md-nav__link" for="__nav_8_2_8_12" id="__nav_8_2_8_12_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Cuda graphs trace
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_8_2_8_12_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_8_2_8_12">
            <span class="md-nav__icon md-icon"></span>
            Cuda graphs trace
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../others/cupti-tutorial/cuda_graphs_trace/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    CUDA 图追踪教程
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_8_2_8_13" >
        
          
          <label class="md-nav__link" for="__nav_8_2_8_13" id="__nav_8_2_8_13_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Cuda memory trace
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_8_2_8_13_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_8_2_8_13">
            <span class="md-nav__icon md-icon"></span>
            Cuda memory trace
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../others/cupti-tutorial/cuda_memory_trace/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    CUDA 内存追踪教程
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_8_2_8_14" >
        
          
          <label class="md-nav__link" for="__nav_8_2_8_14" id="__nav_8_2_8_14_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Cupti correlation
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_8_2_8_14_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_8_2_8_14">
            <span class="md-nav__icon md-icon"></span>
            Cupti correlation
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../others/cupti-tutorial/cupti_correlation/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    CUPTI API-GPU 活动关联教程
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_8_2_8_15" >
        
          
          <label class="md-nav__link" for="__nav_8_2_8_15" id="__nav_8_2_8_15_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Cupti external correlation
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_8_2_8_15_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_8_2_8_15">
            <span class="md-nav__icon md-icon"></span>
            Cupti external correlation
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../others/cupti-tutorial/cupti_external_correlation/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    CUPTI 外部关联教程
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_8_2_8_16" >
        
          
          <label class="md-nav__link" for="__nav_8_2_8_16" id="__nav_8_2_8_16_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Cupti finalize
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_8_2_8_16_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_8_2_8_16">
            <span class="md-nav__icon md-icon"></span>
            Cupti finalize
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../others/cupti-tutorial/cupti_finalize/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    CUPTI 终结和清理教程
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_8_2_8_17" >
        
          
          <label class="md-nav__link" for="__nav_8_2_8_17" id="__nav_8_2_8_17_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Cupti metric properties
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_8_2_8_17_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_8_2_8_17">
            <span class="md-nav__icon md-icon"></span>
            Cupti metric properties
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../others/cupti-tutorial/cupti_metric_properties/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    CUPTI 指标属性教程
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_8_2_8_18" >
        
          
          <label class="md-nav__link" for="__nav_8_2_8_18" id="__nav_8_2_8_18_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Cupti nvtx
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_8_2_8_18_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_8_2_8_18">
            <span class="md-nav__icon md-icon"></span>
            Cupti nvtx
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../others/cupti-tutorial/cupti_nvtx/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    CUPTI NVTX 集成教程
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_8_2_8_19" >
        
          
          <label class="md-nav__link" for="__nav_8_2_8_19" id="__nav_8_2_8_19_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Cupti query
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_8_2_8_19_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_8_2_8_19">
            <span class="md-nav__icon md-icon"></span>
            Cupti query
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../others/cupti-tutorial/cupti_query/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    CUPTI 查询 API 教程
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_8_2_8_20" >
        
          
          <label class="md-nav__link" for="__nav_8_2_8_20" id="__nav_8_2_8_20_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Cupti trace injection
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_8_2_8_20_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_8_2_8_20">
            <span class="md-nav__icon md-icon"></span>
            Cupti trace injection
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../others/cupti-tutorial/cupti_trace_injection/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    CUPTI 跟踪注入教程
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_8_2_8_21" >
        
          
          <label class="md-nav__link" for="__nav_8_2_8_21" id="__nav_8_2_8_21_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Event multi gpu
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_8_2_8_21_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_8_2_8_21">
            <span class="md-nav__icon md-icon"></span>
            Event multi gpu
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../others/cupti-tutorial/event_multi_gpu/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    CUPTI 多 GPU 事件分析教程
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_8_2_8_22" >
        
          
          <label class="md-nav__link" for="__nav_8_2_8_22" id="__nav_8_2_8_22_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Event sampling
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_8_2_8_22_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_8_2_8_22">
            <span class="md-nav__icon md-icon"></span>
            Event sampling
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../others/cupti-tutorial/event_sampling/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    CUPTI 事件采样教程
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_8_2_8_23" >
        
          
          <label class="md-nav__link" for="__nav_8_2_8_23" id="__nav_8_2_8_23_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Extensions
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_8_2_8_23_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_8_2_8_23">
            <span class="md-nav__icon md-icon"></span>
            Extensions
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../others/cupti-tutorial/extensions/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    CUPTI 扩展工具
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_8_2_8_24" >
        
          
          <label class="md-nav__link" for="__nav_8_2_8_24" id="__nav_8_2_8_24_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Nested range profiling
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_8_2_8_24_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_8_2_8_24">
            <span class="md-nav__icon md-icon"></span>
            Nested range profiling
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../others/cupti-tutorial/nested_range_profiling/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    CUPTI 嵌套范围分析教程
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_8_2_8_25" >
        
          
          <label class="md-nav__link" for="__nav_8_2_8_25" id="__nav_8_2_8_25_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Nvlink bandwidth
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_8_2_8_25_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_8_2_8_25">
            <span class="md-nav__icon md-icon"></span>
            Nvlink bandwidth
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../others/cupti-tutorial/nvlink_bandwidth/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    CUPTI NVLink 带宽监控教程
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_8_2_8_26" >
        
          
          <label class="md-nav__link" for="__nav_8_2_8_26" id="__nav_8_2_8_26_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Openacc trace
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_8_2_8_26_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_8_2_8_26">
            <span class="md-nav__icon md-icon"></span>
            Openacc trace
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../others/cupti-tutorial/openacc_trace/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    CUPTI OpenACC 跟踪教程
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_8_2_8_27" >
        
          
          <label class="md-nav__link" for="__nav_8_2_8_27" id="__nav_8_2_8_27_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Pc sampling
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_8_2_8_27_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_8_2_8_27">
            <span class="md-nav__icon md-icon"></span>
            Pc sampling
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../others/cupti-tutorial/pc_sampling/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    CUPTI PC 采样教程
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_8_2_8_28" >
        
          
          <label class="md-nav__link" for="__nav_8_2_8_28" id="__nav_8_2_8_28_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Pc sampling continuous
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_8_2_8_28_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_8_2_8_28">
            <span class="md-nav__icon md-icon"></span>
            Pc sampling continuous
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../others/cupti-tutorial/pc_sampling_continuous/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    CUPTI 程序计数器 (PC) 连续采样教程
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_8_2_8_29" >
        
          
          <label class="md-nav__link" for="__nav_8_2_8_29" id="__nav_8_2_8_29_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Pc sampling start stop
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_8_2_8_29_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_8_2_8_29">
            <span class="md-nav__icon md-icon"></span>
            Pc sampling start stop
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../others/cupti-tutorial/pc_sampling_start_stop/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    CUPTI PC 采样启动/停止控制教程
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_8_2_8_30" >
        
          
          <label class="md-nav__link" for="__nav_8_2_8_30" id="__nav_8_2_8_30_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Pc sampling utility
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_8_2_8_30_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_8_2_8_30">
            <span class="md-nav__icon md-icon"></span>
            Pc sampling utility
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../others/cupti-tutorial/pc_sampling_utility/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    CUPTI PC 采样分析工具教程
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_8_2_8_31" >
        
          
          <label class="md-nav__link" for="__nav_8_2_8_31" id="__nav_8_2_8_31_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Pm sampling
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_8_2_8_31_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_8_2_8_31">
            <span class="md-nav__icon md-icon"></span>
            Pm sampling
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../others/cupti-tutorial/pm_sampling/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    性能监控采样教程
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_8_2_8_32" >
        
          
          <label class="md-nav__link" for="__nav_8_2_8_32" id="__nav_8_2_8_32_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Profiling injection
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_8_2_8_32_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_8_2_8_32">
            <span class="md-nav__icon md-icon"></span>
            Profiling injection
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../others/cupti-tutorial/profiling_injection/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    CUPTI 分析 API 注入教程
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_8_2_8_33" >
        
          
          <label class="md-nav__link" for="__nav_8_2_8_33" id="__nav_8_2_8_33_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Range profiling
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_8_2_8_33_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_8_2_8_33">
            <span class="md-nav__icon md-icon"></span>
            Range profiling
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../others/cupti-tutorial/range_profiling/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    CUPTI 范围性能分析教程
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_8_2_8_34" >
        
          
          <label class="md-nav__link" for="__nav_8_2_8_34" id="__nav_8_2_8_34_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Sass metrics
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_8_2_8_34_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_8_2_8_34">
            <span class="md-nav__icon md-icon"></span>
            Sass metrics
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../others/cupti-tutorial/sass_metrics/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    SASS 指标收集教程
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_8_2_8_35" >
        
          
          <label class="md-nav__link" for="__nav_8_2_8_35" id="__nav_8_2_8_35_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Sass source map
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_8_2_8_35_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_8_2_8_35">
            <span class="md-nav__icon md-icon"></span>
            Sass source map
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../others/cupti-tutorial/sass_source_map/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    CUPTI SASS 源代码映射教程
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_8_2_8_36" >
        
          
          <label class="md-nav__link" for="__nav_8_2_8_36" id="__nav_8_2_8_36_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Unified memory
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_8_2_8_36_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_8_2_8_36">
            <span class="md-nav__icon md-icon"></span>
            Unified memory
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../others/cupti-tutorial/unified_memory/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    CUPTI 统一内存分析教程
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_8_2_8_37" >
        
          
          <label class="md-nav__link" for="__nav_8_2_8_37" id="__nav_8_2_8_37_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Userrange profiling
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_8_2_8_37_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_8_2_8_37">
            <span class="md-nav__icon md-icon"></span>
            Userrange profiling
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../others/cupti-tutorial/userrange_profiling/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    CUPTI 用户范围分析教程
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_8_2_9" >
        
          
          <label class="md-nav__link" for="__nav_8_2_9" id="__nav_8_2_9_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Miscellaneous
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_8_2_9_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_8_2_9">
            <span class="md-nav__icon md-icon"></span>
            Miscellaneous
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../others/miscellaneous/bpftime-kubecon-draft/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    eBPF and Wasm: Unifying Userspace Extensions With Bpftime - Yusheng Zheng, eunomia-bpf
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../others/miscellaneous/bpftime-roadmap/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    About bpftime - bpftime ideas
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../others/miscellaneous/ebpf-fuse/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    基于内核态/用户态 eBPF 实现高性能用户态文件系统功能 - 操作系统大赛赛题
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../others/miscellaneous/ebpf-gpu/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    使用 eBPF 对 AI/ML 工作负载进行追踪和性能分析 - 操作系统大赛赛题
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../others/miscellaneous/ebpf-linux/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Project Proposal for bpftime - eBPF Foundation
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../others/miscellaneous/ebpf-lsm-usm/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    实现内核与用户态共同工作的 eBPF 安全框架 - 操作系统大赛赛题
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../others/miscellaneous/ebpf-usecases/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Categorization of eBPF Hooks and Use Cases
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../others/miscellaneous/ebpf-userspace-port/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    将用户态 eBPF 扩展到 MacOS、Windows、FreeBSD 等更多平台 - 操作系统大赛赛题
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../others/miscellaneous/ebpf-uxdp-workshop-talk/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    uXDP: Frictionless XDP Deployments in Userspace — 12‑min talk
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../others/miscellaneous/gsoc-ospp/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    GSOC - OSPP draft proposal
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../others/miscellaneous/ideas/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    开源活动的可能想法 - eunomia-bpf 2024
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../others/miscellaneous/linux-plumbers-talk/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    bpftime talk at linux plumbers 2025
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../others/miscellaneous/osdi-talk/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Speech Script for OSDI 2025 bpftime talk "Extending Applications Safely and Efficiently"
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../others/miscellaneous/roadmap/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    bpftime roadmap and ideas for 2024
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../others/miscellaneous/talk-ebpf-summit/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    eBPF Summit 2025 bpftime talk
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../others/miscellaneous/wasm-bpf-kubecon/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Securing and Simplifying eBPF Deployments with WebAssembly
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../others/miscellaneous/wasm-bpf-talk/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    talk draft in kubecon
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#contents" class="md-nav__link">
    <span class="md-ellipsis">
      Contents
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


  
    <a href="https://github.com/eunomia-bpf/eunomia.dev/tree/main/docs/tutorials/bcc-documents/reference_guide_en.md" title="Edit this page" class="md-content__button md-icon" rel="edit">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M10 20H6V4h7v5h5v3.1l2-2V8l-6-6H6c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h4zm10.2-7c.1 0 .3.1.4.2l1.3 1.3c.2.2.2.6 0 .8l-1 1-2.1-2.1 1-1c.1-.1.2-.2.4-.2m0 3.9L14.1 23H12v-2.1l6.1-6.1z"/></svg>
    </a>
  
  
    
      
    
    <a href="https://github.com/eunomia-bpf/eunomia.dev/tree/main/docs/tutorials/bcc-documents/reference_guide_en.md" title="View source of this page" class="md-content__button md-icon">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 18c.56 0 1 .44 1 1s-.44 1-1 1-1-.44-1-1 .44-1 1-1m0-3c-2.73 0-5.06 1.66-6 4 .94 2.34 3.27 4 6 4s5.06-1.66 6-4c-.94-2.34-3.27-4-6-4m0 6.5a2.5 2.5 0 0 1-2.5-2.5 2.5 2.5 0 0 1 2.5-2.5 2.5 2.5 0 0 1 2.5 2.5 2.5 2.5 0 0 1-2.5 2.5M9.27 20H6V4h7v5h5v4.07c.7.08 1.36.25 2 .49V8l-6-6H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h4.5a8.2 8.2 0 0 1-1.23-2"/></svg>
    </a>
  


<h1 id="bcc-reference-guide">bcc Reference Guide</h1>
<p>Intended for search (Ctrl-F) and reference. For tutorials, start with <a href="../tutorial/">tutorial.md</a>.</p>
<p>This guide is incomplete. If something feels missing, check the bcc and kernel source. And if you confirm we're missing something, please send a pull request to fix it, and help out everyone.</p>
<h2 id="contents">Contents</h2>
<ul>
<li>
<p><a href="#bpf-c">BPF C</a></p>
<ul>
<li><a href="#events--arguments">Events &amp; Arguments</a><ul>
<li><a href="#1-kprobes">1. kprobes</a></li>
<li><a href="#2-kretprobes">2. kretprobes</a></li>
<li><a href="#3-tracepoints">3. Tracepoints</a></li>
<li><a href="#4-uprobes">4. uprobes</a></li>
<li><a href="#5-uretprobes">5. uretprobes</a></li>
<li><a href="#6-usdt-probes">6. USDT probes</a></li>
<li><a href="#7-raw-tracepoints">7. Raw Tracepoints</a></li>
<li><a href="#8-system-call-tracepoints">8. system call tracepoints</a></li>
<li><a href="#9-kfuncs">9. kfuncs</a></li>
<li><a href="#10-kretfuncs">10. kretfuncs</a></li>
<li><a href="#11-lsm-probes">11. lsm probes</a></li>
<li><a href="#12-bpf-iterators">12. bpf iterators</a></li>
</ul>
</li>
<li><a href="#data">Data</a><ul>
<li><a href="#1-bpf_probe_read_kernel">1. bpf_probe_read_kernel()</a></li>
<li><a href="#2-bpf_probe_read_kernel_str">2. bpf_probe_read_kernel_str()</a></li>
<li><a href="#3-bpf_ktime_get_ns">3. bpf_ktime_get_ns()</a></li>
<li><a href="#4-bpf_get_current_pid_tgid">4. bpf_get_current_pid_tgid()</a></li>
<li><a href="#5-bpf_get_current_uid_gid">5. bpf_get_current_uid_gid()</a></li>
<li><a href="#6-bpf_get_current_comm">6. bpf_get_current_comm()</a></li>
<li><a href="#7-bpf_get_current_task">7. bpf_get_current_task()</a></li>
<li><a href="#8-bpf_log2l">8. bpf_log2l()</a></li>
<li><a href="#9-bpf_get_prandom_u32">9. bpf_get_prandom_u32()</a></li>
<li><a href="#10-bpf_probe_read_user">10. bpf_probe_read_user()</a></li>
<li><a href="#11-bpf_probe_read_user_str">11. bpf_probe_read_user_str()</a></li>
<li><a href="#12-bpf_get_ns_current_pid_tgid">12. bpf_get_ns_current_pid_tgid()</a></li>
</ul>
</li>
<li><a href="#debugging">Debugging</a><ul>
<li><a href="#1-bpf_override_return">1. bpf_override_return()</a></li>
</ul>
</li>
<li><a href="#output">Output</a><ul>
<li><a href="#1-bpf_trace_printk">1. bpf_trace_printk()</a></li>
<li><a href="#2-bpf_perf_output">2. BPF_PERF_OUTPUT</a></li>
<li><a href="#3-perf_submit">3. perf_submit()</a></li>
<li><a href="#4-perf_submit_skb">4. perf_submit_skb()</a></li>
<li><a href="#5-bpf_ringbuf_output">5. BPF_RINGBUF_OUTPUT</a></li>
<li><a href="#6-ringbuf_output">6. ringbuf_output()</a></li>
<li><a href="#7-ringbuf_reserve">7. ringbuf_reserve()</a></li>
<li><a href="#8-ringbuf_submit">8. ringbuf_submit()</a></li>
<li><a href="#9-ringbuf_discard">9. ringbuf_discard()</a></li>
</ul>
</li>
<li><a href="#maps">Maps</a><ul>
<li><a href="#1-bpf_table">1. BPF_TABLE</a></li>
<li><a href="#2-bpf_hash">2. BPF_HASH</a></li>
<li><a href="#3-bpf_array">3. BPF_ARRAY</a></li>
<li><a href="#4-bpf_histogram">4. BPF_HISTOGRAM</a></li>
<li><a href="#5-bpf_stack_trace">5. BPF_STACK_TRACE</a></li>
<li><a href="#6-bpf_perf_array">6. BPF_PERF_ARRAY</a></li>
<li><a href="#7-bpf_percpu_hash">7. BPF_PERCPU_HASH</a></li>
<li><a href="#8-bpf_percpu_array">8. BPF_PERCPU_ARRAY</a></li>
<li><a href="#9-bpf_lpm_trie">9. BPF_LPM_TRIE</a></li>
<li><a href="#10-bpf_prog_array">10. BPF_PROG_ARRAY</a></li>
<li><a href="#11-bpf_devmap">11. BPF_DEVMAP</a></li>
<li><a href="#12-bpf_cpumap">12. BPF_CPUMAP</a></li>
<li><a href="#13-bpf_xskmap">13. BPF_XSKMAP</a></li>
<li><a href="#14-bpf_array_of_maps">14. BPF_ARRAY_OF_MAPS</a></li>
<li><a href="#15-bpf_hash_of_maps">15. BPF_HASH_OF_MAPS</a></li>
<li><a href="#16-bpf_stack">16. BPF_STACK</a></li>
<li><a href="#17-bpf_queue">17. BPF_QUEUE</a></li>
<li><a href="#18-bpf_sockhash">18. BPF_SOCKHASH</a></li>
<li><a href="#19-maplookup">19. map.lookup()</a></li>
<li><a href="#20-maplookup_or_try_init">20. map.lookup_or_try_init()</a></li>
<li><a href="#21-mapdelete">21. map.delete()</a></li>
<li><a href="#22-mapupdate">22. map.update()</a></li>
<li><a href="#23-mapinsert">23. map.insert()</a></li>
<li><a href="#24-mapincrement">24. map.increment()</a></li>
<li><a href="#25-mapget_stackid">25. map.get_stackid()</a></li>
<li><a href="#26-mapperf_read">26. map.perf_read()</a></li>
<li><a href="#27-mapcall">27. map.call()</a></li>
<li><a href="#28-mapredirect_map">28. map.redirect_map()</a></li>
<li><a href="#29-mappush">29. map.push()</a></li>
<li><a href="#30-mappop">30. map.pop()</a></li>
<li><a href="#31-mappeek">31. map.peek()</a></li>
<li><a href="#32-mapsock_hash_update">32. map.sock_hash_update()</a></li>
<li><a href="#33-mapmsg_redirect_hash">33. map.msg_redirect_hash()</a></li>
<li><a href="#34-mapsk_redirect_hash">34. map.sk_redirect_hash()</a></li>
</ul>
</li>
<li><a href="#licensing">Licensing</a></li>
<li><a href="#rewriter">Rewriter</a></li>
</ul>
</li>
<li>
<p><a href="#bcc-python">bcc Python</a></p>
<ul>
<li><a href="#initialization">Initialization</a><ul>
<li><a href="#1-bpf">1. BPF</a></li>
<li><a href="#2-usdt">2. USDT</a></li>
</ul>
</li>
<li><a href="#events">Events</a><ul>
<li><a href="#1-attach_kprobe">1. attach_kprobe()</a></li>
<li><a href="#2-attach_kretprobe">2. attach_kretprobe()</a></li>
<li><a href="#3-attach_tracepoint">3. attach_tracepoint()</a></li>
<li><a href="#4-attach_uprobe">4. attach_uprobe()</a></li>
<li><a href="#5-attach_uretprobe">5. attach_uretprobe()</a></li>
<li><a href="#6-usdtenable_probe">6. USDT.enable_probe()</a></li>
<li><a href="#7-attach_raw_tracepoint">7. attach_raw_tracepoint()</a></li>
<li><a href="#8-attach_raw_socket">8. attach_raw_socket()</a></li>
<li><a href="#9-attach_xdp">9. attach_xdp()</a></li>
<li><a href="#10-attach_func">10. attach_func()</a></li>
<li><a href="#11-detach_func">11. detach_func()</a></li>
<li><a href="#12-detach_kprobe">12. detach_kprobe()</a></li>
<li><a href="#13-detach_kretprobe">13. detach_kretprobe()</a></li>
</ul>
</li>
<li><a href="#debug-output">Debug Output</a><ul>
<li><a href="#1-trace_print">1. trace_print()</a></li>
<li><a href="#2-trace_fields">2. trace_fields()</a></li>
</ul>
</li>
<li><a href="#output-apis">Output APIs</a><ul>
<li><a href="#1-perf_buffer_poll">1. perf_buffer_poll()</a></li>
<li><a href="#2-ring_buffer_poll">2. ring_buffer_poll()</a></li>
<li><a href="#3-ring_buffer_consume">3. ring_buffer_consume()</a></li>
</ul>
</li>
<li><a href="#map-apis">Map APIs</a><ul>
<li><a href="#1-get_table">1. get_table()</a></li>
<li><a href="#2-open_perf_buffer">2. open_perf_buffer()</a></li>
<li><a href="#3-items">3. items()</a></li>
<li><a href="#4-values">4. values()</a></li>
<li><a href="#5-clear">5. clear()</a></li>
<li><a href="#6-items_lookup_and_delete_batch">6. items_lookup_and_delete_batch()</a></li>
<li><a href="#7-items_lookup_batch">7. items_lookup_batch()</a></li>
<li><a href="#8-items_delete_batch">8. items_delete_batch()</a></li>
<li><a href="#9-items_update_batch">9. items_update_batch()</a></li>
<li><a href="#10-print_log2_hist">10. print_log2_hist()</a></li>
<li><a href="#11-print_linear_hist">11. print_linear_hist()</a></li>
<li><a href="#12-open_ring_buffer">12. open_ring_buffer()</a></li>
<li><a href="#13-push">13. push()</a></li>
<li><a href="#14-pop">14. pop()</a></li>
<li><a href="#15-peek">15. peek()</a></li>
</ul>
</li>
<li><a href="#helpers">Helpers</a><ul>
<li><a href="#1-ksym">1. ksym()</a></li>
<li><a href="#2-ksymname">2. ksymname()</a></li>
<li><a href="#3-sym">3. sym()</a></li>
<li><a href="#4-num_open_kprobes">4. num_open_kprobes()</a></li>
<li><a href="#5-get_syscall_fnname">5. get_syscall_fnname()</a></li>
</ul>
</li>
</ul>
</li>
<li>
<p><a href="#bpf-errors">BPF Errors</a></p>
<ul>
<li><a href="#1-invalid-mem-access">1. Invalid mem access</a></li>
<li><a href="#2-cannot-call-gpl-only-function-from-proprietary-program">2. Cannot call GPL only function from proprietary program</a></li>
</ul>
</li>
<li>
<p><a href="#Environment-Variables">Environment Variables</a></p>
<ul>
<li><a href="#1-kernel-source-directory">1. kernel source directory</a></li>
<li><a href="#2-kernel-version-overriding">2. kernel version overriding</a></li>
</ul>
</li>
</ul>
<h1 id="bpf-c">BPF C</h1>
<p>This section describes the C part of a bcc program.</p>
<h2 id="events-arguments">Events &amp; Arguments</h2>
<h3 id="1-kprobes">1. kprobes</h3>
<p>Syntax: kprobe__<em>kernel_function_name</em></p>
<p><code>kprobe__</code> is a special prefix that creates a kprobe (dynamic tracing of a kernel function call) for the kernel function name provided as the remainder. You can also use kprobes by declaring a normal C function, then using the Python <code>BPF.attach_kprobe()</code> (covered later) to associate it with a kernel function.</p>
<p>Arguments are specified on the function declaration: kprobe__<em>kernel_function_name</em>(struct pt_regs <em>ctx [, </em>argument1* ...])</p>
<p>For example:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="kt">int</span><span class="w"> </span><span class="nf">kprobe__tcp_v4_connect</span><span class="p">(</span><span class="k">struct</span><span class="w"> </span><span class="nc">pt_regs</span><span class="w"> </span><span class="o">*</span><span class="n">ctx</span><span class="p">,</span><span class="w"> </span><span class="k">struct</span><span class="w"> </span><span class="nc">sock</span><span class="w"> </span><span class="o">*</span><span class="n">sk</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a><span class="w">    </span><span class="p">[...]</span>
<a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a><span class="p">}</span>
</code></pre></div>
<p>This instruments the tcp_v4_connect() kernel function using a kprobe, with the following arguments:</p>
<ul>
<li><code>struct pt_regs *ctx</code>: Registers and BPF context.</li>
<li><code>struct sock *sk</code>: First argument to tcp_v4_connect().</li>
</ul>
<p>The first argument is always <code>struct pt_regs *</code>, the remainder are the arguments to the function (they don't need to be specified, if you don't intend to use them).</p>
<p>Examples in situ:
<a href="https://github.com/iovisor/bcc/blob/4afa96a71c5dbfc4c507c3355e20baa6c184a3a8/examples/tracing/tcpv4connect.py#L28">code</a> (<a href="https://github.com/iovisor/bcc/blob/5bd0eb21fd148927b078deb8ac29fff2fb044b66/examples/tracing/tcpv4connect_example.txt#L8">output</a>),
<a href="https://github.com/iovisor/bcc/commit/310ab53710cfd46095c1f6b3e44f1dbc8d1a41d8#diff-8cd1822359ffee26e7469f991ce0ef00R26">code</a> (<a href="https://github.com/iovisor/bcc/blob/3b9679a3bd9b922c736f6061dc65cb56de7e0250/examples/tracing/bitehist_example.txt#L6">output</a>)</p>
<!--- I can't add search links here, since github currently cannot handle partial-word searches needed for "kprobe__" --->

<h3 id="2-kretprobes">2. kretprobes</h3>
<p>Syntax: kretprobe__<em>kernel_function_name</em></p>
<p><code>kretprobe__</code> is a special prefix that creates a kretprobe (dynamic tracing of a kernel function return) for the kernel function name provided as the remainder. You can also use kretprobes by declaring a normal C function, then using the Python <code>BPF.attach_kretprobe()</code> (covered later) to associate it with a kernel function.</p>
<p>Return value is available as <code>PT_REGS_RC(ctx)</code>, given a function declaration of: kretprobe__<em>kernel_function_name</em>(struct pt_regs *ctx)</p>
<p>For example:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a><span class="kt">int</span><span class="w"> </span><span class="nf">kretprobe__tcp_v4_connect</span><span class="p">(</span><span class="k">struct</span><span class="w"> </span><span class="nc">pt_regs</span><span class="w"> </span><span class="o">*</span><span class="n">ctx</span><span class="p">)</span>
<a id="__codelineno-1-2" name="__codelineno-1-2" href="#__codelineno-1-2"></a><span class="p">{</span>
<a id="__codelineno-1-3" name="__codelineno-1-3" href="#__codelineno-1-3"></a><span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">ret</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">PT_REGS_RC</span><span class="p">(</span><span class="n">ctx</span><span class="p">);</span>
<a id="__codelineno-1-4" name="__codelineno-1-4" href="#__codelineno-1-4"></a><span class="w">    </span><span class="p">[...]</span>
<a id="__codelineno-1-5" name="__codelineno-1-5" href="#__codelineno-1-5"></a><span class="p">}</span>
</code></pre></div>
<p>This instruments the return of the tcp_v4_connect() kernel function using a kretprobe, and stores the return value in <code>ret</code>.</p>
<p>Examples in situ:
<a href="https://github.com/iovisor/bcc/blob/4afa96a71c5dbfc4c507c3355e20baa6c184a3a8/examples/tracing/tcpv4connect.py#L38">code</a> (<a href="https://github.com/iovisor/bcc/blob/5bd0eb21fd148927b078deb8ac29fff2fb044b66/examples/tracing/tcpv4connect_example.txt#L8">output</a>)</p>
<h3 id="3-tracepoints">3. Tracepoints</h3>
<p>Syntax: TRACEPOINT_PROBE(<em>category</em>, <em>event</em>)</p>
<p>This is a macro that instruments the tracepoint defined by <em>category</em>:<em>event</em>.</p>
<p>The tracepoint name is <code>&lt;category&gt;:&lt;event&gt;</code>.
The probe function name is <code>tracepoint__&lt;category&gt;__&lt;event&gt;</code>.</p>
<p>Arguments are available in an <code>args</code> struct, which are the tracepoint arguments. One way to list these is to cat the relevant format file under /sys/kernel/debug/tracing/events/<em>category</em>/<em>event</em>/format.</p>
<p>The <code>args</code> struct can be used in place of <code>ctx</code> in each functions requiring a context as an argument. This includes notably <a href="#3-perf_submit">perf_submit()</a>.</p>
<p>For example:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-2-1" name="__codelineno-2-1" href="#__codelineno-2-1"></a><span class="n">TRACEPOINT_PROBE</span><span class="p">(</span><span class="n">random</span><span class="p">,</span><span class="w"> </span><span class="n">urandom_read</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-2-2" name="__codelineno-2-2" href="#__codelineno-2-2"></a><span class="w">    </span><span class="c1">// args is from /sys/kernel/debug/tracing/events/random/urandom_read/format</span>
<a id="__codelineno-2-3" name="__codelineno-2-3" href="#__codelineno-2-3"></a><span class="w">    </span><span class="n">bpf_trace_printk</span><span class="p">(</span><span class="s">&quot;%d</span><span class="se">\\</span><span class="s">n&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">args</span><span class="o">-&gt;</span><span class="n">got_bits</span><span class="p">);</span>
<a id="__codelineno-2-4" name="__codelineno-2-4" href="#__codelineno-2-4"></a><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<a id="__codelineno-2-5" name="__codelineno-2-5" href="#__codelineno-2-5"></a><span class="p">}</span>
</code></pre></div>
<p>This instruments the tracepoint <code>random:urandom_read tracepoint</code>, and prints the tracepoint argument <code>got_bits</code>.
When using Python API, this probe is automatically attached to the right tracepoint target.
For C++, this tracepoint probe can be attached by specifying the tracepoint target and function name explicitly:
<code>BPF::attach_tracepoint("random:urandom_read", "tracepoint__random__urandom_read")</code>
Note the name of the probe function defined above is <code>tracepoint__random__urandom_read</code>.</p>
<p>Examples in situ:
<a href="https://github.com/iovisor/bcc/blob/a4159da8c4ea8a05a3c6e402451f530d6e5a8b41/examples/tracing/urandomread.py#L19">code</a> (<a href="https://github.com/iovisor/bcc/commit/e422f5e50ecefb96579b6391a2ada7f6367b83c4#diff-41e5ecfae4a3b38de5f4e0887ed160e5R10">output</a>),
<a href="https://github.com/iovisor/bcc/tree/master/examples">search /examples</a>,
<a href="https://github.com/iovisor/bcc/tree/master/tools">search /tools</a></p>
<h3 id="4-uprobes">4. uprobes</h3>
<p>These are instrumented by declaring a normal function in C, then associating it as a uprobe probe in Python via <code>BPF.attach_uprobe()</code> (covered later).</p>
<p>Arguments can be examined using <code>PT_REGS_PARM</code> macros.</p>
<p>For example:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-3-1" name="__codelineno-3-1" href="#__codelineno-3-1"></a><span class="kt">int</span><span class="w"> </span><span class="nf">count</span><span class="p">(</span><span class="k">struct</span><span class="w"> </span><span class="nc">pt_regs</span><span class="w"> </span><span class="o">*</span><span class="n">ctx</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-3-2" name="__codelineno-3-2" href="#__codelineno-3-2"></a><span class="w">    </span><span class="kt">char</span><span class="w"> </span><span class="n">buf</span><span class="p">[</span><span class="mi">64</span><span class="p">];</span>
<a id="__codelineno-3-3" name="__codelineno-3-3" href="#__codelineno-3-3"></a><span class="w">    </span><span class="n">bpf_probe_read_user</span><span class="p">(</span><span class="o">&amp;</span><span class="n">buf</span><span class="p">,</span><span class="w"> </span><span class="k">sizeof</span><span class="p">(</span><span class="n">buf</span><span class="p">),</span><span class="w"> </span><span class="p">(</span><span class="kt">void</span><span class="w"> </span><span class="o">*</span><span class="p">)</span><span class="n">PT_REGS_PARM1</span><span class="p">(</span><span class="n">ctx</span><span class="p">));</span>
<a id="__codelineno-3-4" name="__codelineno-3-4" href="#__codelineno-3-4"></a><span class="w">    </span><span class="n">bpf_trace_printk</span><span class="p">(</span><span class="s">&quot;%s %d&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">buf</span><span class="p">,</span><span class="w"> </span><span class="n">PT_REGS_PARM2</span><span class="p">(</span><span class="n">ctx</span><span class="p">));</span>
<a id="__codelineno-3-5" name="__codelineno-3-5" href="#__codelineno-3-5"></a><span class="w">    </span><span class="k">return</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span>
<a id="__codelineno-3-6" name="__codelineno-3-6" href="#__codelineno-3-6"></a><span class="p">}</span>
</code></pre></div>
<p>This reads the first argument as a string, and then prints it with the second argument as an integer.</p>
<p>Examples in situ:
<a href="https://github.com/iovisor/bcc/blob/4afa96a71c5dbfc4c507c3355e20baa6c184a3a8/examples/tracing/strlen_count.py#L26">code</a></p>
<h3 id="5-uretprobes">5. uretprobes</h3>
<p>These are instrumented by declaring a normal function in C, then associating it as a uretprobe probe in Python via <code>BPF.attach_uretprobe()</code> (covered later).</p>
<p>Return value is available as <code>PT_REGS_RC(ctx)</code>, given a function declaration of: <em>function_name</em>(struct pt_regs *ctx)</p>
<p>For example:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-4-1" name="__codelineno-4-1" href="#__codelineno-4-1"></a><span class="n">BPF_HISTOGRAM</span><span class="p">(</span><span class="n">dist</span><span class="p">);</span>
<a id="__codelineno-4-2" name="__codelineno-4-2" href="#__codelineno-4-2"></a><span class="kt">int</span><span class="w"> </span><span class="nf">count</span><span class="p">(</span><span class="k">struct</span><span class="w"> </span><span class="nc">pt_regs</span><span class="w"> </span><span class="o">*</span><span class="n">ctx</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-4-3" name="__codelineno-4-3" href="#__codelineno-4-3"></a><span class="w">    </span><span class="n">dist</span><span class="p">.</span><span class="n">increment</span><span class="p">(</span><span class="n">PT_REGS_RC</span><span class="p">(</span><span class="n">ctx</span><span class="p">));</span>
<a id="__codelineno-4-4" name="__codelineno-4-4" href="#__codelineno-4-4"></a><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<a id="__codelineno-4-5" name="__codelineno-4-5" href="#__codelineno-4-5"></a><span class="p">}</span>
</code></pre></div>
<p>This increments the bucket in the <code>dist</code> histogram that is indexed by the return value.</p>
<p>Examples in situ:
<a href="https://github.com/iovisor/bcc/blob/4afa96a71c5dbfc4c507c3355e20baa6c184a3a8/examples/tracing/strlen_hist.py#L39">code</a> (<a href="https://github.com/iovisor/bcc/blob/4afa96a71c5dbfc4c507c3355e20baa6c184a3a8/examples/tracing/strlen_hist.py#L15">output</a>),
<a href="https://github.com/iovisor/bcc/blob/4afa96a71c5dbfc4c507c3355e20baa6c184a3a8/tools/bashreadline.py">code</a> (<a href="https://github.com/iovisor/bcc/commit/aa87997d21e5c1a6a20e2c96dd25eb92adc8e85d#diff-2fd162f9e594206f789246ce97d62cf0R7">output</a>)</p>
<h3 id="6-usdt-probes">6. USDT probes</h3>
<p>These are User Statically-Defined Tracing (USDT) probes, which may be placed in some applications or libraries to provide a user-level equivalent of tracepoints. The primary BPF method provided for USDT support method is <code>enable_probe()</code>. USDT probes are instrumented by declaring a normal function in C, then associating it as a USDT probe in Python via <code>USDT.enable_probe()</code>.</p>
<p>Arguments can be read via: bpf_usdt_readarg(<em>index</em>, ctx, &amp;addr)</p>
<p>For example:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-5-1" name="__codelineno-5-1" href="#__codelineno-5-1"></a><span class="kt">int</span><span class="w"> </span><span class="nf">do_trace</span><span class="p">(</span><span class="k">struct</span><span class="w"> </span><span class="nc">pt_regs</span><span class="w"> </span><span class="o">*</span><span class="n">ctx</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-5-2" name="__codelineno-5-2" href="#__codelineno-5-2"></a><span class="w">    </span><span class="kt">uint64_t</span><span class="w"> </span><span class="n">addr</span><span class="p">;</span>
<a id="__codelineno-5-3" name="__codelineno-5-3" href="#__codelineno-5-3"></a><span class="w">    </span><span class="kt">char</span><span class="w"> </span><span class="n">path</span><span class="p">[</span><span class="mi">128</span><span class="p">];</span>
<a id="__codelineno-5-4" name="__codelineno-5-4" href="#__codelineno-5-4"></a><span class="w">    </span><span class="n">bpf_usdt_readarg</span><span class="p">(</span><span class="mi">6</span><span class="p">,</span><span class="w"> </span><span class="n">ctx</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">addr</span><span class="p">);</span>
<a id="__codelineno-5-5" name="__codelineno-5-5" href="#__codelineno-5-5"></a><span class="w">    </span><span class="n">bpf_probe_read_user</span><span class="p">(</span><span class="o">&amp;</span><span class="n">path</span><span class="p">,</span><span class="w"> </span><span class="k">sizeof</span><span class="p">(</span><span class="n">path</span><span class="p">),</span><span class="w"> </span><span class="p">(</span><span class="kt">void</span><span class="w"> </span><span class="o">*</span><span class="p">)</span><span class="n">addr</span><span class="p">);</span>
<a id="__codelineno-5-6" name="__codelineno-5-6" href="#__codelineno-5-6"></a><span class="w">    </span><span class="n">bpf_trace_printk</span><span class="p">(</span><span class="s">&quot;path:%s</span><span class="se">\\</span><span class="s">n&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">path</span><span class="p">);</span>
<a id="__codelineno-5-7" name="__codelineno-5-7" href="#__codelineno-5-7"></a><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<a id="__codelineno-5-8" name="__codelineno-5-8" href="#__codelineno-5-8"></a><span class="p">};</span>
</code></pre></div>
<p>This reads the sixth USDT argument, and then pulls it in as a string to <code>path</code>.</p>
<p>When initializing USDTs via the third argument of <code>BPF::init</code> in the C API, if any USDT fails to <code>init</code>, entire <code>BPF::init</code> will fail. If you're OK with some USDTs failing to <code>init</code>, use <code>BPF::init_usdt</code> before calling <code>BPF::init</code>.</p>
<p>Examples in situ:
<a href="https://github.com/iovisor/bcc/commit/4f88a9401357d7b75e917abd994aa6ea97dda4d3#diff-04a7cad583be5646080970344c48c1f4R24">code</a>,
<a href="https://github.com/iovisor/bcc/tree/master/examples">search /examples</a>,
<a href="https://github.com/iovisor/bcc/tree/master/tools">search /tools</a></p>
<h3 id="7-raw-tracepoints">7. Raw Tracepoints</h3>
<p>Syntax: RAW_TRACEPOINT_PROBE(<em>event</em>)</p>
<p>This is a macro that instruments the raw tracepoint defined by <em>event</em>.</p>
<p>The argument is a pointer to struct <code>bpf_raw_tracepoint_args</code>, which is defined in <a href="https://github.com/iovisor/bcc/blob/master/src/cc/compat/linux/virtual_bpf.h">bpf.h</a>.  The struct field <code>args</code> contains all parameters of the raw tracepoint where you can found at linux tree <a href="https://github.com/torvalds/linux/tree/master/include/trace/events">include/trace/events</a>
directory.</p>
<p>For example:
<div class="highlight"><pre><span></span><code><a id="__codelineno-6-1" name="__codelineno-6-1" href="#__codelineno-6-1"></a><span class="n">RAW_TRACEPOINT_PROBE</span><span class="p">(</span><span class="n">sched_switch</span><span class="p">)</span>
<a id="__codelineno-6-2" name="__codelineno-6-2" href="#__codelineno-6-2"></a><span class="p">{</span>
<a id="__codelineno-6-3" name="__codelineno-6-3" href="#__codelineno-6-3"></a><span class="w">    </span><span class="c1">// TP_PROTO(bool preempt, struct task_struct *prev, struct task_struct *next)</span>
<a id="__codelineno-6-4" name="__codelineno-6-4" href="#__codelineno-6-4"></a><span class="w">    </span><span class="k">struct</span><span class="w"> </span><span class="nc">task_struct</span><span class="w"> </span><span class="o">*</span><span class="n">prev</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="k">struct</span><span class="w"> </span><span class="nc">task_struct</span><span class="w"> </span><span class="o">*</span><span class="p">)</span><span class="n">ctx</span><span class="o">-&gt;</span><span class="n">args</span><span class="p">[</span><span class="mi">1</span><span class="p">];</span>
<a id="__codelineno-6-5" name="__codelineno-6-5" href="#__codelineno-6-5"></a><span class="w">    </span><span class="k">struct</span><span class="w"> </span><span class="nc">task_struct</span><span class="w"> </span><span class="o">*</span><span class="n">next</span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="k">struct</span><span class="w"> </span><span class="nc">task_struct</span><span class="w"> </span><span class="o">*</span><span class="p">)</span><span class="n">ctx</span><span class="o">-&gt;</span><span class="n">args</span><span class="p">[</span><span class="mi">2</span><span class="p">];</span>
<a id="__codelineno-6-6" name="__codelineno-6-6" href="#__codelineno-6-6"></a><span class="w">    </span><span class="n">s32</span><span class="w"> </span><span class="n">prev_tgid</span><span class="p">,</span><span class="w"> </span><span class="n">next_tgid</span><span class="p">;</span>
<a id="__codelineno-6-7" name="__codelineno-6-7" href="#__codelineno-6-7"></a>
<a id="__codelineno-6-8" name="__codelineno-6-8" href="#__codelineno-6-8"></a><span class="w">    </span><span class="n">bpf_probe_read_kernel</span><span class="p">(</span><span class="o">&amp;</span><span class="n">prev_tgid</span><span class="p">,</span><span class="w"> </span><span class="k">sizeof</span><span class="p">(</span><span class="n">prev</span><span class="o">-&gt;</span><span class="n">tgid</span><span class="p">),</span><span class="w"> </span><span class="o">&amp;</span><span class="n">prev</span><span class="o">-&gt;</span><span class="n">tgid</span><span class="p">);</span>
<a id="__codelineno-6-9" name="__codelineno-6-9" href="#__codelineno-6-9"></a><span class="w">    </span><span class="n">bpf_probe_read_kernel</span><span class="p">(</span><span class="o">&amp;</span><span class="n">next_tgid</span><span class="p">,</span><span class="w"> </span><span class="k">sizeof</span><span class="p">(</span><span class="n">next</span><span class="o">-&gt;</span><span class="n">tgid</span><span class="p">),</span><span class="w"> </span><span class="o">&amp;</span><span class="n">next</span><span class="o">-&gt;</span><span class="n">tgid</span><span class="p">);</span>
<a id="__codelineno-6-10" name="__codelineno-6-10" href="#__codelineno-6-10"></a><span class="w">    </span><span class="n">bpf_trace_printk</span><span class="p">(</span><span class="s">&quot;%d -&gt; %d</span><span class="se">\\</span><span class="s">n&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">prev_tgid</span><span class="p">,</span><span class="w"> </span><span class="n">next_tgid</span><span class="p">);</span>
<a id="__codelineno-6-11" name="__codelineno-6-11" href="#__codelineno-6-11"></a><span class="p">}</span>
</code></pre></div></p>
<p>This instruments the sched:sched_switch tracepoint, and prints the prev and next tgid.</p>
<p>Examples in situ:
<a href="https://github.com/iovisor/bcc/tree/master/tools">search /tools</a></p>
<h3 id="8-system-call-tracepoints">8. system call tracepoints</h3>
<p>Syntax: <code>syscall__SYSCALLNAME</code></p>
<p><code>syscall__</code> is a special prefix that creates a kprobe for the system call name provided as the remainder. You can use it by declaring a normal C function, then using the Python <code>BPF.get_syscall_fnname(SYSCALLNAME)</code> and <code>BPF.attach_kprobe()</code> to associate it.</p>
<p>Arguments are specified on the function declaration: <code>syscall__SYSCALLNAME(struct pt_regs *ctx, [, argument1 ...])</code>.</p>
<p>For example:
<div class="highlight"><pre><span></span><code><a id="__codelineno-7-1" name="__codelineno-7-1" href="#__codelineno-7-1"></a><span class="kt">int</span><span class="w"> </span><span class="nf">syscall__execve</span><span class="p">(</span><span class="k">struct</span><span class="w"> </span><span class="nc">pt_regs</span><span class="w"> </span><span class="o">*</span><span class="n">ctx</span><span class="p">,</span>
<a id="__codelineno-7-2" name="__codelineno-7-2" href="#__codelineno-7-2"></a><span class="w">    </span><span class="k">const</span><span class="w"> </span><span class="kt">char</span><span class="w"> </span><span class="n">__user</span><span class="w"> </span><span class="o">*</span><span class="n">filename</span><span class="p">,</span>
<a id="__codelineno-7-3" name="__codelineno-7-3" href="#__codelineno-7-3"></a><span class="w">    </span><span class="k">const</span><span class="w"> </span><span class="kt">char</span><span class="w"> </span><span class="n">__user</span><span class="w"> </span><span class="o">*</span><span class="k">const</span><span class="w"> </span><span class="n">__user</span><span class="w"> </span><span class="o">*</span><span class="n">__argv</span><span class="p">,</span>
<a id="__codelineno-7-4" name="__codelineno-7-4" href="#__codelineno-7-4"></a><span class="w">    </span><span class="k">const</span><span class="w"> </span><span class="kt">char</span><span class="w"> </span><span class="n">__user</span><span class="w"> </span><span class="o">*</span><span class="k">const</span><span class="w"> </span><span class="n">__user</span><span class="w"> </span><span class="o">*</span><span class="n">__envp</span><span class="p">)</span>
<a id="__codelineno-7-5" name="__codelineno-7-5" href="#__codelineno-7-5"></a><span class="p">{</span>
<a id="__codelineno-7-6" name="__codelineno-7-6" href="#__codelineno-7-6"></a><span class="w">    </span><span class="p">[...]</span>
<a id="__codelineno-7-7" name="__codelineno-7-7" href="#__codelineno-7-7"></a><span class="p">}</span>
</code></pre></div></p>
<p>This instruments the execve system call.</p>
<p>The first argument is always <code>struct pt_regs *</code>, the remainder are the arguments to the function (they don't need to be specified, if you don't intend to use them).</p>
<p>Corresponding Python code:
<div class="highlight"><pre><span></span><code><a id="__codelineno-8-1" name="__codelineno-8-1" href="#__codelineno-8-1"></a><span class="n">b</span> <span class="o">=</span> <span class="n">BPF</span><span class="p">(</span><span class="n">text</span><span class="o">=</span><span class="n">bpf_text</span><span class="p">)</span>
<a id="__codelineno-8-2" name="__codelineno-8-2" href="#__codelineno-8-2"></a><span class="n">execve_fnname</span> <span class="o">=</span> <span class="n">b</span><span class="o">.</span><span class="n">get_syscall_fnname</span><span class="p">(</span><span class="s2">&quot;execve&quot;</span><span class="p">)</span>
<a id="__codelineno-8-3" name="__codelineno-8-3" href="#__codelineno-8-3"></a><span class="n">b</span><span class="o">.</span><span class="n">attach_kprobe</span><span class="p">(</span><span class="n">event</span><span class="o">=</span><span class="n">execve_fnname</span><span class="p">,</span> <span class="n">fn_name</span><span class="o">=</span><span class="s2">&quot;syscall__execve&quot;</span><span class="p">)</span>
</code></pre></div></p>
<p>Examples in situ:
<a href="https://github.com/iovisor/bcc/blob/552658edda09298afdccc8a4b5e17311a2d8a771/tools/execsnoop.py#L101">code</a> (<a href="https://github.com/iovisor/bcc/blob/552658edda09298afdccc8a4b5e17311a2d8a771/tools/execsnoop_example.txt#L8">output</a>)</p>
<h3 id="9-kfuncs">9. kfuncs</h3>
<p>Syntax: KFUNC_PROBE(<em>function</em>, typeof(arg1) arg1, typeof(arg2) arge ...)</p>
<p>This is a macro that instruments the kernel function via trampoline
<em>before</em> the function is executed. It's defined by <em>function</em> name and
the function arguments defined as <em>argX</em>.</p>
<p>For example:
<div class="highlight"><pre><span></span><code><a id="__codelineno-9-1" name="__codelineno-9-1" href="#__codelineno-9-1"></a><span class="n">KFUNC_PROBE</span><span class="p">(</span><span class="n">do_sys_open</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">dfd</span><span class="p">,</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="kt">char</span><span class="w"> </span><span class="o">*</span><span class="n">filename</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">flags</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">mode</span><span class="p">)</span>
<a id="__codelineno-9-2" name="__codelineno-9-2" href="#__codelineno-9-2"></a><span class="p">{</span>
<a id="__codelineno-9-3" name="__codelineno-9-3" href="#__codelineno-9-3"></a><span class="w">    </span><span class="p">...</span>
</code></pre></div></p>
<p>This instruments the do_sys_open kernel function and make its arguments
accessible as standard argument values.</p>
<p>Examples in situ:
<a href="https://github.com/iovisor/bcc/tree/master/tools">search /tools</a></p>
<h3 id="10-kretfuncs">10. kretfuncs</h3>
<p>Syntax: KRETFUNC_PROBE(<em>event</em>, typeof(arg1) arg1, typeof(arg2) arge ..., int ret)</p>
<p>This is a macro that instruments the kernel function via trampoline
<em>after</em> the function is executed. It's defined by <em>function</em> name and
the function arguments defined as <em>argX</em>.</p>
<p>The last argument of the probe is the return value of the instrumented function.</p>
<p>For example:
<div class="highlight"><pre><span></span><code><a id="__codelineno-10-1" name="__codelineno-10-1" href="#__codelineno-10-1"></a><span class="n">KRETFUNC_PROBE</span><span class="p">(</span><span class="n">do_sys_open</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">dfd</span><span class="p">,</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="kt">char</span><span class="w"> </span><span class="o">*</span><span class="n">filename</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">flags</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">mode</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">ret</span><span class="p">)</span>
<a id="__codelineno-10-2" name="__codelineno-10-2" href="#__codelineno-10-2"></a><span class="p">{</span>
<a id="__codelineno-10-3" name="__codelineno-10-3" href="#__codelineno-10-3"></a><span class="w">    </span><span class="p">...</span>
</code></pre></div></p>
<p>This instruments the do_sys_open kernel function and make its arguments
accessible as standard argument values together with its return value.</p>
<p>Examples in situ:
<a href="https://github.com/iovisor/bcc/tree/master/tools">search /tools</a></p>
<h3 id="11-lsm-probes">11. LSM Probes</h3>
<p>Syntax: LSM_PROBE(<em>hook</em>, typeof(arg1) arg1, typeof(arg2) arg2 ...)</p>
<p>This is a macro that instruments an LSM hook as a BPF program. It can be
used to audit security events and implement MAC security policies in BPF.
It is defined by specifying the hook name followed by its arguments.</p>
<p>Hook names can be found in
<a href="https://github.com/torvalds/linux/blob/v5.15/include/linux/security.h#L260">include/linux/security.h</a>
by taking functions like <code>security_hookname</code> and taking just the <code>hookname</code> part.
For example, <code>security_bpf</code> would simply become <code>bpf</code>.</p>
<p>Unlike other BPF program types, the return value specified in an LSM probe
matters. A return value of 0 allows the hook to succeed, whereas
any non-zero return value will cause the hook to fail and deny the
security operation.</p>
<p>The following example instruments a hook that denies all future BPF operations:
<div class="highlight"><pre><span></span><code><a id="__codelineno-11-1" name="__codelineno-11-1" href="#__codelineno-11-1"></a><span class="n">LSM_PROBE</span><span class="p">(</span><span class="n">bpf</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">cmd</span><span class="p">,</span><span class="w"> </span><span class="k">union</span><span class="w"> </span><span class="nc">bpf_attr</span><span class="w"> </span><span class="o">*</span><span class="n">attr</span><span class="p">,</span><span class="w"> </span><span class="kt">unsigned</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">size</span><span class="p">)</span>
<a id="__codelineno-11-2" name="__codelineno-11-2" href="#__codelineno-11-2"></a><span class="p">{</span>
<a id="__codelineno-11-3" name="__codelineno-11-3" href="#__codelineno-11-3"></a><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="o">-</span><span class="n">EPERM</span><span class="p">;</span>
<a id="__codelineno-11-4" name="__codelineno-11-4" href="#__codelineno-11-4"></a><span class="p">}</span>
</code></pre></div></p>
<p>This instruments the <code>security_bpf</code> hook and causes it to return <code>-EPERM</code>.
Changing <code>return -EPERM</code> to <code>return 0</code> would cause the BPF program
to allow the operation instead.</p>
<p>LSM probes require at least a 5.7+ kernel with the following configuration options set:
- <code>CONFIG_BPF_LSM=y</code>
- <code>CONFIG_LSM</code> comma separated string must contain "bpf" (for example,
  <code>CONFIG_LSM="lockdown,yama,bpf"</code>)</p>
<p>Examples in situ:
<a href="https://github.com/iovisor/bcc/tree/master/tests">search /tests</a></p>
<h3 id="12-bpf-iterators">12. BPF ITERATORS</h3>
<p>Syntax: BPF_ITER(target)</p>
<p>This is a macro to define a program signature for a bpf iterator program. The argument <em>target</em> specifies what to iterate for the program.</p>
<p>Currently, kernel does not have interface to discover what targets are supported. A good place to find what is supported is in <a href="https://github.com/torvalds/linux/blob/master/tools/testing/selftests/bpf/prog_tests/bpf_iter.c">tools/testing/selftests/bpf/prog_test/bpf_iter.c</a> and some sample bpf iter programs are in <a href="https://github.com/torvalds/linux/tree/master/tools/testing/selftests/bpf/progs">tools/testing/selftests/bpf/progs</a> with file name prefix <em>bpf_iter</em>.</p>
<p>The following example defines a program for target <em>task</em>, which traverses all tasks in the kernel.
<div class="highlight"><pre><span></span><code><a id="__codelineno-12-1" name="__codelineno-12-1" href="#__codelineno-12-1"></a><span class="n">BPF_ITER</span><span class="p">(</span><span class="n">task</span><span class="p">)</span>
<a id="__codelineno-12-2" name="__codelineno-12-2" href="#__codelineno-12-2"></a><span class="p">{</span>
<a id="__codelineno-12-3" name="__codelineno-12-3" href="#__codelineno-12-3"></a><span class="w">  </span><span class="k">struct</span><span class="w"> </span><span class="nc">seq_file</span><span class="w"> </span><span class="o">*</span><span class="n">seq</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">ctx</span><span class="o">-&gt;</span><span class="n">meta</span><span class="o">-&gt;</span><span class="n">seq</span><span class="p">;</span>
<a id="__codelineno-12-4" name="__codelineno-12-4" href="#__codelineno-12-4"></a><span class="w">  </span><span class="k">struct</span><span class="w"> </span><span class="nc">task_struct</span><span class="w"> </span><span class="o">*</span><span class="n">task</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">ctx</span><span class="o">-&gt;</span><span class="n">task</span><span class="p">;</span>
<a id="__codelineno-12-5" name="__codelineno-12-5" href="#__codelineno-12-5"></a>
<a id="__codelineno-12-6" name="__codelineno-12-6" href="#__codelineno-12-6"></a><span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">task</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="p">(</span><span class="kt">void</span><span class="w"> </span><span class="o">*</span><span class="p">)</span><span class="mi">0</span><span class="p">)</span>
<a id="__codelineno-12-7" name="__codelineno-12-7" href="#__codelineno-12-7"></a><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<a id="__codelineno-12-8" name="__codelineno-12-8" href="#__codelineno-12-8"></a>
<a id="__codelineno-12-9" name="__codelineno-12-9" href="#__codelineno-12-9"></a><span class="w">  </span><span class="p">...</span><span class="w"> </span><span class="n">task</span><span class="o">-&gt;</span><span class="n">pid</span><span class="p">,</span><span class="w"> </span><span class="n">task</span><span class="o">-&gt;</span><span class="n">tgid</span><span class="p">,</span><span class="w"> </span><span class="n">task</span><span class="o">-&gt;</span><span class="n">comm</span><span class="p">,</span><span class="w"> </span><span class="p">...</span>
<a id="__codelineno-12-10" name="__codelineno-12-10" href="#__codelineno-12-10"></a><span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<a id="__codelineno-12-11" name="__codelineno-12-11" href="#__codelineno-12-11"></a><span class="p">}</span>
</code></pre></div></p>
<p>BPF iterators are introduced in 5.8 kernel for task, task_file, bpf_map, netlink_sock and ipv6_route . In 5.9, support is added to tcp/udp sockets and bpf map element (hashmap, arraymap and sk_local_storage_map) traversal.</p>
<h2 id="data">Data</h2>
<h3 id="1-bpf_probe_read_kernel">1. bpf_probe_read_kernel()</h3>
<p>Syntax: <code>int bpf_probe_read_kernel(void *dst, int size, const void *src)</code></p>
<p>Return: 0 on success</p>
<p>This copies size bytes from kernel address space to the BPF stack, so that BPF can later operate on it. For safety, all kernel memory reads must pass through bpf_probe_read_kernel(). This happens automatically in some cases, such as dereferencing kernel variables, as bcc will rewrite the BPF program to include the necessary bpf_probe_read_kernel().</p>
<p>Examples in situ:
<a href="https://github.com/iovisor/bcc/tree/master/examples">search /examples</a>,
<a href="https://github.com/iovisor/bcc/tree/master/tools">search /tools</a></p>
<h3 id="2-bpf_probe_read_kernel_str">2. bpf_probe_read_kernel_str()</h3>
<p>Syntax: <code>int bpf_probe_read_kernel_str(void *dst, int size, const void *src)</code></p>
<p>Return:
  - &gt; 0 length of the string including the trailing NULL on success
  - \&lt; 0 error</p>
<p>This copies a <code>NULL</code> terminated string from kernel address space to the BPF stack, so that BPF can later operate on it. In case the string length is smaller than size, the target is not padded with further <code>NULL</code> bytes. In case the string length is larger than size, just <code>size - 1</code> bytes are copied and the last byte is set to <code>NULL</code>.</p>
<p>Examples in situ:
<a href="https://github.com/iovisor/bcc/tree/master/examples">search /examples</a>,
<a href="https://github.com/iovisor/bcc/tree/master/tools">search /tools</a></p>
<h3 id="3-bpf_ktime_get_ns">3. bpf_ktime_get_ns()</h3>
<p>Syntax: <code>u64 bpf_ktime_get_ns(void)</code></p>
<p>Return: u64 number of nanoseconds. Starts at system boot time but stops during suspend.</p>
<p>Examples in situ:
<a href="https://github.com/iovisor/bcc/tree/master/examples">search /examples</a>,
<a href="https://github.com/iovisor/bcc/tree/master/tools">search /tools</a></p>
<h3 id="4-bpf_get_current_pid_tgid">4. bpf_get_current_pid_tgid()</h3>
<p>Syntax: <code>u64 bpf_get_current_pid_tgid(void)</code></p>
<p>Return: <code>current-&gt;tgid &lt;&lt; 32 | current-&gt;pid</code></p>
<p>Returns the process ID in the lower 32 bits (kernel's view of the PID, which in user space is usually presented as the thread ID), and the thread group ID in the upper 32 bits (what user space often thinks of as the PID). By directly setting this to a u32, we discard the upper 32 bits.</p>
<p>Examples in situ:
<a href="https://github.com/iovisor/bcc/tree/master/examples">search /examples</a>,
<a href="https://github.com/iovisor/bcc/tree/master/tools">search /tools</a></p>
<h3 id="5-bpf_get_current_uid_gid">5. bpf_get_current_uid_gid()</h3>
<p>Syntax: <code>u64 bpf_get_current_uid_gid(void)</code></p>
<p>Return: <code>current_gid &lt;&lt; 32 | current_uid</code></p>
<p>Returns the user ID and group IDs.</p>
<p>Examples in situ:
<a href="https://github.com/iovisor/bcc/tree/master/examples">search /examples</a>,
<a href="https://github.com/iovisor/bcc/tree/master/tools">search /tools</a></p>
<h3 id="6-bpf_get_current_comm">6. bpf_get_current_comm()</h3>
<p>Syntax: <code>bpf_get_current_comm(char *buf, int size_of_buf)</code></p>
<p>Return: 0 on success</p>
<p>Populates the first argument address with the current process name. It should be a pointer to a char array of at least size TASK_COMM_LEN, which is defined in linux/sched.h. For example:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-13-1" name="__codelineno-13-1" href="#__codelineno-13-1"></a><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;linux/sched.h&gt;</span>
<a id="__codelineno-13-2" name="__codelineno-13-2" href="#__codelineno-13-2"></a>
<a id="__codelineno-13-3" name="__codelineno-13-3" href="#__codelineno-13-3"></a><span class="kt">int</span><span class="w"> </span><span class="nf">do_trace</span><span class="p">(</span><span class="k">struct</span><span class="w"> </span><span class="nc">pt_regs</span><span class="w"> </span><span class="o">*</span><span class="n">ctx</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-13-4" name="__codelineno-13-4" href="#__codelineno-13-4"></a><span class="w">    </span><span class="kt">char</span><span class="w"> </span><span class="n">comm</span><span class="p">[</span><span class="n">TASK_COMM_LEN</span><span class="p">];</span>
<a id="__codelineno-13-5" name="__codelineno-13-5" href="#__codelineno-13-5"></a><span class="w">    </span><span class="n">bpf_get_current_comm</span><span class="p">(</span><span class="o">&amp;</span><span class="n">comm</span><span class="p">,</span><span class="w"> </span><span class="k">sizeof</span><span class="p">(</span><span class="n">comm</span><span class="p">));</span>
<a id="__codelineno-13-6" name="__codelineno-13-6" href="#__codelineno-13-6"></a><span class="p">[...]</span>
</code></pre></div>
<p>Examples in situ:
<a href="https://github.com/iovisor/bcc/tree/master/examples">search /examples</a>,
<a href="https://github.com/iovisor/bcc/tree/master/tools">search /tools</a></p>
<h3 id="7-bpf_get_current_task">7. bpf_get_current_task()</h3>
<p>Syntax: <code>bpf_get_current_task()</code></p>
<p>Return: current task as a pointer to struct task_struct.</p>
<p>Returns a pointer to the current task's task_struct object. This helper can be used to compute the on-CPU time for a process, identify kernel threads, get the current CPU's run queue, or retrieve many other pieces of information.</p>
<p>With Linux 4.13, due to issues with field randomization, you may need two #define directives before the includes:
<div class="highlight"><pre><span></span><code><a id="__codelineno-14-1" name="__codelineno-14-1" href="#__codelineno-14-1"></a><span class="cp">#define randomized_struct_fields_start  struct {</span>
<a id="__codelineno-14-2" name="__codelineno-14-2" href="#__codelineno-14-2"></a><span class="cp">#define randomized_struct_fields_end    };</span>
<a id="__codelineno-14-3" name="__codelineno-14-3" href="#__codelineno-14-3"></a><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;linux/sched.h&gt;</span>
<a id="__codelineno-14-4" name="__codelineno-14-4" href="#__codelineno-14-4"></a>
<a id="__codelineno-14-5" name="__codelineno-14-5" href="#__codelineno-14-5"></a><span class="kt">int</span><span class="w"> </span><span class="nf">do_trace</span><span class="p">(</span><span class="kt">void</span><span class="w"> </span><span class="o">*</span><span class="n">ctx</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-14-6" name="__codelineno-14-6" href="#__codelineno-14-6"></a><span class="w">    </span><span class="k">struct</span><span class="w"> </span><span class="nc">task_struct</span><span class="w"> </span><span class="o">*</span><span class="n">t</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="k">struct</span><span class="w"> </span><span class="nc">task_struct</span><span class="w"> </span><span class="o">*</span><span class="p">)</span><span class="n">bpf_get_current_task</span><span class="p">();</span>
<a id="__codelineno-14-7" name="__codelineno-14-7" href="#__codelineno-14-7"></a><span class="p">[...]</span>
</code></pre></div></p>
<p>Examples in situ:
<a href="https://github.com/iovisor/bcc/tree/master/examples">search /examples</a>,
<a href="https://github.com/iovisor/bcc/tree/master/tools">search /tools</a></p>
<h3 id="8-bpf_log2l">8. bpf_log2l()</h3>
<p>Syntax: <code>unsigned int bpf_log2l(unsigned long v)</code></p>
<p>Returns the log-2 of the provided value. This is often used to create indexes for histograms, to construct power-of-2 histograms.</p>
<p>Examples in situ:
<a href="https://github.com/iovisor/bcc/tree/master/examples">search /examples</a>,
<a href="https://github.com/iovisor/bcc/tree/master/tools">search /tools</a></p>
<h3 id="9-bpf_get_prandom_u32">9. bpf_get_prandom_u32()</h3>
<p>Syntax: <code>u32 bpf_get_prandom_u32()</code></p>
<p>Returns a pseudo-random u32.</p>
<p>Example in situ:
<a href="https://github.com/iovisor/bcc/tree/master/examples">search /examples</a>,
<a href="https://github.com/iovisor/bcc/tree/master/tools">search /tools</a></p>
<h3 id="10-bpf_probe_read_user">10. bpf_probe_read_user()</h3>
<p>Syntax: <code>int bpf_probe_read_user(void *dst, int size, const void *src)</code></p>
<p>Return: 0 on success</p>
<p>This attempts to safely read size bytes from user address space to the BPF stack, so that BPF can later operate on it. For safety, all user address space memory reads must pass through bpf_probe_read_user().</p>
<p>Examples in situ:
<a href="https://github.com/iovisor/bcc/tree/master/examples">search /examples</a>,
<a href="https://github.com/iovisor/bcc/tree/master/tools">search /tools</a></p>
<h3 id="11-bpf_probe_read_user_str">11. bpf_probe_read_user_str()</h3>
<p>Syntax: <code>int bpf_probe_read_user_str(void *dst, int size, const void *src)</code></p>
<p>Return:
  - &gt; 0 length of the string including the trailing NULL on success
  - \&lt; 0 error</p>
<p>This copies a <code>NULL</code> terminated string from user address space to the BPF stack, so that BPF can later operate on it. In case the string length is smaller than size, the target is not padded with further <code>NULL</code> bytes. In case the string length is larger than size, just <code>size - 1</code> bytes are copied and the last byte is set to <code>NULL</code>.</p>
<p>Examples in situ:
<a href="https://github.com/iovisor/bcc/tree/master/examples">search /examples</a>,
<a href="https://github.com/iovisor/bcc/tree/master/tools">search /tools</a></p>
<h3 id="12-bpf_get_ns_current_pid_tgid">12. bpf_get_ns_current_pid_tgid()</h3>
<p>Syntax: <code>u32 bpf_get_ns_current_pid_tgid(u64 dev, u64 ino, struct bpf_pidns_info* nsdata, u32 size)</code></p>
<p>Values for <em>pid</em> and <em>tgid</em> as seen from the current <em>namespace</em> will be returned in <em>nsdata</em>.</p>
<p>Return 0 on success, or one of the following in case of failure:</p>
<ul>
<li>
<p><strong>-EINVAL</strong> if dev and inum supplied don't match dev_t and inode number with nsfs of current task, or if dev conversion to dev_t lost high bits.</p>
</li>
<li>
<p><strong>-ENOENT</strong> if pidns does not exists for the current task.</p>
</li>
</ul>
<p>Examples in situ:
<a href="https://github.com/iovisor/bcc/tree/master/examples">search /examples</a>,
<a href="https://github.com/iovisor/bcc/tree/master/tools">search /tools</a></p>
<h2 id="debugging">Debugging</h2>
<h3 id="1-bpf_override_return">1. bpf_override_return()</h3>
<p>Syntax: <code>int bpf_override_return(struct pt_regs *, unsigned long rc)</code></p>
<p>Return: 0 on success</p>
<p>When used in a program attached to a function entry kprobe, causes the
execution of the function to be skipped, immediately returning <code>rc</code> instead.
This is used for targeted error injection.</p>
<p>bpf_override_return will only work when the kprobed function is whitelisted to
allow error injections. Whitelisting entails tagging a function with
<code>ALLOW_ERROR_INJECTION()</code> in the kernel source tree; see <code>io_ctl_init</code> for
an example. If the kprobed function is not whitelisted, the bpf program will
fail to attach with <code>ioctl(PERF_EVENT_IOC_SET_BPF): Invalid argument</code></p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-15-1" name="__codelineno-15-1" href="#__codelineno-15-1"></a><span class="kt">int</span><span class="w"> </span><span class="nf">kprobe__io_ctl_init</span><span class="p">(</span><span class="kt">void</span><span class="w"> </span><span class="o">*</span><span class="n">ctx</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-15-2" name="__codelineno-15-2" href="#__codelineno-15-2"></a><span class="w">    </span><span class="n">bpf_override_return</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span><span class="w"> </span><span class="o">-</span><span class="n">ENOMEM</span><span class="p">);</span>
<a id="__codelineno-15-3" name="__codelineno-15-3" href="#__codelineno-15-3"></a><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<a id="__codelineno-15-4" name="__codelineno-15-4" href="#__codelineno-15-4"></a><span class="p">}</span>
</code></pre></div>
<h2 id="output">Output</h2>
<h3 id="1-bpf_trace_printk">1. bpf_trace_printk()</h3>
<p>Syntax: <code>int bpf_trace_printk(const char *fmt, ...)</code></p>
<p>Return: 0 on success</p>
<p>A simple kernel facility for printf() to the common trace_pipe (/sys/kernel/debug/tracing/trace_pipe). This is ok for some quick examples, but has limitations: 3 args max, 1 %s only, and trace_pipe is globally shared, so concurrent programs will have clashing output. A better interface is via BPF_PERF_OUTPUT(). Note that calling this helper is made simpler than the original kernel version, which has <code>fmt_size</code> as the second parameter.</p>
<p>Examples in situ:
<a href="https://github.com/iovisor/bcc/tree/master/examples">search /examples</a>,
<a href="https://github.com/iovisor/bcc/tree/master/tools">search /tools</a></p>
<h3 id="2-bpf_perf_output">2. BPF_PERF_OUTPUT</h3>
<p>Syntax: <code>BPF_PERF_OUTPUT(name)</code></p>
<p>Creates a BPF table for pushing out custom event data to user space via a perf ring buffer. This is the preferred method for pushing per-event data to user space.</p>
<p>For example:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-16-1" name="__codelineno-16-1" href="#__codelineno-16-1"></a><span class="k">struct</span><span class="w"> </span><span class="nc">data_t</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-16-2" name="__codelineno-16-2" href="#__codelineno-16-2"></a><span class="w">    </span><span class="n">u32</span><span class="w"> </span><span class="n">pid</span><span class="p">;</span>
<a id="__codelineno-16-3" name="__codelineno-16-3" href="#__codelineno-16-3"></a><span class="w">    </span><span class="n">u64</span><span class="w"> </span><span class="n">ts</span><span class="p">;</span>
<a id="__codelineno-16-4" name="__codelineno-16-4" href="#__codelineno-16-4"></a><span class="w">    </span><span class="kt">char</span><span class="w"> </span><span class="n">comm</span><span class="p">[</span><span class="n">TASK_COMM_LEN</span><span class="p">];</span>
<a id="__codelineno-16-5" name="__codelineno-16-5" href="#__codelineno-16-5"></a><span class="p">};</span>
<a id="__codelineno-16-6" name="__codelineno-16-6" href="#__codelineno-16-6"></a><span class="n">BPF_PERF_OUTPUT</span><span class="p">(</span><span class="n">events</span><span class="p">);</span>
<a id="__codelineno-16-7" name="__codelineno-16-7" href="#__codelineno-16-7"></a>
<a id="__codelineno-16-8" name="__codelineno-16-8" href="#__codelineno-16-8"></a><span class="kt">int</span><span class="w"> </span><span class="nf">hello</span><span class="p">(</span><span class="k">struct</span><span class="w"> </span><span class="nc">pt_regs</span><span class="w"> </span><span class="o">*</span><span class="n">ctx</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-16-9" name="__codelineno-16-9" href="#__codelineno-16-9"></a><span class="w">    </span><span class="k">struct</span><span class="w"> </span><span class="nc">data_t</span><span class="w"> </span><span class="n">data</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{};</span>
<a id="__codelineno-16-10" name="__codelineno-16-10" href="#__codelineno-16-10"></a>
<a id="__codelineno-16-11" name="__codelineno-16-11" href="#__codelineno-16-11"></a><span class="w">    </span><span class="n">data</span><span class="p">.</span><span class="n">pid</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">bpf_get_current_pid_tgid</span><span class="p">();</span>
<a id="__codelineno-16-12" name="__codelineno-16-12" href="#__codelineno-16-12"></a><span class="w">    </span><span class="n">data</span><span class="p">.</span><span class="n">ts</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">bpf_ktime_get_ns</span><span class="p">();</span>
<a id="__codelineno-16-13" name="__codelineno-16-13" href="#__codelineno-16-13"></a><span class="w">    </span><span class="n">bpf_get_current_comm</span><span class="p">(</span><span class="o">&amp;</span><span class="n">data</span><span class="p">.</span><span class="n">comm</span><span class="p">,</span><span class="w"> </span><span class="k">sizeof</span><span class="p">(</span><span class="n">data</span><span class="p">.</span><span class="n">comm</span><span class="p">));</span>
<a id="__codelineno-16-14" name="__codelineno-16-14" href="#__codelineno-16-14"></a>
<a id="__codelineno-16-15" name="__codelineno-16-15" href="#__codelineno-16-15"></a><span class="w">    </span><span class="n">events</span><span class="p">.</span><span class="n">perf_submit</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">data</span><span class="p">,</span><span class="w"> </span><span class="k">sizeof</span><span class="p">(</span><span class="n">data</span><span class="p">));</span>
<a id="__codelineno-16-16" name="__codelineno-16-16" href="#__codelineno-16-16"></a>
<a id="__codelineno-16-17" name="__codelineno-16-17" href="#__codelineno-16-17"></a><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<a id="__codelineno-16-18" name="__codelineno-16-18" href="#__codelineno-16-18"></a><span class="p">}</span>
</code></pre></div>
<p>The output table is named <code>events</code>, and data is pushed to it via <code>events.perf_submit()</code>.</p>
<p>Examples in situ:
<a href="https://github.com/iovisor/bcc/tree/master/examples">search /examples</a>,
<a href="https://github.com/iovisor/bcc/tree/master/tools">search /tools</a></p>
<h3 id="3-perf_submit">3. perf_submit()</h3>
<p>Syntax: <code>int perf_submit((void *)ctx, (void *)data, u32 data_size)</code></p>
<p>Return: 0 on success</p>
<p>A method of a BPF_PERF_OUTPUT table, for submitting custom event data to user space. See the BPF_PERF_OUTPUT entry. (This ultimately calls bpf_perf_event_output().)</p>
<p>The <code>ctx</code> parameter is provided in <a href="#1-kprobes">kprobes</a> or <a href="#2-kretprobes">kretprobes</a>. For <code>SCHED_CLS</code> or <code>SOCKET_FILTER</code> programs, the <code>struct __sk_buff *skb</code> must be used instead.</p>
<p>Examples in situ:
<a href="https://github.com/iovisor/bcc/tree/master/examples">search /examples</a>,
<a href="https://github.com/iovisor/bcc/tree/master/tools">search /tools</a></p>
<h3 id="4-perf_submit_skb">4. perf_submit_skb()</h3>
<p>Syntax: <code>int perf_submit_skb((void *)ctx, u32 packet_size, (void *)data, u32 data_size)</code></p>
<p>Return: 0 on success</p>
<p>A method of a BPF_PERF_OUTPUT table available in networking program types, for submitting custom event data to user space, along with the first <code>packet_size</code> bytes of the packet buffer. See the BPF_PERF_OUTPUT entry. (This ultimately calls bpf_perf_event_output().)</p>
<p>Examples in situ:
<a href="https://github.com/iovisor/bcc/tree/master/examples">search /examples</a>,
<a href="https://github.com/iovisor/bcc/tree/master/tools">search /tools</a></p>
<h3 id="5-bpf_ringbuf_output">5. BPF_RINGBUF_OUTPUT</h3>
<p>Syntax: <code>BPF_RINGBUF_OUTPUT(name, page_cnt)</code></p>
<p>Creates a BPF table for pushing out custom event data to user space via a ringbuf ring buffer.
<code>BPF_RINGBUF_OUTPUT</code> has several advantages over <code>BPF_PERF_OUTPUT</code>, summarized as follows:</p>
<ul>
<li>Buffer is shared across all CPUs, meaning no per-CPU allocation</li>
<li>Supports two APIs for BPF programs<ul>
<li><code>map.ringbuf_output()</code> works like <code>map.perf_submit()</code> (covered in <a href="#6-ringbuf_output">ringbuf_output</a>)</li>
<li><code>map.ringbuf_reserve()</code>/<code>map.ringbuf_submit()</code>/<code>map.ringbuf_discard()</code>
  split the process of reserving buffer space and submitting events into two steps
  (covered in <a href="#7-ringbuf_reserve">ringbuf_reserve</a>, <a href="#8-ringbuf_submit">ringbuf_submit</a>, <a href="#9-ringbuf_discard">ringbuf_discard</a>)</li>
</ul>
</li>
<li>BPF APIs do not require access to a CPU ctx argument</li>
<li>Superior performance and latency in userspace thanks to a shared ring buffer manager</li>
<li>Supports two ways of consuming data in userspace</li>
</ul>
<p>Starting in Linux 5.8, this should be the preferred method for pushing per-event data to user space.</p>
<p>Example of both APIs:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-17-1" name="__codelineno-17-1" href="#__codelineno-17-1"></a><span class="k">struct</span><span class="w"> </span><span class="nc">data_t</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-17-2" name="__codelineno-17-2" href="#__codelineno-17-2"></a><span class="w">    </span><span class="n">u32</span><span class="w"> </span><span class="n">pid</span><span class="p">;</span>
<a id="__codelineno-17-3" name="__codelineno-17-3" href="#__codelineno-17-3"></a><span class="w">    </span><span class="n">u64</span><span class="w"> </span><span class="n">ts</span><span class="p">;</span>
<a id="__codelineno-17-4" name="__codelineno-17-4" href="#__codelineno-17-4"></a><span class="w">    </span><span class="kt">char</span><span class="w"> </span><span class="n">comm</span><span class="p">[</span><span class="n">TASK_COMM_LEN</span><span class="p">];</span>
<a id="__codelineno-17-5" name="__codelineno-17-5" href="#__codelineno-17-5"></a><span class="p">};</span>
<a id="__codelineno-17-6" name="__codelineno-17-6" href="#__codelineno-17-6"></a>
<a id="__codelineno-17-7" name="__codelineno-17-7" href="#__codelineno-17-7"></a><span class="c1">// Creates a ringbuf called events with 8 pages of space, shared across all CPUs</span>
<a id="__codelineno-17-8" name="__codelineno-17-8" href="#__codelineno-17-8"></a><span class="n">BPF_RINGBUF_OUTPUT</span><span class="p">(</span><span class="n">events</span><span class="p">,</span><span class="w"> </span><span class="mi">8</span><span class="p">);</span>
<a id="__codelineno-17-9" name="__codelineno-17-9" href="#__codelineno-17-9"></a>
<a id="__codelineno-17-10" name="__codelineno-17-10" href="#__codelineno-17-10"></a><span class="kt">int</span><span class="w"> </span><span class="nf">first_api_example</span><span class="p">(</span><span class="k">struct</span><span class="w"> </span><span class="nc">pt_regs</span><span class="w"> </span><span class="o">*</span><span class="n">ctx</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-17-11" name="__codelineno-17-11" href="#__codelineno-17-11"></a><span class="w">    </span><span class="k">struct</span><span class="w"> </span><span class="nc">data_t</span><span class="w"> </span><span class="n">data</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{};</span>
<a id="__codelineno-17-12" name="__codelineno-17-12" href="#__codelineno-17-12"></a>
<a id="__codelineno-17-13" name="__codelineno-17-13" href="#__codelineno-17-13"></a><span class="w">    </span><span class="n">data</span><span class="p">.</span><span class="n">pid</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">bpf_get_current_pid_tgid</span><span class="p">();</span>
<a id="__codelineno-17-14" name="__codelineno-17-14" href="#__codelineno-17-14"></a><span class="w">    </span><span class="n">data</span><span class="p">.</span><span class="n">ts</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">bpf_ktime_get_ns</span><span class="p">();</span>
<a id="__codelineno-17-15" name="__codelineno-17-15" href="#__codelineno-17-15"></a><span class="w">    </span><span class="n">bpf_get_current_comm</span><span class="p">(</span><span class="o">&amp;</span><span class="n">data</span><span class="p">.</span><span class="n">comm</span><span class="p">,</span><span class="w"> </span><span class="k">sizeof</span><span class="p">(</span><span class="n">data</span><span class="p">.</span><span class="n">comm</span><span class="p">));</span>
<a id="__codelineno-17-16" name="__codelineno-17-16" href="#__codelineno-17-16"></a>
<a id="__codelineno-17-17" name="__codelineno-17-17" href="#__codelineno-17-17"></a><span class="w">    </span><span class="n">events</span><span class="p">.</span><span class="n">ringbuf_output</span><span class="p">(</span><span class="o">&amp;</span><span class="n">data</span><span class="p">,</span><span class="w"> </span><span class="k">sizeof</span><span class="p">(</span><span class="n">data</span><span class="p">),</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="cm">/* flags */</span><span class="p">);</span>
<a id="__codelineno-17-18" name="__codelineno-17-18" href="#__codelineno-17-18"></a>
<a id="__codelineno-17-19" name="__codelineno-17-19" href="#__codelineno-17-19"></a><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<a id="__codelineno-17-20" name="__codelineno-17-20" href="#__codelineno-17-20"></a><span class="p">}</span>
<a id="__codelineno-17-21" name="__codelineno-17-21" href="#__codelineno-17-21"></a>
<a id="__codelineno-17-22" name="__codelineno-17-22" href="#__codelineno-17-22"></a><span class="kt">int</span><span class="w"> </span><span class="nf">second_api_example</span><span class="p">(</span><span class="k">struct</span><span class="w"> </span><span class="nc">pt_regs</span><span class="w"> </span><span class="o">*</span><span class="n">ctx</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-17-23" name="__codelineno-17-23" href="#__codelineno-17-23"></a><span class="w">    </span><span class="k">struct</span><span class="w"> </span><span class="nc">data_t</span><span class="w"> </span><span class="o">*</span><span class="n">data</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">events</span><span class="p">.</span><span class="n">ringbuf_reserve</span><span class="p">(</span><span class="k">sizeof</span><span class="p">(</span><span class="k">struct</span><span class="w"> </span><span class="nc">data_t</span><span class="p">));</span>
<a id="__codelineno-17-24" name="__codelineno-17-24" href="#__codelineno-17-24"></a><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="n">data</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="c1">// Failed to reserve space</span>
<a id="__codelineno-17-25" name="__codelineno-17-25" href="#__codelineno-17-25"></a><span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span>
<a id="__codelineno-17-26" name="__codelineno-17-26" href="#__codelineno-17-26"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-17-27" name="__codelineno-17-27" href="#__codelineno-17-27"></a>
<a id="__codelineno-17-28" name="__codelineno-17-28" href="#__codelineno-17-28"></a><span class="w">    </span><span class="n">data</span><span class="o">-&gt;</span><span class="n">pid</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">bpf_get_current_pid_tgid</span><span class="p">();</span>
<a id="__codelineno-17-29" name="__codelineno-17-29" href="#__codelineno-17-29"></a><span class="w">    </span><span class="n">data</span><span class="o">-&gt;</span><span class="n">ts</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">bpf_ktime_get_ns</span><span class="p">();</span>
<a id="__codelineno-17-30" name="__codelineno-17-30" href="#__codelineno-17-30"></a><span class="w">    </span><span class="n">bpf_get_current_comm</span><span class="p">(</span><span class="o">&amp;</span><span class="n">data</span><span class="o">-&gt;</span><span class="n">comm</span><span class="p">,</span><span class="w"> </span><span class="k">sizeof</span><span class="p">(</span><span class="n">data</span><span class="o">-&gt;</span><span class="n">comm</span><span class="p">));</span>
<a id="__codelineno-17-31" name="__codelineno-17-31" href="#__codelineno-17-31"></a>
<a id="__codelineno-17-32" name="__codelineno-17-32" href="#__codelineno-17-32"></a><span class="w">    </span><span class="n">events</span><span class="p">.</span><span class="n">ringbuf_submit</span><span class="p">(</span><span class="n">data</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="cm">/* flags */</span><span class="p">);</span>
<a id="__codelineno-17-33" name="__codelineno-17-33" href="#__codelineno-17-33"></a>
<a id="__codelineno-17-34" name="__codelineno-17-34" href="#__codelineno-17-34"></a><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<a id="__codelineno-17-35" name="__codelineno-17-35" href="#__codelineno-17-35"></a><span class="p">}</span>
</code></pre></div>
<p>The output table is named <code>events</code>. Data is allocated via <code>events.ringbuf_reserve()</code> and pushed to it via <code>events.ringbuf_submit()</code>.</p>
<p>Examples in situ: <!-- TODO -->
<a href="https://github.com/iovisor/bcc/tree/master/examples">search /examples</a>,</p>
<h3 id="6-ringbuf_output">6. ringbuf_output()</h3>
<p>Syntax: <code>int ringbuf_output((void *)data, u64 data_size, u64 flags)</code></p>
<p>Return: 0 on success</p>
<p>Flags:
 - <code>BPF_RB_NO_WAKEUP</code>: Do not sent notification of new data availability
 - <code>BPF_RB_FORCE_WAKEUP</code>: Send notification of new data availability unconditionally</p>
<p>A method of the BPF_RINGBUF_OUTPUT table, for submitting custom event data to user space. This method works like <code>perf_submit()</code>,
although it does not require a ctx argument.</p>
<p>Examples in situ: <!-- TODO -->
<a href="https://github.com/iovisor/bcc/tree/master/examples">search /examples</a>,</p>
<h3 id="7-ringbuf_reserve">7. ringbuf_reserve()</h3>
<p>Syntax: <code>void* ringbuf_reserve(u64 data_size)</code></p>
<p>Return: Pointer to data struct on success, NULL on failure</p>
<p>A method of the BPF_RINGBUF_OUTPUT table, for reserving space in the ring buffer and simultaneously
allocating a data struct for output. Must be used with one of <code>ringbuf_submit</code> or <code>ringbuf_discard</code>.</p>
<p>Examples in situ: <!-- TODO -->
<a href="https://github.com/iovisor/bcc/tree/master/examples">search /examples</a>,</p>
<h3 id="8-ringbuf_submit">8. ringbuf_submit()</h3>
<p>Syntax: <code>void ringbuf_submit((void *)data, u64 flags)</code></p>
<p>Return: Nothing, always succeeds</p>
<p>Flags:
 - <code>BPF_RB_NO_WAKEUP</code>: Do not sent notification of new data availability
 - <code>BPF_RB_FORCE_WAKEUP</code>: Send notification of new data availability unconditionally</p>
<p>A method of the BPF_RINGBUF_OUTPUT table, for submitting custom event data to user space. Must be preceded by a call to
<code>ringbuf_reserve()</code> to reserve space for the data.</p>
<p>Examples in situ: <!-- TODO -->
<a href="https://github.com/iovisor/bcc/tree/master/examples">search /examples</a>,</p>
<h3 id="9-ringbuf_discard">9. ringbuf_discard()</h3>
<p>Syntax: <code>void ringbuf_discard((void *)data, u64 flags)</code></p>
<p>Return: Nothing, always succeeds</p>
<p>Flags:
 - <code>BPF_RB_NO_WAKEUP</code>: Do not sent notification of new data availability
 - <code>BPF_RB_FORCE_WAKEUP</code>: Send notification of new data availability unconditionally</p>
<p>A method of the BPF_RINGBUF_OUTPUT table, for discarding custom event data; userspace
ignores the data associated with the discarded event. Must be preceded by a call to
<code>ringbuf_reserve()</code> to reserve space for the data.</p>
<p>Examples in situ: <!-- TODO -->
<a href="https://github.com/iovisor/bcc/tree/master/examples">search /examples</a>,</p>
<h2 id="maps">Maps</h2>
<p>Maps are BPF data stores, and are the basis for higher level object types including tables, hashes, and histograms.</p>
<h3 id="1-bpf_table">1. BPF_TABLE</h3>
<p>Syntax: <code>BPF_TABLE(_table_type, _key_type, _leaf_type, _name, _max_entries)</code></p>
<p>Creates a map named <code>_name</code>. Most of the time this will be used via higher-level macros, like BPF_HASH, BPF_ARRAY, BPF_HISTOGRAM, etc.</p>
<p><code>BPF_F_TABLE</code> is a variant that takes a flag in the last parameter. <code>BPF_TABLE(https://github.com/iovisor/bcc/tree/master.)</code> is actually a wrapper to <code>BPF_F_TABLE(https://github.com/iovisor/bcc/tree/master., 0 /* flag */)</code>.</p>
<p>Methods (covered later): map.lookup(), map.lookup_or_try_init(), map.delete(), map.update(), map.insert(), map.increment().</p>
<p>Examples in situ:
<a href="https://github.com/iovisor/bcc/tree/master/examples">search /examples</a>,
<a href="https://github.com/iovisor/bcc/tree/master/tools">search /tools</a></p>
<h4 id="pinned-maps">Pinned Maps</h4>
<p>Syntax: <code>BPF_TABLE_PINNED(_table_type, _key_type, _leaf_type, _name, _max_entries, "/sys/fs/bpf/xyz")</code></p>
<p>Create a new map if it doesn't exist and pin it to the bpffs as a FILE, otherwise use the map that was pinned to the bpffs. The type information is not enforced and the actual map type depends on the map that got pinned to the location.</p>
<p>For example:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-18-1" name="__codelineno-18-1" href="#__codelineno-18-1"></a><span class="n">BPF_TABLE_PINNED</span><span class="p">(</span><span class="s">&quot;hash&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">u64</span><span class="p">,</span><span class="w"> </span><span class="n">u64</span><span class="p">,</span><span class="w"> </span><span class="n">ids</span><span class="p">,</span><span class="w"> </span><span class="mi">1024</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;/sys/fs/bpf/ids&quot;</span><span class="p">);</span>
</code></pre></div>
<h3 id="2-bpf_hash">2. BPF_HASH</h3>
<p>Syntax: <code>BPF_HASH(name [, key_type [, leaf_type [, size]]])</code></p>
<p>Creates a hash map (associative array) named <code>name</code>, with optional parameters.</p>
<p>Defaults: <code>BPF_HASH(name, key_type=u64, leaf_type=u64, size=10240)</code></p>
<p>For example:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-19-1" name="__codelineno-19-1" href="#__codelineno-19-1"></a><span class="n">BPF_HASH</span><span class="p">(</span><span class="n">start</span><span class="p">,</span><span class="w"> </span><span class="k">struct</span><span class="w"> </span><span class="nc">request</span><span class="w"> </span><span class="o">*</span><span class="p">);</span>
</code></pre></div>
<p>This creates a hash named <code>start</code> where the key is a <code>struct request *</code>, and the value defaults to u64. This hash is used by the disksnoop.py example for saving timestamps for each I/O request, where the key is the pointer to struct request, and the value is the timestamp.</p>
<p>This is a wrapper macro for <code>BPF_TABLE("hash", ...)</code>.</p>
<p>Methods (covered later): map.lookup(), map.lookup_or_try_init(), map.delete(), map.update(), map.insert(), map.increment().</p>
<p>Examples in situ:
<a href="https://github.com/iovisor/bcc/tree/master/examples">search /examples</a>,
<a href="https://github.com/iovisor/bcc/tree/master/tools">search /tools</a></p>
<h3 id="3-bpf_array">3. BPF_ARRAY</h3>
<p>Syntax: <code>BPF_ARRAY(name [, leaf_type [, size]])</code></p>
<p>Creates an int-indexed array which is optimized for fastest lookup and update, named <code>name</code>, with optional parameters.</p>
<p>Defaults: <code>BPF_ARRAY(name, leaf_type=u64, size=10240)</code></p>
<p>For example:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-20-1" name="__codelineno-20-1" href="#__codelineno-20-1"></a><span class="n">BPF_ARRAY</span><span class="p">(</span><span class="n">counts</span><span class="p">,</span><span class="w"> </span><span class="n">u64</span><span class="p">,</span><span class="w"> </span><span class="mi">32</span><span class="p">);</span>
</code></pre></div>
<p>This creates an array named <code>counts</code> where with 32 buckets and 64-bit integer values. This array is used by the funccount.py example for saving call count of each function.</p>
<p>This is a wrapper macro for <code>BPF_TABLE("array", ...)</code>.</p>
<p>Methods (covered later): map.lookup(), map.update(), map.increment(). Note that all array elements are pre-allocated with zero values and can not be deleted.</p>
<p>Examples in situ:
<a href="https://github.com/iovisor/bcc/tree/master/examples">search /examples</a>,
<a href="https://github.com/iovisor/bcc/tree/master/tools">search /tools</a></p>
<h3 id="4-bpf_histogram">4. BPF_HISTOGRAM</h3>
<p>Syntax: <code>BPF_HISTOGRAM(name [, key_type [, size ]])</code></p>
<p>Creates a histogram map named <code>name</code>, with optional parameters.</p>
<p>Defaults: <code>BPF_HISTOGRAM(name, key_type=int, size=64)</code></p>
<p>For example:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-21-1" name="__codelineno-21-1" href="#__codelineno-21-1"></a><span class="n">BPF_HISTOGRAM</span><span class="p">(</span><span class="n">dist</span><span class="p">);</span>
</code></pre></div>
<p>This creates a histogram named <code>dist</code>, which defaults to 64 buckets indexed by keys of type int.</p>
<p>This is a wrapper macro for <code>BPF_TABLE("histgram", ...)</code>.</p>
<p>Methods (covered later): map.increment().</p>
<p>Examples in situ:
<a href="https://github.com/iovisor/bcc/tree/master/examples">search /examples</a>,
<a href="https://github.com/iovisor/bcc/tree/master/tools">search /tools</a></p>
<h3 id="5-bpf_stack_trace">5. BPF_STACK_TRACE</h3>
<p>Syntax: <code>BPF_STACK_TRACE(name, max_entries)</code></p>
<p>Creates stack trace map named <code>name</code>, with a maximum entry count provided. These maps are used to store stack traces.</p>
<p>For example:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-22-1" name="__codelineno-22-1" href="#__codelineno-22-1"></a><span class="n">BPF_STACK_TRACE</span><span class="p">(</span><span class="n">stack_traces</span><span class="p">,</span><span class="w"> </span><span class="mi">1024</span><span class="p">);</span>
</code></pre></div>
<p>This creates stack trace map named <code>stack_traces</code>, with a maximum number of stack trace entries of 1024.</p>
<p>This is a wrapper macro for <code>BPF_TABLE("stacktrace", ...)</code>.</p>
<p>Methods (covered later): map.get_stackid().</p>
<p>Examples in situ:
<a href="https://github.com/iovisor/bcc/tree/master/examples">search /examples</a>,
<a href="https://github.com/iovisor/bcc/tree/master/tools">search /tools</a></p>
<h3 id="6-bpf_perf_array">6. BPF_PERF_ARRAY</h3>
<p>Syntax: <code>BPF_PERF_ARRAY(name, max_entries)</code></p>
<p>Creates perf array named <code>name</code>, with a maximum entry count provided, which must be equal to the number of system cpus. These maps are used to fetch hardware performance counters.</p>
<p>For example:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-23-1" name="__codelineno-23-1" href="#__codelineno-23-1"></a><span class="n">text</span><span class="o">=</span><span class="s">&quot;&quot;&quot;</span>
<a id="__codelineno-23-2" name="__codelineno-23-2" href="#__codelineno-23-2"></a><span class="n">BPF_PERF_ARRAY</span><span class="p">(</span><span class="n">cpu_cycles</span><span class="p">,</span><span class="w"> </span><span class="n">NUM_CPUS</span><span class="p">);</span>
<a id="__codelineno-23-3" name="__codelineno-23-3" href="#__codelineno-23-3"></a><span class="s">&quot;&quot;&quot;</span>
<a id="__codelineno-23-4" name="__codelineno-23-4" href="#__codelineno-23-4"></a><span class="n">b</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">bcc</span><span class="p">.</span><span class="n">BPF</span><span class="p">(</span><span class="n">text</span><span class="o">=</span><span class="n">text</span><span class="p">,</span><span class="w"> </span><span class="n">cflags</span><span class="o">=</span><span class="p">[</span><span class="s">&quot;-DNUM_CPUS=%d&quot;</span><span class="w"> </span><span class="o">%</span><span class="w"> </span><span class="n">multiprocessing</span><span class="p">.</span><span class="n">cpu_count</span><span class="p">()])</span>
<a id="__codelineno-23-5" name="__codelineno-23-5" href="#__codelineno-23-5"></a><span class="n">b</span><span class="p">[</span><span class="s">&quot;cpu_cycles&quot;</span><span class="p">].</span><span class="n">open_perf_event</span><span class="p">(</span><span class="n">b</span><span class="p">[</span><span class="s">&quot;cpu_cycles&quot;</span><span class="p">].</span><span class="n">HW_CPU_CYCLES</span><span class="p">)</span>
</code></pre></div>
<p>This creates a perf array named <code>cpu_cycles</code>, with number of entries equal to the number of cpus/cores. The array is configured so that later calling map.perf_read() will return a hardware-calculated counter of the number of cycles elapsed from some point in the past. Only one type of hardware counter may be configured per table at a time.</p>
<p>Methods (covered later): map.perf_read().</p>
<p>Examples in situ:
<a href="https://github.com/iovisor/bcc/tree/master/tests">search /tests</a></p>
<h3 id="7-bpf_percpu_hash">7. BPF_PERCPU_HASH</h3>
<p>Syntax: <code>BPF_PERCPU_HASH(name [, key_type [, leaf_type [, size]]])</code></p>
<p>Creates NUM_CPU int-indexed hash maps (associative arrays) named <code>name</code>, with optional parameters. Each CPU will have a separate copy of this array. The copies are not kept synchronized in any way.</p>
<p>Note that due to limits defined in the kernel (in linux/mm/percpu.c), the <code>leaf_type</code> cannot have a size of more than 32KB.
In other words, <code>BPF_PERCPU_HASH</code> elements cannot be larger than 32KB in size.</p>
<p>Defaults: <code>BPF_PERCPU_HASH(name, key_type=u64, leaf_type=u64, size=10240)</code></p>
<p>For example:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-24-1" name="__codelineno-24-1" href="#__codelineno-24-1"></a><span class="n">BPF_PERCPU_HASH</span><span class="p">(</span><span class="n">start</span><span class="p">,</span><span class="w"> </span><span class="k">struct</span><span class="w"> </span><span class="nc">request</span><span class="w"> </span><span class="o">*</span><span class="p">);</span>
</code></pre></div>
<p>This creates NUM_CPU hashes named <code>start</code> where the key is a <code>struct request *</code>, and the value defaults to u64.</p>
<p>This is a wrapper macro for <code>BPF_TABLE("percpu_hash", ...)</code>.</p>
<p>Methods (covered later): map.lookup(), map.lookup_or_try_init(), map.delete(), map.update(), map.insert(), map.increment().</p>
<p>Examples in situ:
<a href="https://github.com/iovisor/bcc/tree/master/examples">search /examples</a>,
<a href="https://github.com/iovisor/bcc/tree/master/tools">search /tools</a></p>
<h3 id="8-bpf_percpu_array">8. BPF_PERCPU_ARRAY</h3>
<p>Syntax: <code>BPF_PERCPU_ARRAY(name [, leaf_type [, size]])</code></p>
<p>Creates NUM_CPU int-indexed arrays which are optimized for fastest lookup and update, named <code>name</code>, with optional parameters. Each CPU will have a separate copy of this array. The copies are not kept synchronized in any way.</p>
<p>Note that due to limits defined in the kernel (in linux/mm/percpu.c), the <code>leaf_type</code> cannot have a size of more than 32KB.
In other words, <code>BPF_PERCPU_ARRAY</code> elements cannot be larger than 32KB in size.</p>
<p>Defaults: <code>BPF_PERCPU_ARRAY(name, leaf_type=u64, size=10240)</code></p>
<p>For example:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-25-1" name="__codelineno-25-1" href="#__codelineno-25-1"></a><span class="n">BPF_PERCPU_ARRAY</span><span class="p">(</span><span class="n">counts</span><span class="p">,</span><span class="w"> </span><span class="n">u64</span><span class="p">,</span><span class="w"> </span><span class="mi">32</span><span class="p">);</span>
</code></pre></div>
<p>This creates NUM_CPU arrays named <code>counts</code> where with 32 buckets and 64-bit integer values.</p>
<p>This is a wrapper macro for <code>BPF_TABLE("percpu_array", ...)</code>.</p>
<p>Methods (covered later): map.lookup(), map.update(), map.increment(). Note that all array elements are pre-allocated with zero values and can not be deleted.</p>
<p>Examples in situ:
<a href="https://github.com/iovisor/bcc/tree/master/examples">search /examples</a>,
<a href="https://github.com/iovisor/bcc/tree/master/tools">search /tools</a></p>
<h3 id="9-bpf_lpm_trie">9. BPF_LPM_TRIE</h3>
<p>Syntax: <code>BPF_LPM_TRIE(name [, key_type [, leaf_type [, size]]])</code></p>
<p>Creates a longest prefix match trie map named <code>name</code>, with optional parameters.</p>
<p>Defaults: <code>BPF_LPM_TRIE(name, key_type=u64, leaf_type=u64, size=10240)</code></p>
<p>For example:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-26-1" name="__codelineno-26-1" href="#__codelineno-26-1"></a><span class="n">BPF_LPM_TRIE</span><span class="p">(</span><span class="n">trie</span><span class="p">,</span><span class="w"> </span><span class="k">struct</span><span class="w"> </span><span class="nc">key_v6</span><span class="p">);</span>
</code></pre></div>
<p>This creates an LPM trie map named <code>trie</code> where the key is a <code>struct key_v6</code>, and the value defaults to u64.</p>
<p>This is a wrapper macro to <code>BPF_F_TABLE("lpm_trie", ..., BPF_F_NO_PREALLOC)</code>.</p>
<p>Methods (covered later): map.lookup(), map.lookup_or_try_init(), map.delete(), map.update(), map.insert(), map.increment().</p>
<p>Examples in situ:
<a href="https://github.com/iovisor/bcc/tree/master/examples">search /examples</a>,
<a href="https://github.com/iovisor/bcc/tree/master/tools">search /tools</a></p>
<h3 id="10-bpf_prog_array">10. BPF_PROG_ARRAY</h3>
<p>Syntax: <code>BPF_PROG_ARRAY(name, size)</code></p>
<p>This creates a program array named <code>name</code> with <code>size</code> entries. Each entry of the array is either a file descriptor to a bpf program or <code>NULL</code>. The array acts as a jump table so that bpf programs can "tail-call" other bpf programs.</p>
<p>This is a wrapper macro for <code>BPF_TABLE("prog", ...)</code>.</p>
<p>Methods (covered later): map.call().</p>
<p>Examples in situ:
<a href="https://github.com/iovisor/bcc/tree/master/examples">search /examples</a>,
<a href="https://github.com/iovisor/bcc/tree/master/tests">search /tests</a>,
<a href="https://github.com/iovisor/bcc/blob/master/examples/networking/tunnel_monitor/monitor.py#L24-L26">assign fd</a></p>
<h3 id="11-bpf_devmap">11. BPF_DEVMAP</h3>
<p>Syntax: <code>BPF_DEVMAP(name, size)</code></p>
<p>This creates a device map named <code>name</code> with <code>size</code> entries. Each entry of the map is an <code>ifindex</code> to a network interface. This map is only used in XDP.</p>
<p>For example:
<div class="highlight"><pre><span></span><code><a id="__codelineno-27-1" name="__codelineno-27-1" href="#__codelineno-27-1"></a><span class="n">BPF_DEVMAP</span><span class="p">(</span><span class="n">devmap</span><span class="p">,</span><span class="w"> </span><span class="mi">10</span><span class="p">);</span>
</code></pre></div></p>
<p>Methods (covered later): map.redirect_map().</p>
<p>Examples in situ:
<a href="https://github.com/iovisor/bcc/tree/master/examples">search /examples</a>,</p>
<h3 id="12-bpf_cpumap">12. BPF_CPUMAP</h3>
<p>Syntax: <code>BPF_CPUMAP(name, size)</code></p>
<p>This creates a cpu map named <code>name</code> with <code>size</code> entries. The index of the map represents the CPU id and each entry is the size of the ring buffer allocated for the CPU. This map is only used in XDP.</p>
<p>For example:
<div class="highlight"><pre><span></span><code><a id="__codelineno-28-1" name="__codelineno-28-1" href="#__codelineno-28-1"></a><span class="n">BPF_CPUMAP</span><span class="p">(</span><span class="n">cpumap</span><span class="p">,</span><span class="w"> </span><span class="mi">16</span><span class="p">);</span>
</code></pre></div></p>
<p>Methods (covered later): map.redirect_map().</p>
<p>Examples in situ:
<a href="https://github.com/iovisor/bcc/tree/master/examples">search /examples</a>,</p>
<h3 id="13-bpf_xskmap">13. BPF_XSKMAP</h3>
<p>Syntax: <code>BPF_XSKMAP(name, size [, "/sys/fs/bpf/xyz"])</code></p>
<p>This creates a xsk map named <code>name</code> with <code>size</code> entries and pin it to the bpffs as a FILE. Each entry represents one NIC's queue id. This map is only used in XDP to redirect packet to an AF_XDP socket. If the AF_XDP socket is binded to a queue which is different than the current packet's queue id, the packet will be dropped. For kernel v5.3 and latter, <code>lookup</code> method is available and can be used to check whether and AF_XDP socket is available for the current packet's queue id. More details at <a href="https://www.kernel.org/doc/html/latest/networking/af_xdp.html">AF_XDP</a>.</p>
<p>For example:
<div class="highlight"><pre><span></span><code><a id="__codelineno-29-1" name="__codelineno-29-1" href="#__codelineno-29-1"></a><span class="n">BPF_XSKMAP</span><span class="p">(</span><span class="n">xsks_map</span><span class="p">,</span><span class="w"> </span><span class="mi">8</span><span class="p">);</span>
</code></pre></div></p>
<p>Methods (covered later): map.redirect_map(). map.lookup()</p>
<p>Examples in situ:
<a href="https://github.com/iovisor/bcc/tree/master/examples">search /examples</a>,</p>
<h3 id="14-bpf_array_of_maps">14. BPF_ARRAY_OF_MAPS</h3>
<p>Syntax: <code>BPF_ARRAY_OF_MAPS(name, inner_map_name, size)</code></p>
<p>This creates an array map with a map-in-map type (BPF_MAP_TYPE_HASH_OF_MAPS) map named <code>name</code> with <code>size</code> entries. The inner map meta data is provided by map <code>inner_map_name</code> and can be most of array or hash maps except <code>BPF_MAP_TYPE_PROG_ARRAY</code>, <code>BPF_MAP_TYPE_CGROUP_STORAGE</code> and <code>BPF_MAP_TYPE_PERCPU_CGROUP_STORAGE</code>.</p>
<p>For example:
<div class="highlight"><pre><span></span><code><a id="__codelineno-30-1" name="__codelineno-30-1" href="#__codelineno-30-1"></a><span class="n">BPF_TABLE</span><span class="p">(</span><span class="s">&quot;hash&quot;</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="p">,</span><span class="w"> </span><span class="n">ex1</span><span class="p">,</span><span class="w"> </span><span class="mi">1024</span><span class="p">);</span>
<a id="__codelineno-30-2" name="__codelineno-30-2" href="#__codelineno-30-2"></a><span class="n">BPF_TABLE</span><span class="p">(</span><span class="s">&quot;hash&quot;</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="p">,</span><span class="w"> </span><span class="n">ex2</span><span class="p">,</span><span class="w"> </span><span class="mi">1024</span><span class="p">);</span>
<a id="__codelineno-30-3" name="__codelineno-30-3" href="#__codelineno-30-3"></a><span class="n">BPF_ARRAY_OF_MAPS</span><span class="p">(</span><span class="n">maps_array</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;ex1&quot;</span><span class="p">,</span><span class="w"> </span><span class="mi">10</span><span class="p">);</span>
</code></pre></div></p>
<h3 id="15-bpf_hash_of_maps">15. BPF_HASH_OF_MAPS</h3>
<p>Syntax: <code>BPF_HASH_OF_MAPS(name, key_type, inner_map_name, size)</code></p>
<p>This creates a hash map with a map-in-map type (BPF_MAP_TYPE_HASH_OF_MAPS) map named <code>name</code> with <code>size</code> entries. The inner map meta data is provided by map <code>inner_map_name</code> and can be most of array or hash maps except <code>BPF_MAP_TYPE_PROG_ARRAY</code>, <code>BPF_MAP_TYPE_CGROUP_STORAGE</code> and <code>BPF_MAP_TYPE_PERCPU_CGROUP_STORAGE</code>.</p>
<p>For example:
<div class="highlight"><pre><span></span><code><a id="__codelineno-31-1" name="__codelineno-31-1" href="#__codelineno-31-1"></a><span class="n">BPF_ARRAY</span><span class="p">(</span><span class="n">ex1</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="p">,</span><span class="w"> </span><span class="mi">1024</span><span class="p">);</span>
<a id="__codelineno-31-2" name="__codelineno-31-2" href="#__codelineno-31-2"></a><span class="n">BPF_ARRAY</span><span class="p">(</span><span class="n">ex2</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="p">,</span><span class="w"> </span><span class="mi">1024</span><span class="p">);</span>
<a id="__codelineno-31-3" name="__codelineno-31-3" href="#__codelineno-31-3"></a><span class="n">BPF_HASH_OF_MAPS</span><span class="p">(</span><span class="n">maps_hash</span><span class="p">,</span><span class="w"> </span><span class="k">struct</span><span class="w"> </span><span class="nc">custom_key</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;ex1&quot;</span><span class="p">,</span><span class="w"> </span><span class="mi">10</span><span class="p">);</span>
</code></pre></div></p>
<h3 id="16-bpf_stack">16. BPF_STACK</h3>
<p>Syntax: <code>BPF_STACK(name, leaf_type, max_entries[, flags])</code></p>
<p>Creates a stack named <code>name</code> with value type <code>leaf_type</code> and max entries <code>max_entries</code>.
Stack and Queue maps are only available from Linux 4.20+.</p>
<p>For example:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-32-1" name="__codelineno-32-1" href="#__codelineno-32-1"></a><span class="n">BPF_STACK</span><span class="p">(</span><span class="n">stack</span><span class="p">,</span><span class="w"> </span><span class="k">struct</span><span class="w"> </span><span class="nc">event</span><span class="p">,</span><span class="w"> </span><span class="mi">10240</span><span class="p">);</span>
</code></pre></div>
<p>This creates a stack named <code>stack</code> where the value type is <code>struct event</code>, that holds up to 10240 entries.</p>
<p>Methods (covered later): map.push(), map.pop(), map.peek().</p>
<p>Examples in situ:
<a href="https://github.com/iovisor/bcc/tree/master/tests">search /tests</a>,</p>
<h3 id="17-bpf_queue">17. BPF_QUEUE</h3>
<p>Syntax: <code>BPF_QUEUE(name, leaf_type, max_entries[, flags])</code></p>
<p>Creates a queue named <code>name</code> with value type <code>leaf_type</code> and max entries <code>max_entries</code>.
Stack and Queue maps are only available from Linux 4.20+.</p>
<p>For example:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-33-1" name="__codelineno-33-1" href="#__codelineno-33-1"></a><span class="n">BPF_QUEUE</span><span class="p">(</span><span class="n">queue</span><span class="p">,</span><span class="w"> </span><span class="k">struct</span><span class="w"> </span><span class="nc">event</span><span class="p">,</span><span class="w"> </span><span class="mi">10240</span><span class="p">);</span>
</code></pre></div>
<p>This creates a queue named <code>queue</code> where the value type is <code>struct event</code>, that holds up to 10240 entries.</p>
<p>Methods (covered later): map.push(), map.pop(), map.peek().</p>
<p>Examples in situ:
<a href="https://github.com/iovisor/bcc/tree/master/tests">search /tests</a>,</p>
<h3 id="18-bpf_sockhash">18. BPF_SOCKHASH</h3>
<p>Syntax: <code>BPF_SOCKHASH(name[, key_type [, max_entries)</code></p>
<p>Creates a hash named <code>name</code>, with optional parameters. sockhash is only available from Linux 4.18+.</p>
<p>Default: <code>BPF_SOCKHASH(name, key_type=u32, max_entries=10240)</code></p>
<p>For example:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-34-1" name="__codelineno-34-1" href="#__codelineno-34-1"></a><span class="k">struct</span><span class="w"> </span><span class="nc">sock_key</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-34-2" name="__codelineno-34-2" href="#__codelineno-34-2"></a><span class="w">  </span><span class="n">u32</span><span class="w"> </span><span class="n">remote_ip4</span><span class="p">;</span>
<a id="__codelineno-34-3" name="__codelineno-34-3" href="#__codelineno-34-3"></a><span class="w">  </span><span class="n">u32</span><span class="w"> </span><span class="n">local_ip4</span><span class="p">;</span>
<a id="__codelineno-34-4" name="__codelineno-34-4" href="#__codelineno-34-4"></a><span class="w">  </span><span class="n">u32</span><span class="w"> </span><span class="n">remote_port</span><span class="p">;</span>
<a id="__codelineno-34-5" name="__codelineno-34-5" href="#__codelineno-34-5"></a><span class="w">  </span><span class="n">u32</span><span class="w"> </span><span class="n">local_port</span><span class="p">;</span>
<a id="__codelineno-34-6" name="__codelineno-34-6" href="#__codelineno-34-6"></a><span class="p">};</span>
<a id="__codelineno-34-7" name="__codelineno-34-7" href="#__codelineno-34-7"></a><span class="n">BPF_HASH</span><span class="p">(</span><span class="n">skh</span><span class="p">,</span><span class="w"> </span><span class="k">struct</span><span class="w"> </span><span class="nc">sock_key</span><span class="p">,</span><span class="w"> </span><span class="mi">65535</span><span class="p">);</span>
</code></pre></div>
<p>This creates a hash named <code>skh</code> where the key is a <code>struct sock_key</code>.</p>
<p>A sockhash is a BPF map type that holds references to sock structs. Then with a new sk/msg redirect bpf helper BPF programs can use the map to redirect skbs/msgs between sockets (<code>map.sk_redirect_hash()/map.msg_redirect_hash()</code>).</p>
<p>The difference between <code>BPF_SOCKHASH</code> and <code>BPF_SOCKMAP</code> is that <code>BPF_SOCKMAP</code> is implemented based on an array, and enforces keys to be four bytes. While <code>BPF_SOCKHASH</code> is implemented based on hash table, and the type of key can be specified freely.</p>
<p>Methods (covered later): map.sock_hash_update(), map.msg_redirect_hash(), map.sk_redirect_hash().</p>
<p><a href="https://github.com/iovisor/bcc/tree/master/tests">search /tests</a></p>
<h3 id="19-maplookup">19. map.lookup()</h3>
<p>Syntax: <code>*val map.lookup(&amp;key)</code></p>
<p>Lookup the key in the map, and return a pointer to its value if it exists, else NULL. We pass the key in as an address to a pointer.</p>
<p>Examples in situ:
<a href="https://github.com/iovisor/bcc/tree/master/examples">search /examples</a>,
<a href="https://github.com/iovisor/bcc/tree/master/tools">search /tools</a></p>
<h3 id="20-maplookup_or_try_init">20. map.lookup_or_try_init()</h3>
<p>Syntax: <code>*val map.lookup_or_try_init(&amp;key, &amp;zero)</code></p>
<p>Lookup the key in the map, and return a pointer to its value if it exists, else initialize the key's value to the second argument. This is often used to initialize values to zero. If the key cannot be inserted (e.g. the map is full) then NULL is returned.</p>
<p>Examples in situ:
<a href="https://github.com/iovisor/bcc/tree/master/examples">search /examples</a>,
<a href="https://github.com/iovisor/bcc/tree/master/tools">search /tools</a></p>
<p>Note: The old map.lookup_or_init() may cause return from the function, so lookup_or_try_init() is recommended as it
does not have this side effect.</p>
<h3 id="21-mapdelete">21. map.delete()</h3>
<p>Syntax: <code>map.delete(&amp;key)</code></p>
<p>Delete the key from the hash.</p>
<p>Examples in situ:
<a href="https://github.com/iovisor/bcc/tree/master/examples">search /examples</a>,
<a href="https://github.com/iovisor/bcc/tree/master/tools">search /tools</a></p>
<h3 id="22-mapupdate">22. map.update()</h3>
<p>Syntax: <code>map.update(&amp;key, &amp;val)</code></p>
<p>Associate the value in the second argument to the key, overwriting any previous value.</p>
<p>Examples in situ:
<a href="https://github.com/iovisor/bcc/tree/master/examples">search /examples</a>,
<a href="https://github.com/iovisor/bcc/tree/master/tools">search /tools</a></p>
<h3 id="23-mapinsert">23. map.insert()</h3>
<p>Syntax: <code>map.insert(&amp;key, &amp;val)</code></p>
<p>Associate the value in the second argument to the key, only if there was no previous value.</p>
<p>Examples in situ:
<a href="https://github.com/iovisor/bcc/tree/master/examples">search /examples</a>,
<a href="https://github.com/iovisor/bcc/tree/master/tools">search /tools</a></p>
<h3 id="24-mapincrement">24. map.increment()</h3>
<p>Syntax: <code>map.increment(key[, increment_amount])</code></p>
<p>Increments the key's value by <code>increment_amount</code>, which defaults to 1. Used for histograms.</p>
<p><code>map.increment()</code> are not atomic. In the concurrency case. If you want more accurate results, use <code>map.atomic_increment()</code> instead of <code>map.increment()</code>. The overhead of <code>map.increment()</code> and <code>map.atomic_increment()</code> is similar.</p>
<p>Note. When using <code>map.atomic_increment()</code> to operate on a BPF map of type <code>BPF_MAP_TYPE_HASH</code>, <code>map.atomic_increment()</code> does not guarantee the atomicity of the operation when the specified key does not exist.</p>
<p>Examples in situ:
<a href="https://github.com/iovisor/bcc/tree/master/examples">search /examples</a>,
<a href="https://github.com/iovisor/bcc/tree/master/tools">search /tools</a></p>
<h3 id="25-mapget_stackid">25. map.get_stackid()</h3>
<p>Syntax: <code>int map.get_stackid(void *ctx, u64 flags)</code></p>
<p>This walks the stack found via the struct pt_regs in <code>ctx</code>, saves it in the stack trace map, and returns a unique ID for the stack trace.</p>
<p>Examples in situ:
<a href="https://github.com/iovisor/bcc/tree/master/examples">search /examples</a>,
<a href="https://github.com/iovisor/bcc/tree/master/tools">search /tools</a></p>
<h3 id="26-mapperf_read">26. map.perf_read()</h3>
<p>Syntax: <code>u64 map.perf_read(u32 cpu)</code></p>
<p>This returns the hardware performance counter as configured in <a href="#5-bpf_perf_array">5. BPF_PERF_ARRAY</a></p>
<p>Examples in situ:
<a href="https://github.com/iovisor/bcc/tree/master/tests">search /tests</a></p>
<h3 id="27-mapcall">27. map.call()</h3>
<p>Syntax: <code>void map.call(void *ctx, int index)</code></p>
<p>This invokes <code>bpf_tail_call()</code> to tail-call the bpf program which the <code>index</code> entry in <a href="#10-bpf_prog_array">BPF_PROG_ARRAY</a> points to. A tail-call is different from the normal call. It reuses the current stack frame after jumping to another bpf program and never goes back. If the <code>index</code> entry is empty, it won't jump anywhere and the program execution continues as normal.</p>
<p>For example:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-35-1" name="__codelineno-35-1" href="#__codelineno-35-1"></a><span class="n">BPF_PROG_ARRAY</span><span class="p">(</span><span class="n">prog_array</span><span class="p">,</span><span class="w"> </span><span class="mi">10</span><span class="p">);</span>
<a id="__codelineno-35-2" name="__codelineno-35-2" href="#__codelineno-35-2"></a>
<a id="__codelineno-35-3" name="__codelineno-35-3" href="#__codelineno-35-3"></a><span class="kt">int</span><span class="w"> </span><span class="nf">tail_call</span><span class="p">(</span><span class="kt">void</span><span class="w"> </span><span class="o">*</span><span class="n">ctx</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-35-4" name="__codelineno-35-4" href="#__codelineno-35-4"></a><span class="w">    </span><span class="n">bpf_trace_printk</span><span class="p">(</span><span class="s">&quot;Tail-call</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
<a id="__codelineno-35-5" name="__codelineno-35-5" href="#__codelineno-35-5"></a><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<a id="__codelineno-35-6" name="__codelineno-35-6" href="#__codelineno-35-6"></a><span class="p">}</span>
<a id="__codelineno-35-7" name="__codelineno-35-7" href="#__codelineno-35-7"></a>
<a id="__codelineno-35-8" name="__codelineno-35-8" href="#__codelineno-35-8"></a><span class="kt">int</span><span class="w"> </span><span class="nf">do_tail_call</span><span class="p">(</span><span class="kt">void</span><span class="w"> </span><span class="o">*</span><span class="n">ctx</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-35-9" name="__codelineno-35-9" href="#__codelineno-35-9"></a><span class="w">    </span><span class="n">bpf_trace_printk</span><span class="p">(</span><span class="s">&quot;Original program</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
<a id="__codelineno-35-10" name="__codelineno-35-10" href="#__codelineno-35-10"></a><span class="w">    </span><span class="n">prog_array</span><span class="p">.</span><span class="n">call</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">);</span>
<a id="__codelineno-35-11" name="__codelineno-35-11" href="#__codelineno-35-11"></a><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<a id="__codelineno-35-12" name="__codelineno-35-12" href="#__codelineno-35-12"></a><span class="p">}</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><a id="__codelineno-36-1" name="__codelineno-36-1" href="#__codelineno-36-1"></a><span class="n">b</span> <span class="o">=</span> <span class="n">BPF</span><span class="p">(</span><span class="n">src_file</span><span class="o">=</span><span class="s2">&quot;example.c&quot;</span><span class="p">)</span>
<a id="__codelineno-36-2" name="__codelineno-36-2" href="#__codelineno-36-2"></a><span class="n">tail_fn</span> <span class="o">=</span> <span class="n">b</span><span class="o">.</span><span class="n">load_func</span><span class="p">(</span><span class="s2">&quot;tail_call&quot;</span><span class="p">,</span> <span class="n">BPF</span><span class="o">.</span><span class="n">KPROBE</span><span class="p">)</span>
<a id="__codelineno-36-3" name="__codelineno-36-3" href="#__codelineno-36-3"></a><span class="n">prog_array</span> <span class="o">=</span> <span class="n">b</span><span class="o">.</span><span class="n">get_table</span><span class="p">(</span><span class="s2">&quot;prog_array&quot;</span><span class="p">)</span>
<a id="__codelineno-36-4" name="__codelineno-36-4" href="#__codelineno-36-4"></a><span class="n">prog_array</span><span class="p">[</span><span class="n">c_int</span><span class="p">(</span><span class="mi">2</span><span class="p">)]</span> <span class="o">=</span> <span class="n">c_int</span><span class="p">(</span><span class="n">tail_fn</span><span class="o">.</span><span class="n">fd</span><span class="p">)</span>
<a id="__codelineno-36-5" name="__codelineno-36-5" href="#__codelineno-36-5"></a><span class="n">b</span><span class="o">.</span><span class="n">attach_kprobe</span><span class="p">(</span><span class="n">event</span><span class="o">=</span><span class="s2">&quot;some_kprobe_event&quot;</span><span class="p">,</span> <span class="n">fn_name</span><span class="o">=</span><span class="s2">&quot;do_tail_call&quot;</span><span class="p">)</span>
</code></pre></div>
<p>This assigns <code>tail_call()</code> to <code>prog_array[2]</code>. In the end of <code>do_tail_call()</code>, <code>prog_array.call(ctx, 2)</code> tail-calls <code>tail_call()</code> and executes it.</p>
<p><strong>NOTE:</strong> To prevent infinite loop, the maximum number of tail-calls is 32 (<a href="https://github.com/torvalds/linux/search?l=C&amp;q=MAX_TAIL_CALL_CNT+path%3Ainclude%2Flinux&amp;type=Code"><code>MAX_TAIL_CALL_CNT</code></a>).</p>
<p>Examples in situ:
<a href="https://github.com/iovisor/bcc/search?l=C&amp;q=call+path%3Aexamples&amp;type=Code">search /examples</a>,
<a href="https://github.com/iovisor/bcc/search?l=C&amp;q=call+path%3Atests&amp;type=Code">search /tests</a></p>
<h3 id="28-mapredirect_map">28. map.redirect_map()</h3>
<p>Syntax: <code>int map.redirect_map(int index, int flags)</code></p>
<p>This redirects the incoming packets based on the <code>index</code> entry. If the map is <a href="#11-bpf_devmap">BPF_DEVMAP</a>, the packet will be sent to the transmit queue of the network interface that the entry points to. If the map is <a href="#12-bpf_cpumap">BPF_CPUMAP</a>, the packet will be sent to the ring buffer of the <code>index</code> CPU and be processed by the CPU later. If the map is <a href="#13-bpf_xskmap">BPF_XSKMAP</a>, the packet will be sent to the AF_XDP socket attached to the queue.</p>
<p>If the packet is redirected successfully, the function will return XDP_REDIRECT. Otherwise, it will return XDP_ABORTED to discard the packet.</p>
<p>For example:
<div class="highlight"><pre><span></span><code><a id="__codelineno-37-1" name="__codelineno-37-1" href="#__codelineno-37-1"></a><span class="n">BPF_DEVMAP</span><span class="p">(</span><span class="n">devmap</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">);</span>
<a id="__codelineno-37-2" name="__codelineno-37-2" href="#__codelineno-37-2"></a>
<a id="__codelineno-37-3" name="__codelineno-37-3" href="#__codelineno-37-3"></a><span class="kt">int</span><span class="w"> </span><span class="nf">redirect_example</span><span class="p">(</span><span class="k">struct</span><span class="w"> </span><span class="nc">xdp_md</span><span class="w"> </span><span class="o">*</span><span class="n">ctx</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-37-4" name="__codelineno-37-4" href="#__codelineno-37-4"></a><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">devmap</span><span class="p">.</span><span class="n">redirect_map</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">);</span>
<a id="__codelineno-37-5" name="__codelineno-37-5" href="#__codelineno-37-5"></a><span class="p">}</span>
<a id="__codelineno-37-6" name="__codelineno-37-6" href="#__codelineno-37-6"></a><span class="kt">int</span><span class="w"> </span><span class="nf">xdp_dummy</span><span class="p">(</span><span class="k">struct</span><span class="w"> </span><span class="nc">xdp_md</span><span class="w"> </span><span class="o">*</span><span class="n">ctx</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-37-7" name="__codelineno-37-7" href="#__codelineno-37-7"></a><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">XDP_PASS</span><span class="p">;</span>
<a id="__codelineno-37-8" name="__codelineno-37-8" href="#__codelineno-37-8"></a><span class="p">}</span>
</code></pre></div></p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-38-1" name="__codelineno-38-1" href="#__codelineno-38-1"></a><span class="n">ip</span> <span class="o">=</span> <span class="n">pyroute2</span><span class="o">.</span><span class="n">IPRoute</span><span class="p">()</span>
<a id="__codelineno-38-2" name="__codelineno-38-2" href="#__codelineno-38-2"></a><span class="n">idx</span> <span class="o">=</span> <span class="n">ip</span><span class="o">.</span><span class="n">link_lookup</span><span class="p">(</span><span class="n">ifname</span><span class="o">=</span><span class="s2">&quot;eth1&quot;</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
<a id="__codelineno-38-3" name="__codelineno-38-3" href="#__codelineno-38-3"></a>
<a id="__codelineno-38-4" name="__codelineno-38-4" href="#__codelineno-38-4"></a><span class="n">b</span> <span class="o">=</span> <span class="n">bcc</span><span class="o">.</span><span class="n">BPF</span><span class="p">(</span><span class="n">src_file</span><span class="o">=</span><span class="s2">&quot;example.c&quot;</span><span class="p">)</span>
<a id="__codelineno-38-5" name="__codelineno-38-5" href="#__codelineno-38-5"></a>
<a id="__codelineno-38-6" name="__codelineno-38-6" href="#__codelineno-38-6"></a><span class="n">devmap</span> <span class="o">=</span> <span class="n">b</span><span class="o">.</span><span class="n">get_table</span><span class="p">(</span><span class="s2">&quot;devmap&quot;</span><span class="p">)</span>
<a id="__codelineno-38-7" name="__codelineno-38-7" href="#__codelineno-38-7"></a><span class="n">devmap</span><span class="p">[</span><span class="n">c_uint32</span><span class="p">(</span><span class="mi">0</span><span class="p">)]</span> <span class="o">=</span> <span class="n">c_int</span><span class="p">(</span><span class="n">idx</span><span class="p">)</span>
<a id="__codelineno-38-8" name="__codelineno-38-8" href="#__codelineno-38-8"></a>
<a id="__codelineno-38-9" name="__codelineno-38-9" href="#__codelineno-38-9"></a><span class="n">in_fn</span> <span class="o">=</span> <span class="n">b</span><span class="o">.</span><span class="n">load_func</span><span class="p">(</span><span class="s2">&quot;redirect_example&quot;</span><span class="p">,</span> <span class="n">BPF</span><span class="o">.</span><span class="n">XDP</span><span class="p">)</span>
<a id="__codelineno-38-10" name="__codelineno-38-10" href="#__codelineno-38-10"></a><span class="n">out_fn</span> <span class="o">=</span> <span class="n">b</span><span class="o">.</span><span class="n">load_func</span><span class="p">(</span><span class="s2">&quot;xdp_dummy&quot;</span><span class="p">,</span> <span class="n">BPF</span><span class="o">.</span><span class="n">XDP</span><span class="p">)</span>
<a id="__codelineno-38-11" name="__codelineno-38-11" href="#__codelineno-38-11"></a><span class="n">b</span><span class="o">.</span><span class="n">attach_xdp</span><span class="p">(</span><span class="s2">&quot;eth0&quot;</span><span class="p">,</span> <span class="n">in_fn</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
<a id="__codelineno-38-12" name="__codelineno-38-12" href="#__codelineno-38-12"></a><span class="n">b</span><span class="o">.</span><span class="n">attach_xdp</span><span class="p">(</span><span class="s2">&quot;eth1&quot;</span><span class="p">,</span> <span class="n">out_fn</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
</code></pre></div>
<p>Examples in situ:
<a href="https://github.com/iovisor/bcc/search?l=C&amp;q=redirect_map+path%3Aexamples&amp;type=Code">search /examples</a>,</p>
<h3 id="29-mappush">29. map.push()</h3>
<p>Syntax: <code>int map.push(&amp;val, int flags)</code></p>
<p>Push an element onto a Stack or Queue table.
Passing BPF_EXIST as a flag causes the Queue or Stack to discard the oldest element if it is full.
Returns 0 on success, negative error on failure.</p>
<p>Examples in situ:
<a href="https://github.com/iovisor/bcc/tree/master/tests">search /tests</a>,</p>
<h3 id="30-mappop">30. map.pop()</h3>
<p>Syntax: <code>int map.pop(&amp;val)</code></p>
<p>Pop an element from a Stack or Queue table. <code>*val</code> is populated with the result.
Unlike peeking, popping removes the element.
Returns 0 on success, negative error on failure.</p>
<p>Examples in situ:
<a href="https://github.com/iovisor/bcc/tree/master/tests">search /tests</a>,</p>
<h3 id="31-mappeek">31. map.peek()</h3>
<p>Syntax: <code>int map.peek(&amp;val)</code></p>
<p>Peek an element at the head of a Stack or Queue table. <code>*val</code> is populated with the result.
Unlike popping, peeking does not remove the element.
Returns 0 on success, negative error on failure.</p>
<p>Examples in situ:
<a href="https://github.com/iovisor/bcc/tree/master/tests">search /tests</a>,</p>
<h3 id="32-mapsock_hash_update">32. map.sock_hash_update()</h3>
<p>Syntax: <code>int map.sock_hash_update(struct bpf_sock_ops *skops, &amp;key, int flags)</code></p>
<p>Add an entry to, or update a sockhash map referencing sockets. The skops is used as a new value for the entry associated to key. flags is one of:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-39-1" name="__codelineno-39-1" href="#__codelineno-39-1"></a>BPF_NOEXIST:<span class="w"> </span>The<span class="w"> </span>entry<span class="w"> </span><span class="k">for</span><span class="w"> </span>key<span class="w"> </span>must<span class="w"> </span>not<span class="w"> </span>exist<span class="w"> </span><span class="k">in</span><span class="w"> </span>the<span class="w"> </span>map.
<a id="__codelineno-39-2" name="__codelineno-39-2" href="#__codelineno-39-2"></a>BPF_EXIST:<span class="w"> </span>The<span class="w"> </span>entry<span class="w"> </span><span class="k">for</span><span class="w"> </span>key<span class="w"> </span>must<span class="w"> </span>already<span class="w"> </span>exist<span class="w"> </span><span class="k">in</span><span class="w"> </span>the<span class="w"> </span>map.
<a id="__codelineno-39-3" name="__codelineno-39-3" href="#__codelineno-39-3"></a>BPF_ANY:<span class="w"> </span>No<span class="w"> </span>condition<span class="w"> </span>on<span class="w"> </span>the<span class="w"> </span>existence<span class="w"> </span>of<span class="w"> </span>the<span class="w"> </span>entry<span class="w"> </span><span class="k">for</span><span class="w"> </span>key.
</code></pre></div>
<p>If the map has eBPF programs (parser and verdict), those will be inherited by the socket being added. If the socket is already attached to eBPF programs, this results in an error.</p>
<p>Return 0 on success, or a negative error in case of failure.</p>
<p>Examples in situ:
<a href="https://github.com/iovisor/bcc/tree/master/tests">search /tests</a>,</p>
<h3 id="33-mapmsg_redirect_hash">33. map.msg_redirect_hash()</h3>
<p>Syntax: <code>int map.msg_redirect_hash(struct sk_msg_buff *msg, void *key, u64 flags)</code></p>
<p>This helper is used in programs implementing policies at the socket level. If the message msg is allowed to pass (i.e. if the verdict eBPF program returns SK_PASS), redirect it to the socket referenced by map (of type BPF_MAP_TYPE_SOCKHASH) using hash key. Both ingress and egress interfaces can be used for redirection. The BPF_F_INGRESS value in flags is used to make the distinction (ingress path is selected if the flag is present, egress path otherwise). This is the only flag supported for now.</p>
<p>Return SK_PASS on success, or SK_DROP on error.</p>
<p>Examples in situ:
<a href="https://github.com/iovisor/bcc/tree/master/tests">search /tests</a>,</p>
<h3 id="34-mapsk_redirect_hash">34. map.sk_redirect_hash()</h3>
<p>Syntax: <code>int map.sk_redirect_hash(struct sk_buff *skb, void *key, u64 flags)</code></p>
<p>This helper is used in programs implementing policies at the skb socket level. If the sk_buff skb is allowed to pass (i.e. if the verdict eBPF program returns SK_PASS), redirect it to the socket referenced by map (of  type  BPF_MAP_TYPE_SOCKHASH) using hash key. Both ingress and egress interfaces can be used for redirection. The BPF_F_INGRESS value in flags is used to make the distinction (ingress path is selected if the flag is present, egress otherwise). This is the only flag supported for now.</p>
<p>Return SK_PASS on success, or SK_DROP on error.</p>
<p>Examples in situ:
<a href="https://github.com/iovisor/bcc/tree/master/tests">search /tests</a>,</p>
<h2 id="licensing">Licensing</h2>
<p>Depending on which <a href="../kernel-versions/#helpers">BPF helpers</a> are used, a GPL-compatible license is required.</p>
<p>The special BCC macro <code>BPF_LICENSE</code> specifies the license of the BPF program. You can set the license as a comment in your source code, but the kernel has a special interface to specify it programmatically. If you need to use GPL-only helpers, it is recommended to specify the macro in your C code so that the kernel can understand it:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-40-1" name="__codelineno-40-1" href="#__codelineno-40-1"></a><span class="c1">// SPDX-License-Identifier: GPL-2.0+</span>
<a id="__codelineno-40-2" name="__codelineno-40-2" href="#__codelineno-40-2"></a><span class="cp">#define BPF_LICENSE GPL</span>
</code></pre></div>
<p>Otherwise, the kernel may reject loading your program (see the <a href="#2-cannot-call-gpl-only-function-from-proprietary-program">error description</a> below). Note that it supports multiple words and quotes are not necessary:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-41-1" name="__codelineno-41-1" href="#__codelineno-41-1"></a><span class="c1">// SPDX-License-Identifier: GPL-2.0+ OR BSD-2-Clause</span>
<a id="__codelineno-41-2" name="__codelineno-41-2" href="#__codelineno-41-2"></a><span class="cp">#define BPF_LICENSE Dual BSD/GPL</span>
</code></pre></div>
<p>Check the <a href="../kernel-versions/#helpers">BPF helpers reference</a> to see which helpers are GPL-only and what the kernel understands as GPL-compatible.</p>
<p><strong>If the macro is not specified, BCC will automatically define the license of the program as GPL.</strong></p>
<h2 id="rewriter">Rewriter</h2>
<p>One of jobs for rewriter is to turn implicit memory accesses to explicit ones using kernel helpers. Recent kernel introduced a config option ARCH_HAS_NON_OVERLAPPING_ADDRESS_SPACE which will be set for architectures who user address space and kernel address are disjoint. x86 and arm has this config option set while s390 does not. If ARCH_HAS_NON_OVERLAPPING_ADDRESS_SPACE is not set, the bpf old helper <code>bpf_probe_read()</code> will not be available. Some existing users may have implicit memory accesses to access user memory, so using <code>bpf_probe_read_kernel()</code> will cause their application to fail. Therefore, for non-s390, the rewriter will use <code>bpf_probe_read()</code> for these implicit memory accesses. For s390, <code>bpf_probe_read_kernel()</code> is used as default and users should use <code>bpf_probe_read_user()</code> explicitly when accessing user memories.</p>
<h1 id="bcc-python">bcc Python</h1>
<h2 id="initialization">Initialization</h2>
<p>Constructors.</p>
<h3 id="1-bpf">1. BPF</h3>
<p>Syntax: <code>BPF({text=BPF_program | src_file=filename} [, usdt_contexts=[USDT_object, ...]] [, cflags=[arg1, ...]] [, debug=int])</code></p>
<p>Creates a BPF object. This is the main object for defining a BPF program, and interacting with its output.</p>
<p>Exactly one of <code>text</code> or <code>src_file</code> must be supplied (not both).</p>
<p>The <code>cflags</code> specifies additional arguments to be passed to the compiler, for example <code>-DMACRO_NAME=value</code> or <code>-I/include/path</code>.  The arguments are passed as an array, with each element being an additional argument.  Note that strings are not split on whitespace, so each argument must be a different element of the array, e.g. <code>["-include", "header.h"]</code>.</p>
<p>The <code>debug</code> flags control debug output, and can be or'ed together:
- <code>DEBUG_LLVM_IR = 0x1</code> compiled LLVM IR
- <code>DEBUG_BPF = 0x2</code> loaded BPF bytecode and register state on branches
- <code>DEBUG_PREPROCESSOR = 0x4</code> pre-processor result
- <code>DEBUG_SOURCE = 0x8</code> ASM instructions embedded with source
- <code>DEBUG_BPF_REGISTER_STATE = 0x10</code> register state on all instructions in addition to DEBUG_BPF
- <code>DEBUG_BTF = 0x20</code> print the messages from the <code>libbpf</code> library.</p>
<p>Examples:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-42-1" name="__codelineno-42-1" href="#__codelineno-42-1"></a><span class="c1"># define entire BPF program in one line:</span>
<a id="__codelineno-42-2" name="__codelineno-42-2" href="#__codelineno-42-2"></a><span class="n">BPF</span><span class="p">(</span><span class="n">text</span><span class="o">=</span><span class="s1">&#39;int do_trace(void *ctx) { bpf_trace_printk(&quot;hit!</span><span class="se">\\</span><span class="s1">n&quot;); return 0; }&#39;</span><span class="p">);</span>
<a id="__codelineno-42-3" name="__codelineno-42-3" href="#__codelineno-42-3"></a>
<a id="__codelineno-42-4" name="__codelineno-42-4" href="#__codelineno-42-4"></a><span class="c1"># define program as a variable:</span>
<a id="__codelineno-42-5" name="__codelineno-42-5" href="#__codelineno-42-5"></a><span class="n">prog</span> <span class="o">=</span> <span class="s2">&quot;&quot;&quot;</span>
<a id="__codelineno-42-6" name="__codelineno-42-6" href="#__codelineno-42-6"></a><span class="s2">int hello(void *ctx) {</span>
<a id="__codelineno-42-7" name="__codelineno-42-7" href="#__codelineno-42-7"></a><span class="s2">    bpf_trace_printk(&quot;Hello, World!</span><span class="se">\\</span><span class="s2">n&quot;);</span>
<a id="__codelineno-42-8" name="__codelineno-42-8" href="#__codelineno-42-8"></a><span class="s2">    return 0;</span>
<a id="__codelineno-42-9" name="__codelineno-42-9" href="#__codelineno-42-9"></a><span class="s2">}</span>
<a id="__codelineno-42-10" name="__codelineno-42-10" href="#__codelineno-42-10"></a><span class="s2">&quot;&quot;&quot;</span>
<a id="__codelineno-42-11" name="__codelineno-42-11" href="#__codelineno-42-11"></a><span class="n">b</span> <span class="o">=</span> <span class="n">BPF</span><span class="p">(</span><span class="n">text</span><span class="o">=</span><span class="n">prog</span><span class="p">)</span>
<a id="__codelineno-42-12" name="__codelineno-42-12" href="#__codelineno-42-12"></a>
<a id="__codelineno-42-13" name="__codelineno-42-13" href="#__codelineno-42-13"></a><span class="c1"># source a file:</span>
<a id="__codelineno-42-14" name="__codelineno-42-14" href="#__codelineno-42-14"></a><span class="n">b</span> <span class="o">=</span> <span class="n">BPF</span><span class="p">(</span><span class="n">src_file</span> <span class="o">=</span> <span class="s2">&quot;vfsreadlat.c&quot;</span><span class="p">)</span>
<a id="__codelineno-42-15" name="__codelineno-42-15" href="#__codelineno-42-15"></a>
<a id="__codelineno-42-16" name="__codelineno-42-16" href="#__codelineno-42-16"></a><span class="c1"># include a USDT object:</span>
<a id="__codelineno-42-17" name="__codelineno-42-17" href="#__codelineno-42-17"></a><span class="n">u</span> <span class="o">=</span> <span class="n">USDT</span><span class="p">(</span><span class="n">pid</span><span class="o">=</span><span class="nb">int</span><span class="p">(</span><span class="n">pid</span><span class="p">))</span>
<a id="__codelineno-42-18" name="__codelineno-42-18" href="#__codelineno-42-18"></a><span class="p">[</span><span class="o">...</span><span class="p">]</span>
<a id="__codelineno-42-19" name="__codelineno-42-19" href="#__codelineno-42-19"></a><span class="n">b</span> <span class="o">=</span> <span class="n">BPF</span><span class="p">(</span><span class="n">text</span><span class="o">=</span><span class="n">bpf_text</span><span class="p">,</span> <span class="n">usdt_contexts</span><span class="o">=</span><span class="p">[</span><span class="n">u</span><span class="p">])</span>
<a id="__codelineno-42-20" name="__codelineno-42-20" href="#__codelineno-42-20"></a>
<a id="__codelineno-42-21" name="__codelineno-42-21" href="#__codelineno-42-21"></a><span class="c1"># add include paths:</span>
<a id="__codelineno-42-22" name="__codelineno-42-22" href="#__codelineno-42-22"></a><span class="n">u</span> <span class="o">=</span> <span class="n">BPF</span><span class="p">(</span><span class="n">text</span><span class="o">=</span><span class="n">prog</span><span class="p">,</span> <span class="n">cflags</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;-I/path/to/include&quot;</span><span class="p">])</span>
</code></pre></div>
<p>Examples in situ:
<a href="https://github.com/iovisor/bcc/tree/master/examples">search /examples</a>,
<a href="https://github.com/iovisor/bcc/tree/master/tools">search /tools</a></p>
<h3 id="2-usdt">2. USDT</h3>
<p>Syntax: <code>USDT({pid=pid | path=path})</code></p>
<p>Creates an object to instrument User Statically-Defined Tracing (USDT) probes. Its primary method is <code>enable_probe()</code>.</p>
<p>Arguments:</p>
<ul>
<li>pid: attach to this process ID.</li>
<li>path: instrument USDT probes from this binary path.</li>
</ul>
<p>Examples:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-43-1" name="__codelineno-43-1" href="#__codelineno-43-1"></a><span class="c1"># include a USDT object:</span>
<a id="__codelineno-43-2" name="__codelineno-43-2" href="#__codelineno-43-2"></a><span class="n">u</span> <span class="o">=</span> <span class="n">USDT</span><span class="p">(</span><span class="n">pid</span><span class="o">=</span><span class="nb">int</span><span class="p">(</span><span class="n">pid</span><span class="p">))</span>
<a id="__codelineno-43-3" name="__codelineno-43-3" href="#__codelineno-43-3"></a><span class="p">[</span><span class="o">...</span><span class="p">]</span>
<a id="__codelineno-43-4" name="__codelineno-43-4" href="#__codelineno-43-4"></a><span class="n">b</span> <span class="o">=</span> <span class="n">BPF</span><span class="p">(</span><span class="n">text</span><span class="o">=</span><span class="n">bpf_text</span><span class="p">,</span> <span class="n">usdt_contexts</span><span class="o">=</span><span class="p">[</span><span class="n">u</span><span class="p">])</span>
</code></pre></div>
<p>Examples in situ:
<a href="https://github.com/iovisor/bcc/tree/master/examples">search /examples</a>,
<a href="https://github.com/iovisor/bcc/tree/master/tools">search /tools</a></p>
<h2 id="events">Events</h2>
<h3 id="1-attach_kprobe">1. attach_kprobe()</h3>
<p>Syntax: <code>BPF.attach_kprobe(event="event", fn_name="name")</code></p>
<p>Instruments the kernel function <code>event()</code> using kernel dynamic tracing of the function entry, and attaches our C defined function <code>name()</code> to be called when the kernel function is called.</p>
<p>For example:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-44-1" name="__codelineno-44-1" href="#__codelineno-44-1"></a><span class="n">b</span><span class="o">.</span><span class="n">attach_kprobe</span><span class="p">(</span><span class="n">event</span><span class="o">=</span><span class="s2">&quot;sys_clone&quot;</span><span class="p">,</span> <span class="n">fn_name</span><span class="o">=</span><span class="s2">&quot;do_trace&quot;</span><span class="p">)</span>
</code></pre></div>
<p>This will instrument the kernel <code>sys_clone()</code> function, which will then run our BPF defined <code>do_trace()</code> function each time it is called.</p>
<p>You can call attach_kprobe() more than once, and attach your BPF function to multiple kernel functions.
You can also call attach_kprobe() more than once to attach multiple BPF functions to the same kernel function.</p>
<p>See the previous kprobes section for how to instrument arguments from BPF.</p>
<p>Examples in situ:
<a href="https://github.com/iovisor/bcc/tree/master/examples">search /examples</a>,
<a href="https://github.com/iovisor/bcc/tree/master/tools">search /tools</a></p>
<h3 id="2-attach_kretprobe">2. attach_kretprobe()</h3>
<p>Syntax: <code>BPF.attach_kretprobe(event="event", fn_name="name" [, maxactive=int])</code></p>
<p>Instruments the return of the kernel function <code>event()</code> using kernel dynamic tracing of the function return, and attaches our C defined function <code>name()</code> to be called when the kernel function returns.</p>
<p>For example:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-45-1" name="__codelineno-45-1" href="#__codelineno-45-1"></a><span class="n">b</span><span class="o">.</span><span class="n">attach_kretprobe</span><span class="p">(</span><span class="n">event</span><span class="o">=</span><span class="s2">&quot;vfs_read&quot;</span><span class="p">,</span> <span class="n">fn_name</span><span class="o">=</span><span class="s2">&quot;do_return&quot;</span><span class="p">)</span>
</code></pre></div>
<p>This will instrument the kernel <code>vfs_read()</code> function, which will then run our BPF defined <code>do_return()</code> function each time it is called.</p>
<p>You can call attach_kretprobe() more than once, and attach your BPF function to multiple kernel function returns.
You can also call attach_kretprobe() more than once to attach multiple BPF functions to the same kernel function return.</p>
<p>When a kretprobe is installed on a kernel function, there is a limit on how many parallel calls it can catch. You can change that limit with <code>maxactive</code>. See the kprobes documentation for its default value.</p>
<p>See the previous kretprobes section for how to instrument the return value from BPF.</p>
<p>Examples in situ:
<a href="https://github.com/iovisor/bcc/tree/master/examples">search /examples</a>,
<a href="https://github.com/iovisor/bcc/tree/master/tools">search /tools</a></p>
<h3 id="3-attach_tracepoint">3. attach_tracepoint()</h3>
<p>Syntax: <code>BPF.attach_tracepoint(tp="tracepoint", fn_name="name")</code></p>
<p>Instruments the kernel tracepoint described by <code>tracepoint</code>, and when hit, runs the BPF function <code>name()</code>.</p>
<p>This is an explicit way to instrument tracepoints. The <code>TRACEPOINT_PROBE</code> syntax, covered in the earlier tracepoints section, is an alternate method with the advantage of auto-declaring an <code>args</code> struct containing the tracepoint arguments. With <code>attach_tracepoint()</code>, the tracepoint arguments need to be declared in the BPF program.</p>
<p>For example:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-46-1" name="__codelineno-46-1" href="#__codelineno-46-1"></a><span class="c1"># define BPF program</span>
<a id="__codelineno-46-2" name="__codelineno-46-2" href="#__codelineno-46-2"></a><span class="n">bpf_text</span> <span class="o">=</span> <span class="s2">&quot;&quot;&quot;</span>
<a id="__codelineno-46-3" name="__codelineno-46-3" href="#__codelineno-46-3"></a><span class="s2">#include &lt;uapi/linux/ptrace.h&gt;</span>
<a id="__codelineno-46-4" name="__codelineno-46-4" href="#__codelineno-46-4"></a>
<a id="__codelineno-46-5" name="__codelineno-46-5" href="#__codelineno-46-5"></a><span class="s2">struct urandom_read_args {</span>
<a id="__codelineno-46-6" name="__codelineno-46-6" href="#__codelineno-46-6"></a><span class="s2">    // from /sys/kernel/debug/tracing/events/random/urandom_read/format</span>
<a id="__codelineno-46-7" name="__codelineno-46-7" href="#__codelineno-46-7"></a><span class="s2">    u64 __unused__;</span>
<a id="__codelineno-46-8" name="__codelineno-46-8" href="#__codelineno-46-8"></a><span class="s2">    u32 got_bits;</span>
<a id="__codelineno-46-9" name="__codelineno-46-9" href="#__codelineno-46-9"></a><span class="s2">    u32 pool_left;</span>
<a id="__codelineno-46-10" name="__codelineno-46-10" href="#__codelineno-46-10"></a><span class="s2">    u32 input_left;</span>
<a id="__codelineno-46-11" name="__codelineno-46-11" href="#__codelineno-46-11"></a><span class="s2">};</span>
<a id="__codelineno-46-12" name="__codelineno-46-12" href="#__codelineno-46-12"></a>
<a id="__codelineno-46-13" name="__codelineno-46-13" href="#__codelineno-46-13"></a><span class="s2">int printarg(struct urandom_read_args *args) {</span>
<a id="__codelineno-46-14" name="__codelineno-46-14" href="#__codelineno-46-14"></a><span class="s2">    bpf_trace_printk(&quot;</span><span class="si">%d</span><span class="se">\\</span><span class="s2">n&quot;, args-&gt;got_bits);</span>
<a id="__codelineno-46-15" name="__codelineno-46-15" href="#__codelineno-46-15"></a><span class="s2">    return 0;</span>
<a id="__codelineno-46-16" name="__codelineno-46-16" href="#__codelineno-46-16"></a><span class="s2">};</span>
<a id="__codelineno-46-17" name="__codelineno-46-17" href="#__codelineno-46-17"></a><span class="s2">&quot;&quot;&quot;</span>
<a id="__codelineno-46-18" name="__codelineno-46-18" href="#__codelineno-46-18"></a>
<a id="__codelineno-46-19" name="__codelineno-46-19" href="#__codelineno-46-19"></a><span class="c1"># load BPF program</span>
<a id="__codelineno-46-20" name="__codelineno-46-20" href="#__codelineno-46-20"></a><span class="n">b</span> <span class="o">=</span> <span class="n">BPF</span><span class="p">(</span><span class="n">text</span><span class="o">=</span><span class="n">bpf_text</span><span class="p">)</span>
<a id="__codelineno-46-21" name="__codelineno-46-21" href="#__codelineno-46-21"></a><span class="n">b</span><span class="o">.</span><span class="n">attach_tracepoint</span><span class="p">(</span><span class="s2">&quot;random:urandom_read&quot;</span><span class="p">,</span> <span class="s2">&quot;printarg&quot;</span><span class="p">)</span>
</code></pre></div>
<p>Notice how the first argument to <code>printarg()</code> is now our defined struct.</p>
<p>Examples in situ:
<a href="https://github.com/iovisor/bcc/blob/a4159da8c4ea8a05a3c6e402451f530d6e5a8b41/examples/tracing/urandomread-explicit.py#L41">code</a>,
<a href="https://github.com/iovisor/bcc/tree/master/examples">search /examples</a>,
<a href="https://github.com/iovisor/bcc/tree/master/tools">search /tools</a></p>
<h3 id="4-attach_uprobe">4. attach_uprobe()</h3>
<p>Syntax: <code>BPF.attach_uprobe(name="location", sym="symbol", fn_name="name" [, sym_off=int])</code>, <code>BPF.attach_uprobe(name="location", sym_re="regex", fn_name="name")</code>, <code>BPF.attach_uprobe(name="location", addr=int, fn_name="name")</code></p>
<p>Instruments the user-level function <code>symbol()</code> from either the library or binary named by <code>location</code> using user-level dynamic tracing of the function entry, and attach our C defined function <code>name()</code> to be called whenever the user-level function is called. If <code>sym_off</code> is given, the function is attached to the offset within the symbol.</p>
<p>The real address <code>addr</code> may be supplied in place of <code>sym</code>, in which case <code>sym</code> must be set to its default value. If the file is a non-PIE executable, <code>addr</code> must be a virtual address, otherwise it must be an offset relative to the file load address.</p>
<p>Instead of a symbol name, a regular expression can be provided in <code>sym_re</code>. The uprobe will then attach to symbols that match the provided regular expression.</p>
<p>Libraries can be given in the name argument without the lib prefix, or with the full path (/usr/lib/...). Binaries can be given only with the full path (/bin/sh).</p>
<p>For example:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-47-1" name="__codelineno-47-1" href="#__codelineno-47-1"></a><span class="n">b</span><span class="o">.</span><span class="n">attach_uprobe</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;c&quot;</span><span class="p">,</span> <span class="n">sym</span><span class="o">=</span><span class="s2">&quot;strlen&quot;</span><span class="p">,</span> <span class="n">fn_name</span><span class="o">=</span><span class="s2">&quot;count&quot;</span><span class="p">)</span>
</code></pre></div>
<p>This will instrument <code>strlen()</code> function from libc, and call our BPF function <code>count()</code> when it is called. Note how the "lib" in "libc" is not necessary to specify.</p>
<p>Other examples:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-48-1" name="__codelineno-48-1" href="#__codelineno-48-1"></a><span class="n">b</span><span class="o">.</span><span class="n">attach_uprobe</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;c&quot;</span><span class="p">,</span> <span class="n">sym</span><span class="o">=</span><span class="s2">&quot;getaddrinfo&quot;</span><span class="p">,</span> <span class="n">fn_name</span><span class="o">=</span><span class="s2">&quot;do_entry&quot;</span><span class="p">)</span>
<a id="__codelineno-48-2" name="__codelineno-48-2" href="#__codelineno-48-2"></a><span class="n">b</span><span class="o">.</span><span class="n">attach_uprobe</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;/usr/bin/python&quot;</span><span class="p">,</span> <span class="n">sym</span><span class="o">=</span><span class="s2">&quot;main&quot;</span><span class="p">,</span> <span class="n">fn_name</span><span class="o">=</span><span class="s2">&quot;do_main&quot;</span><span class="p">)</span>
</code></pre></div>
<p>You can call attach_uprobe() more than once, and attach your BPF function to multiple user-level functions.</p>
<p>See the previous uprobes section for how to instrument arguments from BPF.</p>
<p>Examples in situ:
<a href="https://github.com/iovisor/bcc/tree/master/examples">search /examples</a>,
<a href="https://github.com/iovisor/bcc/tree/master/tools">search /tools</a></p>
<h3 id="5-attach_uretprobe">5. attach_uretprobe()</h3>
<p>Syntax: <code>BPF.attach_uretprobe(name="location", sym="symbol", fn_name="name")</code></p>
<p>Instruments the return of the user-level function <code>symbol()</code> from either the library or binary named by <code>location</code> using user-level dynamic tracing of the function return, and attach our C defined function <code>name()</code> to be called whenever the user-level function returns.</p>
<p>For example:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-49-1" name="__codelineno-49-1" href="#__codelineno-49-1"></a><span class="n">b</span><span class="o">.</span><span class="n">attach_uretprobe</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;c&quot;</span><span class="p">,</span> <span class="n">sym</span><span class="o">=</span><span class="s2">&quot;strlen&quot;</span><span class="p">,</span> <span class="n">fn_name</span><span class="o">=</span><span class="s2">&quot;count&quot;</span><span class="p">)</span>
</code></pre></div>
<p>This will instrument <code>strlen()</code> function from libc, and call our BPF function <code>count()</code> when it returns.</p>
<p>Other examples:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-50-1" name="__codelineno-50-1" href="#__codelineno-50-1"></a><span class="n">b</span><span class="o">.</span><span class="n">attach_uretprobe</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;c&quot;</span><span class="p">,</span> <span class="n">sym</span><span class="o">=</span><span class="s2">&quot;getaddrinfo&quot;</span><span class="p">,</span> <span class="n">fn_name</span><span class="o">=</span><span class="s2">&quot;do_return&quot;</span><span class="p">)</span>
<a id="__codelineno-50-2" name="__codelineno-50-2" href="#__codelineno-50-2"></a><span class="n">b</span><span class="o">.</span><span class="n">attach_uretprobe</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;/usr/bin/python&quot;</span><span class="p">,</span> <span class="n">sym</span><span class="o">=</span><span class="s2">&quot;main&quot;</span><span class="p">,</span> <span class="n">fn_name</span><span class="o">=</span><span class="s2">&quot;do_main&quot;</span><span class="p">)</span>
</code></pre></div>
<p>You can call attach_uretprobe() more than once, and attach your BPF function to multiple user-level functions.</p>
<p>See the previous uretprobes section for how to instrument the return value from BPF.</p>
<p>Examples in situ:
<a href="https://github.com/iovisor/bcc/tree/master/examples">search /examples</a>,
<a href="https://github.com/iovisor/bcc/tree/master/tools">search /tools</a></p>
<h3 id="6-usdtenable_probe">6. USDT.enable_probe()</h3>
<p>Syntax: <code>USDT.enable_probe(probe=probe, fn_name=name)</code></p>
<p>Attaches a BPF C function <code>name</code> to the USDT probe <code>probe</code>.</p>
<p>Example:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-51-1" name="__codelineno-51-1" href="#__codelineno-51-1"></a><span class="c1"># enable USDT probe from given PID</span>
<a id="__codelineno-51-2" name="__codelineno-51-2" href="#__codelineno-51-2"></a><span class="n">u</span> <span class="o">=</span> <span class="n">USDT</span><span class="p">(</span><span class="n">pid</span><span class="o">=</span><span class="nb">int</span><span class="p">(</span><span class="n">pid</span><span class="p">))</span>
<a id="__codelineno-51-3" name="__codelineno-51-3" href="#__codelineno-51-3"></a><span class="n">u</span><span class="o">.</span><span class="n">enable_probe</span><span class="p">(</span><span class="n">probe</span><span class="o">=</span><span class="s2">&quot;http__server__request&quot;</span><span class="p">,</span> <span class="n">fn_name</span><span class="o">=</span><span class="s2">&quot;do_trace&quot;</span><span class="p">)</span>
</code></pre></div>
<p>To check if your binary has USDT probes, and what they are, you can run <code>readelf -n binary</code> and check the stap debug section.</p>
<p>Examples in situ:
<a href="https://github.com/iovisor/bcc/tree/master/examples">search /examples</a>,
<a href="https://github.com/iovisor/bcc/tree/master/tools">search /tools</a></p>
<h3 id="7-attach_raw_tracepoint">7. attach_raw_tracepoint()</h3>
<p>Syntax: <code>BPF.attach_raw_tracepoint(tp="tracepoint", fn_name="name")</code></p>
<p>Instruments the kernel raw tracepoint described by <code>tracepoint</code> (<code>event</code> only, no <code>category</code>), and when hit, runs the BPF function <code>name()</code>.</p>
<p>This is an explicit way to instrument tracepoints. The <code>RAW_TRACEPOINT_PROBE</code> syntax, covered in the earlier raw tracepoints section, is an alternate method.</p>
<p>For example:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-52-1" name="__codelineno-52-1" href="#__codelineno-52-1"></a><span class="n">b</span><span class="o">.</span><span class="n">attach_raw_tracepoint</span><span class="p">(</span><span class="s2">&quot;sched_switch&quot;</span><span class="p">,</span> <span class="s2">&quot;do_trace&quot;</span><span class="p">)</span>
</code></pre></div>
<p>Examples in situ:
<a href="https://github.com/iovisor/bcc/tree/master/tools">search /tools</a></p>
<h3 id="8-attach_raw_socket">8. attach_raw_socket()</h3>
<p>Syntax: <code>BPF.attach_raw_socket(fn, dev)</code></p>
<p>Attaches a BPF function to the specified network interface.</p>
<p>The <code>fn</code> must be the type of <code>BPF.function</code> and the bpf_prog type needs to be <code>BPF_PROG_TYPE_SOCKET_FILTER</code>  (<code>fn=BPF.load_func(func_name, BPF.SOCKET_FILTER)</code>)</p>
<p><code>fn.sock</code> is a non-blocking raw socket that was created and bound to <code>dev</code>.</p>
<p>All network packets processed by <code>dev</code> are copied to the <code>recv-q</code> of <code>fn.sock</code> after being processed by bpf_prog. Try to recv packet form <code>fn.sock</code> with rev/recvfrom/recvmsg. Note that if the <code>recv-q</code> is not read in time after the <code>recv-q</code> is full, the copied packets will be discarded.</p>
<p>We can use this feature to capture network packets just like <code>tcpdump</code>.</p>
<p>We can use <code>ss --bpf --packet -p</code> to observe <code>fn.sock</code>.</p>
<p>Example:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-53-1" name="__codelineno-53-1" href="#__codelineno-53-1"></a><span class="n">BPF</span><span class="o">.</span><span class="n">attach_raw_socket</span><span class="p">(</span><span class="n">bpf_func</span><span class="p">,</span> <span class="n">ifname</span><span class="p">)</span>
</code></pre></div>
<p>Examples in situ:
<a href="https://github.com/iovisor/bcc/tree/master/examples">search /examples</a></p>
<h3 id="9-attach_xdp">9. attach_xdp()</h3>
<p>Syntax: <code>BPF.attach_xdp(dev="device", fn=b.load_func("fn_name",BPF.XDP), flags)</code></p>
<p>Instruments the network driver described by <code>dev</code> , and then receives the packet, run the BPF function <code>fn_name()</code> with flags.</p>
<p>Here is a list of optional flags.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-54-1" name="__codelineno-54-1" href="#__codelineno-54-1"></a><span class="c1"># from xdp_flags uapi/linux/if_link.h</span>
<a id="__codelineno-54-2" name="__codelineno-54-2" href="#__codelineno-54-2"></a><span class="n">XDP_FLAGS_UPDATE_IF_NOEXIST</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="mi">0</span><span class="p">)</span>
<a id="__codelineno-54-3" name="__codelineno-54-3" href="#__codelineno-54-3"></a><span class="n">XDP_FLAGS_SKB_MODE</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="mi">1</span><span class="p">)</span>
<a id="__codelineno-54-4" name="__codelineno-54-4" href="#__codelineno-54-4"></a><span class="n">XDP_FLAGS_DRV_MODE</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="mi">2</span><span class="p">)</span>
<a id="__codelineno-54-5" name="__codelineno-54-5" href="#__codelineno-54-5"></a><span class="n">XDP_FLAGS_HW_MODE</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="mi">3</span><span class="p">)</span>
<a id="__codelineno-54-6" name="__codelineno-54-6" href="#__codelineno-54-6"></a><span class="n">XDP_FLAGS_REPLACE</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="mi">4</span><span class="p">)</span>
</code></pre></div>
<p>You can use flags like this <code>BPF.attach_xdp(dev="device", fn=b.load_func("fn_name",BPF.XDP), flags=BPF.XDP_FLAGS_UPDATE_IF_NOEXIST)</code></p>
<p>The default value of flags is 0. This means if there is no xdp program with <code>device</code>, the fn will run with that device. If there is an xdp program running with device, the old program will be replaced with new fn program.</p>
<p>Currently, bcc does not support XDP_FLAGS_REPLACE flag. The following are the descriptions of other flags.</p>
<h4 id="1-xdp_flags_update_if_noexist">1. XDP_FLAGS_UPDATE_IF_NOEXIST</h4>
<p>If an XDP program is already attached to the specified driver, attaching the XDP program again will fail.</p>
<h4 id="2-xdp_flags_skb_mode">2. XDP_FLAGS_SKB_MODE</h4>
<p>Driver doesn’t have support for XDP, but the kernel fakes it.
XDP program works, but there’s no real performance benefit because packets are handed to kernel stack anyways which then emulates XDP – this is usually supported with generic network drivers used in home computers, laptops, and virtualized HW.</p>
<h4 id="3-xdp_flags_drv_mode">3. XDP_FLAGS_DRV_MODE</h4>
<p>A driver has XDP support and can hand then to XDP without kernel stack interaction – Few drivers can support it and those are usually for enterprise HW.</p>
<h4 id="4-xdp_flags_hw_mode">4. XDP_FLAGS_HW_MODE</h4>
<p>XDP can be loaded and executed directly on the NIC – just a handful of NICs can do that.</p>
<p>For example:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-55-1" name="__codelineno-55-1" href="#__codelineno-55-1"></a><span class="n">b</span><span class="o">.</span><span class="n">attach_xdp</span><span class="p">(</span><span class="n">dev</span><span class="o">=</span><span class="s2">&quot;ens1&quot;</span><span class="p">,</span> <span class="n">fn</span><span class="o">=</span><span class="n">b</span><span class="o">.</span><span class="n">load_func</span><span class="p">(</span><span class="s2">&quot;do_xdp&quot;</span><span class="p">,</span> <span class="n">BPF</span><span class="o">.</span><span class="n">XDP</span><span class="p">))</span>
</code></pre></div>
<p>This will instrument the network device <code>ens1</code> , which will then run our BPF defined <code>do_xdp()</code> function each time it receives packets.</p>
<p>Don't forget to call <code>b.remove_xdp("ens1")</code> at the end!</p>
<p>Examples in situ:
<a href="https://github.com/iovisor/bcc/tree/master/examples">search /examples</a>,
<a href="https://github.com/iovisor/bcc/tree/master/tools">search /tools</a></p>
<h3 id="10-attach_func">10. attach_func()</h3>
<p>Syntax: <code>BPF.attach_func(fn, attachable_fd, attach_type [, flags])</code></p>
<p>Attaches a BPF function of the specified type to a particular <code>attachable_fd</code>. if the <code>attach_type</code> is <code>BPF_FLOW_DISSECTOR</code>, the function is expected to attach to current net namespace and <code>attachable_fd</code> must be 0.</p>
<p>For example:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-56-1" name="__codelineno-56-1" href="#__codelineno-56-1"></a><span class="n">b</span><span class="o">.</span><span class="n">attach_func</span><span class="p">(</span><span class="n">fn</span><span class="p">,</span> <span class="n">cgroup_fd</span><span class="p">,</span> <span class="n">BPFAttachType</span><span class="o">.</span><span class="n">CGROUP_SOCK_OPS</span><span class="p">)</span>
<a id="__codelineno-56-2" name="__codelineno-56-2" href="#__codelineno-56-2"></a><span class="n">b</span><span class="o">.</span><span class="n">attach_func</span><span class="p">(</span><span class="n">fn</span><span class="p">,</span> <span class="n">map_fd</span><span class="p">,</span> <span class="n">BPFAttachType</span><span class="o">.</span><span class="n">SK_MSG_VERDICT</span><span class="p">)</span>
</code></pre></div>
<p>Note. When attached to "global" hooks (xdp, tc, lwt, cgroup). If the "BPF function" is no longer needed after the program terminates, be sure to call <code>detach_func</code> when the program exits.</p>
<p>Examples in situ:</p>
<p><a href="https://github.com/iovisor/bcc/tree/master/examples">search /examples</a>,</p>
<h3 id="11-detach_func">11. detach_func()</h3>
<p>Syntax: <code>BPF.detach_func(fn, attachable_fd, attach_type)</code></p>
<p>Detaches a BPF function of the specified type.</p>
<p>For example:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-57-1" name="__codelineno-57-1" href="#__codelineno-57-1"></a><span class="n">b</span><span class="o">.</span><span class="n">detach_func</span><span class="p">(</span><span class="n">fn</span><span class="p">,</span> <span class="n">cgroup_fd</span><span class="p">,</span> <span class="n">BPFAttachType</span><span class="o">.</span><span class="n">CGROUP_SOCK_OPS</span><span class="p">)</span>
<a id="__codelineno-57-2" name="__codelineno-57-2" href="#__codelineno-57-2"></a><span class="n">b</span><span class="o">.</span><span class="n">detach_func</span><span class="p">(</span><span class="n">fn</span><span class="p">,</span> <span class="n">map_fd</span><span class="p">,</span> <span class="n">BPFAttachType</span><span class="o">.</span><span class="n">SK_MSG_VERDICT</span><span class="p">)</span>
</code></pre></div>
<p>Examples in situ:</p>
<p><a href="https://github.com/iovisor/bcc/tree/master/examples">search /examples</a>,</p>
<h3 id="12-detach_kprobe">12. detach_kprobe()</h3>
<p>Syntax: <code>BPF.detach_kprobe(event="event", fn_name="name")</code></p>
<p>Detach a kprobe handler function of the specified event.</p>
<p>For example:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-58-1" name="__codelineno-58-1" href="#__codelineno-58-1"></a><span class="n">b</span><span class="o">.</span><span class="n">detach_kprobe</span><span class="p">(</span><span class="n">event</span><span class="o">=</span><span class="s2">&quot;__page_cache_alloc&quot;</span><span class="p">,</span> <span class="n">fn_name</span><span class="o">=</span><span class="s2">&quot;trace_func_entry&quot;</span><span class="p">)</span>
</code></pre></div>
<h3 id="13-detach_kretprobe">13. detach_kretprobe()</h3>
<p>Syntax: <code>BPF.detach_kretprobe(event="event", fn_name="name")</code></p>
<p>Detach a kretprobe handler function of the specified event.</p>
<p>For example:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-59-1" name="__codelineno-59-1" href="#__codelineno-59-1"></a><span class="n">b</span><span class="o">.</span><span class="n">detach_kretprobe</span><span class="p">(</span><span class="n">event</span><span class="o">=</span><span class="s2">&quot;__page_cache_alloc&quot;</span><span class="p">,</span> <span class="n">fn_name</span><span class="o">=</span><span class="s2">&quot;trace_func_return&quot;</span><span class="p">)</span>
</code></pre></div>
<h2 id="debug-output">Debug Output</h2>
<h3 id="1-trace_print">1. trace_print()</h3>
<p>Syntax: <code>BPF.trace_print(fmt="fields")</code></p>
<p>This method continually reads the globally shared /sys/kernel/debug/tracing/trace_pipe file and prints its contents. This file can be written to via BPF and the bpf_trace_printk() function, however, that method has limitations, including a lack of concurrent tracing support. The BPF_PERF_OUTPUT mechanism, covered earlier, is preferred.</p>
<p>Arguments:</p>
<ul>
<li><code>fmt</code>: optional, and can contain a field formatting string. It defaults to <code>None</code>.</li>
</ul>
<p>Examples:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-60-1" name="__codelineno-60-1" href="#__codelineno-60-1"></a><span class="c1"># print trace_pipe output as-is:</span>
<a id="__codelineno-60-2" name="__codelineno-60-2" href="#__codelineno-60-2"></a><span class="n">b</span><span class="o">.</span><span class="n">trace_print</span><span class="p">()</span>
<a id="__codelineno-60-3" name="__codelineno-60-3" href="#__codelineno-60-3"></a>
<a id="__codelineno-60-4" name="__codelineno-60-4" href="#__codelineno-60-4"></a><span class="c1"># print PID and message:</span>
<a id="__codelineno-60-5" name="__codelineno-60-5" href="#__codelineno-60-5"></a><span class="n">b</span><span class="o">.</span><span class="n">trace_print</span><span class="p">(</span><span class="n">fmt</span><span class="o">=</span><span class="s2">&quot;</span><span class="si">{1}</span><span class="s2"> </span><span class="si">{5}</span><span class="s2">&quot;</span><span class="p">)</span>
</code></pre></div>
<p>Examples in situ:
<a href="https://github.com/iovisor/bcc/tree/master/examples">search /examples</a>,
<a href="https://github.com/iovisor/bcc/tree/master/tools">search /tools</a></p>
<h3 id="2-trace_fields">2. trace_fields()</h3>
<p>Syntax: <code>BPF.trace_fields(nonblocking=False)</code></p>
<p>This method reads one line from the globally shared /sys/kernel/debug/tracing/trace_pipe file and returns it as fields. This file can be written to via BPF and the bpf_trace_printk() function, however, that method has limitations, including a lack of concurrent tracing support. The BPF_PERF_OUTPUT mechanism, covered earlier, is preferred.</p>
<p>Arguments:</p>
<ul>
<li><code>nonblocking</code>: optional, defaults to <code>False</code>. When set to <code>True</code>, the program will not block waiting for input.</li>
</ul>
<p>Examples:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-61-1" name="__codelineno-61-1" href="#__codelineno-61-1"></a><span class="k">while</span> <span class="mi">1</span><span class="p">:</span>
<a id="__codelineno-61-2" name="__codelineno-61-2" href="#__codelineno-61-2"></a>    <span class="k">try</span><span class="p">:</span>
<a id="__codelineno-61-3" name="__codelineno-61-3" href="#__codelineno-61-3"></a>        <span class="p">(</span><span class="n">task</span><span class="p">,</span> <span class="n">pid</span><span class="p">,</span> <span class="n">cpu</span><span class="p">,</span> <span class="n">flags</span><span class="p">,</span> <span class="n">ts</span><span class="p">,</span> <span class="n">msg</span><span class="p">)</span> <span class="o">=</span> <span class="n">b</span><span class="o">.</span><span class="n">trace_fields</span><span class="p">()</span>
<a id="__codelineno-61-4" name="__codelineno-61-4" href="#__codelineno-61-4"></a>    <span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
<a id="__codelineno-61-5" name="__codelineno-61-5" href="#__codelineno-61-5"></a>        <span class="k">continue</span>
<a id="__codelineno-61-6" name="__codelineno-61-6" href="#__codelineno-61-6"></a>    <span class="p">[</span><span class="o">...</span><span class="p">]</span>
</code></pre></div>
<p>Examples in situ:
<a href="https://github.com/iovisor/bcc/tree/master/examples">search /examples</a>,
<a href="https://github.com/iovisor/bcc/tree/master/tools">search /tools</a></p>
<h2 id="output-apis">Output APIs</h2>
<p>Normal output from a BPF program is either:</p>
<ul>
<li>per-event: using PERF_EVENT_OUTPUT, open_perf_buffer(), and perf_buffer_poll().</li>
<li>map summary: using items(), or print_log2_hist(), covered in the Maps section.</li>
</ul>
<h3 id="1-perf_buffer_poll">1. perf_buffer_poll()</h3>
<p>Syntax: <code>BPF.perf_buffer_poll(timeout=T)</code></p>
<p>This polls from all open perf ring buffers, calling the callback function that was provided when calling open_perf_buffer for each entry.</p>
<p>The timeout parameter is optional and measured in milliseconds. In its absence, polling continues indefinitely.</p>
<p>Example:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-62-1" name="__codelineno-62-1" href="#__codelineno-62-1"></a><span class="c1"># loop with callback to print_event</span>
<a id="__codelineno-62-2" name="__codelineno-62-2" href="#__codelineno-62-2"></a><span class="n">b</span><span class="p">[</span><span class="s2">&quot;events&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">open_perf_buffer</span><span class="p">(</span><span class="n">print_event</span><span class="p">)</span>
<a id="__codelineno-62-3" name="__codelineno-62-3" href="#__codelineno-62-3"></a><span class="k">while</span> <span class="mi">1</span><span class="p">:</span>
<a id="__codelineno-62-4" name="__codelineno-62-4" href="#__codelineno-62-4"></a>    <span class="k">try</span><span class="p">:</span>
<a id="__codelineno-62-5" name="__codelineno-62-5" href="#__codelineno-62-5"></a>        <span class="n">b</span><span class="o">.</span><span class="n">perf_buffer_poll</span><span class="p">()</span>
<a id="__codelineno-62-6" name="__codelineno-62-6" href="#__codelineno-62-6"></a>    <span class="k">except</span> <span class="ne">KeyboardInterrupt</span><span class="p">:</span>
<a id="__codelineno-62-7" name="__codelineno-62-7" href="#__codelineno-62-7"></a>        <span class="n">exit</span><span class="p">();</span>
</code></pre></div>
<p>Examples in situ:
<a href="https://github.com/iovisor/bcc/blob/v0.9.0/examples/tracing/hello_perf_output.py#L55">code</a>,
<a href="https://github.com/iovisor/bcc/tree/master/examples">search /examples</a>,
<a href="https://github.com/iovisor/bcc/tree/master/tools">search /tools</a></p>
<h3 id="2-ring_buffer_poll">2. ring_buffer_poll()</h3>
<p>Syntax: <code>BPF.ring_buffer_poll(timeout=T)</code></p>
<p>This polls from all open ringbuf ring buffers, calling the callback function that was provided when calling open_ring_buffer for each entry.</p>
<p>The timeout parameter is optional and measured in milliseconds. In its absence, polling continues until
there is no more data or the callback returns a negative value.</p>
<p>Example:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-63-1" name="__codelineno-63-1" href="#__codelineno-63-1"></a><span class="c1"># loop with callback to print_event</span>
<a id="__codelineno-63-2" name="__codelineno-63-2" href="#__codelineno-63-2"></a><span class="n">b</span><span class="p">[</span><span class="s2">&quot;events&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">open_ring_buffer</span><span class="p">(</span><span class="n">print_event</span><span class="p">)</span>
<a id="__codelineno-63-3" name="__codelineno-63-3" href="#__codelineno-63-3"></a><span class="k">while</span> <span class="mi">1</span><span class="p">:</span>
<a id="__codelineno-63-4" name="__codelineno-63-4" href="#__codelineno-63-4"></a>    <span class="k">try</span><span class="p">:</span>
<a id="__codelineno-63-5" name="__codelineno-63-5" href="#__codelineno-63-5"></a>        <span class="n">b</span><span class="o">.</span><span class="n">ring_buffer_poll</span><span class="p">(</span><span class="mi">30</span><span class="p">)</span>
<a id="__codelineno-63-6" name="__codelineno-63-6" href="#__codelineno-63-6"></a>    <span class="k">except</span> <span class="ne">KeyboardInterrupt</span><span class="p">:</span>
<a id="__codelineno-63-7" name="__codelineno-63-7" href="#__codelineno-63-7"></a>        <span class="n">exit</span><span class="p">();</span>
</code></pre></div>
<p>Examples in situ:
<a href="https://github.com/iovisor/bcc/tree/master/examples">search /examples</a>,</p>
<h3 id="3-ring_buffer_consume">3. ring_buffer_consume()</h3>
<p>Syntax: <code>BPF.ring_buffer_consume()</code></p>
<p>This consumes from all open ringbuf ring buffers, calling the callback function that was provided when calling open_ring_buffer for each entry.</p>
<p>Unlike <code>ring_buffer_poll</code>, this method <strong>does not poll for data</strong> before attempting to consume.
This reduces latency at the expense of higher CPU consumption. If you are unsure which to use,
use <code>ring_buffer_poll</code>.</p>
<p>Example:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-64-1" name="__codelineno-64-1" href="#__codelineno-64-1"></a><span class="c1"># loop with callback to print_event</span>
<a id="__codelineno-64-2" name="__codelineno-64-2" href="#__codelineno-64-2"></a><span class="n">b</span><span class="p">[</span><span class="s2">&quot;events&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">open_ring_buffer</span><span class="p">(</span><span class="n">print_event</span><span class="p">)</span>
<a id="__codelineno-64-3" name="__codelineno-64-3" href="#__codelineno-64-3"></a><span class="k">while</span> <span class="mi">1</span><span class="p">:</span>
<a id="__codelineno-64-4" name="__codelineno-64-4" href="#__codelineno-64-4"></a>    <span class="k">try</span><span class="p">:</span>
<a id="__codelineno-64-5" name="__codelineno-64-5" href="#__codelineno-64-5"></a>        <span class="n">b</span><span class="o">.</span><span class="n">ring_buffer_consume</span><span class="p">()</span>
<a id="__codelineno-64-6" name="__codelineno-64-6" href="#__codelineno-64-6"></a>    <span class="k">except</span> <span class="ne">KeyboardInterrupt</span><span class="p">:</span>
<a id="__codelineno-64-7" name="__codelineno-64-7" href="#__codelineno-64-7"></a>        <span class="n">exit</span><span class="p">();</span>
</code></pre></div>
<p>Examples in situ:
<a href="https://github.com/iovisor/bcc/tree/master/examples">search /examples</a>,</p>
<h2 id="map-apis">Map APIs</h2>
<p>Maps are BPF data stores, and are used in bcc to implement a table, and then higher level objects on top of tables, including hashes and histograms.</p>
<h3 id="1-get_table">1. get_table()</h3>
<p>Syntax: <code>BPF.get_table(name)</code></p>
<p>Returns a table object. This is no longer used, as tables can now be read as items from BPF. Eg: <code>BPF[name]</code>.</p>
<p>Examples:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-65-1" name="__codelineno-65-1" href="#__codelineno-65-1"></a><span class="n">counts</span> <span class="o">=</span> <span class="n">b</span><span class="o">.</span><span class="n">get_table</span><span class="p">(</span><span class="s2">&quot;counts&quot;</span><span class="p">)</span>
<a id="__codelineno-65-2" name="__codelineno-65-2" href="#__codelineno-65-2"></a>
<a id="__codelineno-65-3" name="__codelineno-65-3" href="#__codelineno-65-3"></a><span class="n">counts</span> <span class="o">=</span> <span class="n">b</span><span class="p">[</span><span class="s2">&quot;counts&quot;</span><span class="p">]</span>
</code></pre></div>
<p>These are equivalent.</p>
<h3 id="2-open_perf_buffer">2. open_perf_buffer()</h3>
<p>Syntax: <code>table.open_perf_buffers(callback, page_cnt=N, lost_cb=None)</code></p>
<p>This operates on a table as defined in BPF as BPF_PERF_OUTPUT(), and associates the callback Python function <code>callback</code> to be called when data is available in the perf ring buffer. This is part of the recommended mechanism for transferring per-event data from kernel to user space. The size of the perf ring buffer can be specified via the <code>page_cnt</code> parameter, which must be a power of two number of pages and defaults to 8. If the callback is not processing data fast enough, some submitted data may be lost. <code>lost_cb</code> will be called to log / monitor the lost count. If <code>lost_cb</code> is the default <code>None</code> value, it will just print a line of message to <code>stderr</code>.</p>
<p>Example:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-66-1" name="__codelineno-66-1" href="#__codelineno-66-1"></a><span class="c1"># process event</span>
<a id="__codelineno-66-2" name="__codelineno-66-2" href="#__codelineno-66-2"></a><span class="k">def</span> <span class="nf">print_event</span><span class="p">(</span><span class="n">cpu</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">size</span><span class="p">):</span>
<a id="__codelineno-66-3" name="__codelineno-66-3" href="#__codelineno-66-3"></a>    <span class="n">event</span> <span class="o">=</span> <span class="n">ct</span><span class="o">.</span><span class="n">cast</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">ct</span><span class="o">.</span><span class="n">POINTER</span><span class="p">(</span><span class="n">Data</span><span class="p">))</span><span class="o">.</span><span class="n">contents</span>
<a id="__codelineno-66-4" name="__codelineno-66-4" href="#__codelineno-66-4"></a>    <span class="p">[</span><span class="o">...</span><span class="p">]</span>
<a id="__codelineno-66-5" name="__codelineno-66-5" href="#__codelineno-66-5"></a>
<a id="__codelineno-66-6" name="__codelineno-66-6" href="#__codelineno-66-6"></a><span class="c1"># loop with callback to print_event</span>
<a id="__codelineno-66-7" name="__codelineno-66-7" href="#__codelineno-66-7"></a><span class="n">b</span><span class="p">[</span><span class="s2">&quot;events&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">open_perf_buffer</span><span class="p">(</span><span class="n">print_event</span><span class="p">)</span>
<a id="__codelineno-66-8" name="__codelineno-66-8" href="#__codelineno-66-8"></a><span class="k">while</span> <span class="mi">1</span><span class="p">:</span>
<a id="__codelineno-66-9" name="__codelineno-66-9" href="#__codelineno-66-9"></a>    <span class="k">try</span><span class="p">:</span>
<a id="__codelineno-66-10" name="__codelineno-66-10" href="#__codelineno-66-10"></a>        <span class="n">b</span><span class="o">.</span><span class="n">perf_buffer_poll</span><span class="p">()</span>
<a id="__codelineno-66-11" name="__codelineno-66-11" href="#__codelineno-66-11"></a>    <span class="k">except</span> <span class="ne">KeyboardInterrupt</span><span class="p">:</span>
<a id="__codelineno-66-12" name="__codelineno-66-12" href="#__codelineno-66-12"></a>        <span class="n">exit</span><span class="p">()</span>
</code></pre></div>
<p>Note that the data structure transferred will need to be declared in C in the BPF program. For example:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-67-1" name="__codelineno-67-1" href="#__codelineno-67-1"></a><span class="c1">// define output data structure in C</span>
<a id="__codelineno-67-2" name="__codelineno-67-2" href="#__codelineno-67-2"></a><span class="k">struct</span><span class="w"> </span><span class="nc">data_t</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-67-3" name="__codelineno-67-3" href="#__codelineno-67-3"></a><span class="w">    </span><span class="n">u32</span><span class="w"> </span><span class="n">pid</span><span class="p">;</span>
<a id="__codelineno-67-4" name="__codelineno-67-4" href="#__codelineno-67-4"></a><span class="w">    </span><span class="n">u64</span><span class="w"> </span><span class="n">ts</span><span class="p">;</span>
<a id="__codelineno-67-5" name="__codelineno-67-5" href="#__codelineno-67-5"></a><span class="w">    </span><span class="kt">char</span><span class="w"> </span><span class="n">comm</span><span class="p">[</span><span class="n">TASK_COMM_LEN</span><span class="p">];</span>
<a id="__codelineno-67-6" name="__codelineno-67-6" href="#__codelineno-67-6"></a><span class="p">};</span>
<a id="__codelineno-67-7" name="__codelineno-67-7" href="#__codelineno-67-7"></a><span class="n">BPF_PERF_OUTPUT</span><span class="p">(</span><span class="n">events</span><span class="p">);</span>
<a id="__codelineno-67-8" name="__codelineno-67-8" href="#__codelineno-67-8"></a><span class="p">[...]</span>
</code></pre></div>
<p>In Python, you can either let bcc generate the data structure from C declaration automatically (recommended):</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-68-1" name="__codelineno-68-1" href="#__codelineno-68-1"></a><span class="k">def</span> <span class="nf">print_event</span><span class="p">(</span><span class="n">cpu</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">size</span><span class="p">):</span>
<a id="__codelineno-68-2" name="__codelineno-68-2" href="#__codelineno-68-2"></a>    <span class="n">event</span> <span class="o">=</span> <span class="n">b</span><span class="p">[</span><span class="s2">&quot;events&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">event</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
<a id="__codelineno-68-3" name="__codelineno-68-3" href="#__codelineno-68-3"></a><span class="p">[</span><span class="o">...</span><span class="p">]</span>
</code></pre></div>
<p>or define it manually:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-69-1" name="__codelineno-69-1" href="#__codelineno-69-1"></a><span class="c1"># define output data structure in Python</span>
<a id="__codelineno-69-2" name="__codelineno-69-2" href="#__codelineno-69-2"></a><span class="n">TASK_COMM_LEN</span> <span class="o">=</span> <span class="mi">16</span>    <span class="c1"># linux/sched.h</span>
<a id="__codelineno-69-3" name="__codelineno-69-3" href="#__codelineno-69-3"></a><span class="k">class</span> <span class="nc">Data</span><span class="p">(</span><span class="n">ct</span><span class="o">.</span><span class="n">Structure</span><span class="p">):</span>
<a id="__codelineno-69-4" name="__codelineno-69-4" href="#__codelineno-69-4"></a>    <span class="n">_fields_</span> <span class="o">=</span> <span class="p">[(</span><span class="s2">&quot;pid&quot;</span><span class="p">,</span> <span class="n">ct</span><span class="o">.</span><span class="n">c_ulonglong</span><span class="p">),</span>
<a id="__codelineno-69-5" name="__codelineno-69-5" href="#__codelineno-69-5"></a>                <span class="p">(</span><span class="s2">&quot;ts&quot;</span><span class="p">,</span> <span class="n">ct</span><span class="o">.</span><span class="n">c_ulonglong</span><span class="p">),</span>
<a id="__codelineno-69-6" name="__codelineno-69-6" href="#__codelineno-69-6"></a>                <span class="p">(</span><span class="s2">&quot;comm&quot;</span><span class="p">,</span> <span class="n">ct</span><span class="o">.</span><span class="n">c_char</span> <span class="o">*</span> <span class="n">TASK_COMM_LEN</span><span class="p">)]</span>
<a id="__codelineno-69-7" name="__codelineno-69-7" href="#__codelineno-69-7"></a>
<a id="__codelineno-69-8" name="__codelineno-69-8" href="#__codelineno-69-8"></a><span class="k">def</span> <span class="nf">print_event</span><span class="p">(</span><span class="n">cpu</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">size</span><span class="p">):</span>
<a id="__codelineno-69-9" name="__codelineno-69-9" href="#__codelineno-69-9"></a>    <span class="n">event</span> <span class="o">=</span> <span class="n">ct</span><span class="o">.</span><span class="n">cast</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">ct</span><span class="o">.</span><span class="n">POINTER</span><span class="p">(</span><span class="n">Data</span><span class="p">))</span><span class="o">.</span><span class="n">contents</span>
<a id="__codelineno-69-10" name="__codelineno-69-10" href="#__codelineno-69-10"></a><span class="p">[</span><span class="o">...</span><span class="p">]</span>
</code></pre></div>
<p>Examples in situ:
<a href="https://github.com/iovisor/bcc/blob/v0.9.0/examples/tracing/hello_perf_output.py#L52">code</a>,
<a href="https://github.com/iovisor/bcc/tree/master/examples">search /examples</a>,
<a href="https://github.com/iovisor/bcc/tree/master/tools">search /tools</a></p>
<h3 id="3-items">3. items()</h3>
<p>Syntax: <code>table.items()</code></p>
<p>Returns an array of the keys in a table. This can be used with BPF_HASH maps to fetch, and iterate, over the keys.</p>
<p>Example:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-70-1" name="__codelineno-70-1" href="#__codelineno-70-1"></a><span class="c1"># print output</span>
<a id="__codelineno-70-2" name="__codelineno-70-2" href="#__codelineno-70-2"></a><span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">%10s</span><span class="s2"> </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="s2">&quot;COUNT&quot;</span><span class="p">,</span> <span class="s2">&quot;STRING&quot;</span><span class="p">))</span>
<a id="__codelineno-70-3" name="__codelineno-70-3" href="#__codelineno-70-3"></a><span class="n">counts</span> <span class="o">=</span> <span class="n">b</span><span class="o">.</span><span class="n">get_table</span><span class="p">(</span><span class="s2">&quot;counts&quot;</span><span class="p">)</span>
<a id="__codelineno-70-4" name="__codelineno-70-4" href="#__codelineno-70-4"></a><span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">counts</span><span class="o">.</span><span class="n">items</span><span class="p">(),</span> <span class="n">key</span><span class="o">=</span><span class="k">lambda</span> <span class="n">counts</span><span class="p">:</span> <span class="n">counts</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">value</span><span class="p">):</span>
<a id="__codelineno-70-5" name="__codelineno-70-5" href="#__codelineno-70-5"></a>    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">%10d</span><span class="s2"> </span><span class="se">\&quot;</span><span class="si">%s</span><span class="se">\&quot;</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">v</span><span class="o">.</span><span class="n">value</span><span class="p">,</span> <span class="n">k</span><span class="o">.</span><span class="n">c</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="s1">&#39;string-escape&#39;</span><span class="p">)))</span>
</code></pre></div>
<p>This example also uses the <code>sorted()</code> method to sort by value.</p>
<p>Examples in situ:
<a href="https://github.com/iovisor/bcc/tree/master/examples">search /examples</a>,
<a href="https://github.com/iovisor/bcc/tree/master/tools">search /tools</a></p>
<h3 id="4-values">4. values()</h3>
<p>Syntax: <code>table.values()</code></p>
<p>Returns an array of the values in a table.</p>
<h3 id="5-clear">5. clear()</h3>
<p>Syntax: <code>table.clear()</code></p>
<p>Clears the table: deletes all entries.</p>
<p>Example:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-71-1" name="__codelineno-71-1" href="#__codelineno-71-1"></a><span class="c1"># print map summary every second:</span>
<a id="__codelineno-71-2" name="__codelineno-71-2" href="#__codelineno-71-2"></a><span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
<a id="__codelineno-71-3" name="__codelineno-71-3" href="#__codelineno-71-3"></a>    <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
<a id="__codelineno-71-4" name="__codelineno-71-4" href="#__codelineno-71-4"></a>    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">%-8s</span><span class="se">\n</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">time</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s2">&quot;%H:%M:%S&quot;</span><span class="p">),</span> <span class="n">end</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">)</span>
<a id="__codelineno-71-5" name="__codelineno-71-5" href="#__codelineno-71-5"></a>    <span class="n">dist</span><span class="o">.</span><span class="n">print_log2_hist</span><span class="p">(</span><span class="n">sym</span> <span class="o">+</span> <span class="s2">&quot; return:&quot;</span><span class="p">)</span>
<a id="__codelineno-71-6" name="__codelineno-71-6" href="#__codelineno-71-6"></a>    <span class="n">dist</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>
</code></pre></div>
<p>Examples in situ:
<a href="https://github.com/iovisor/bcc/tree/master/examples">search /examples</a>,
<a href="https://github.com/iovisor/bcc/tree/master/tools">search /tools</a></p>
<h3 id="6-items_lookup_and_delete_batch">6. items_lookup_and_delete_batch()</h3>
<p>Syntax: <code>table.items_lookup_and_delete_batch()</code></p>
<p>Returns an array of the keys in a table with a single call to BPF syscall. This can be used with BPF_HASH maps to fetch, and iterate, over the keys. It also clears the table: deletes all entries.
You should rather use table.items_lookup_and_delete_batch() than table.items() followed by table.clear(). It requires kernel v5.6.</p>
<p>Example:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-72-1" name="__codelineno-72-1" href="#__codelineno-72-1"></a><span class="c1"># print call rate per second:</span>
<a id="__codelineno-72-2" name="__codelineno-72-2" href="#__codelineno-72-2"></a><span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">%9s</span><span class="s2">-</span><span class="si">%9s</span><span class="s2">-</span><span class="si">%8s</span><span class="s2">-</span><span class="si">%9s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="s2">&quot;PID&quot;</span><span class="p">,</span> <span class="s2">&quot;COMM&quot;</span><span class="p">,</span> <span class="s2">&quot;fname&quot;</span><span class="p">,</span> <span class="s2">&quot;counter&quot;</span><span class="p">))</span>
<a id="__codelineno-72-3" name="__codelineno-72-3" href="#__codelineno-72-3"></a><span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
<a id="__codelineno-72-4" name="__codelineno-72-4" href="#__codelineno-72-4"></a>    <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">b</span><span class="p">[</span><span class="s1">&#39;map&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">items_lookup_and_delete_batch</span><span class="p">(),</span> <span class="n">key</span><span class="o">=</span><span class="k">lambda</span> <span class="n">kv</span><span class="p">:</span> <span class="p">(</span><span class="n">kv</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span><span class="o">.</span><span class="n">pid</span><span class="p">):</span>
<a id="__codelineno-72-5" name="__codelineno-72-5" href="#__codelineno-72-5"></a>        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">%9s</span><span class="s2">-</span><span class="si">%9s</span><span class="s2">-</span><span class="si">%8s</span><span class="s2">-</span><span class="si">%9d</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">k</span><span class="o">.</span><span class="n">pid</span><span class="p">,</span> <span class="n">k</span><span class="o">.</span><span class="n">comm</span><span class="p">,</span> <span class="n">k</span><span class="o">.</span><span class="n">fname</span><span class="p">,</span> <span class="n">v</span><span class="o">.</span><span class="n">counter</span><span class="p">))</span>
<a id="__codelineno-72-6" name="__codelineno-72-6" href="#__codelineno-72-6"></a>    <span class="n">sleep</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
</code></pre></div>
<h3 id="7-items_lookup_batch">7. items_lookup_batch()</h3>
<p>Syntax: <code>table.items_lookup_batch()</code></p>
<p>Returns an array of the keys in a table with a single call to BPF syscall. This can be used with BPF_HASH maps to fetch, and iterate, over the keys.
You should rather use table.items_lookup_batch() than table.items(). It requires kernel v5.6.</p>
<p>Example:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-73-1" name="__codelineno-73-1" href="#__codelineno-73-1"></a><span class="c1"># print current value of map:</span>
<a id="__codelineno-73-2" name="__codelineno-73-2" href="#__codelineno-73-2"></a><span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">%9s</span><span class="s2">-</span><span class="si">%9s</span><span class="s2">-</span><span class="si">%8s</span><span class="s2">-</span><span class="si">%9s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="s2">&quot;PID&quot;</span><span class="p">,</span> <span class="s2">&quot;COMM&quot;</span><span class="p">,</span> <span class="s2">&quot;fname&quot;</span><span class="p">,</span> <span class="s2">&quot;counter&quot;</span><span class="p">))</span>
<a id="__codelineno-73-3" name="__codelineno-73-3" href="#__codelineno-73-3"></a><span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
<a id="__codelineno-73-4" name="__codelineno-73-4" href="#__codelineno-73-4"></a>    <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">b</span><span class="p">[</span><span class="s1">&#39;map&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">items_lookup_batch</span><span class="p">(),</span> <span class="n">key</span><span class="o">=</span><span class="k">lambda</span> <span class="n">kv</span><span class="p">:</span> <span class="p">(</span><span class="n">kv</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span><span class="o">.</span><span class="n">pid</span><span class="p">):</span>
<a id="__codelineno-73-5" name="__codelineno-73-5" href="#__codelineno-73-5"></a>        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">%9s</span><span class="s2">-</span><span class="si">%9s</span><span class="s2">-</span><span class="si">%8s</span><span class="s2">-</span><span class="si">%9d</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">k</span><span class="o">.</span><span class="n">pid</span><span class="p">,</span> <span class="n">k</span><span class="o">.</span><span class="n">comm</span><span class="p">,</span> <span class="n">k</span><span class="o">.</span><span class="n">fname</span><span class="p">,</span> <span class="n">v</span><span class="o">.</span><span class="n">counter</span><span class="p">))</span>
</code></pre></div>
<h3 id="8-items_delete_batch">8. items_delete_batch()</h3>
<p>Syntax: <code>table.items_delete_batch(keys)</code></p>
<p>It clears all entries of a BPF_HASH map when keys is None. It is more efficient than table.clear() since it generates only one system call. You can delete a subset of a map by giving an array of keys as parameter. Those keys and their associated values will be deleted. It requires kernel v5.6.</p>
<p>Arguments:</p>
<ul>
<li>keys is optional and by default is None.</li>
</ul>
<h3 id="9-items_update_batch">9. items_update_batch()</h3>
<p>Syntax: <code>table.items_update_batch(keys, values)</code></p>
<p>Update all the provided keys with new values. The two arguments must be the same length and within the map limits (between 1 and the maximum entries). It requires kernel v5.6.</p>
<p>Arguments:</p>
<ul>
<li>keys is the list of keys to be updated</li>
<li>values is the list containing the new values.</li>
</ul>
<h3 id="10-print_log2_hist">10. print_log2_hist()</h3>
<p>Syntax: <code>table.print_log2_hist(val_type="value", section_header="Bucket ptr", section_print_fn=None)</code></p>
<p>Prints a table as a log2 histogram in ASCII. The table must be stored as log2, which can be done using the BPF function <code>bpf_log2l()</code>.</p>
<p>Arguments:</p>
<ul>
<li>val_type: optional, column header.</li>
<li>section_header: if the histogram has a secondary key, multiple tables will print and section_header can be used as a header description for each.</li>
<li>section_print_fn: if section_print_fn is not None, it will be passed the bucket value.</li>
</ul>
<p>Example:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-74-1" name="__codelineno-74-1" href="#__codelineno-74-1"></a><span class="n">b</span> <span class="o">=</span> <span class="n">BPF</span><span class="p">(</span><span class="n">text</span><span class="o">=</span><span class="s2">&quot;&quot;&quot;</span>
<a id="__codelineno-74-2" name="__codelineno-74-2" href="#__codelineno-74-2"></a><span class="s2">BPF_HISTOGRAM(dist);</span>
<a id="__codelineno-74-3" name="__codelineno-74-3" href="#__codelineno-74-3"></a>
<a id="__codelineno-74-4" name="__codelineno-74-4" href="#__codelineno-74-4"></a><span class="s2">int kprobe__blk_account_io_done(struct pt_regs *ctx, struct request *req)</span>
<a id="__codelineno-74-5" name="__codelineno-74-5" href="#__codelineno-74-5"></a><span class="s2">{</span>
<a id="__codelineno-74-6" name="__codelineno-74-6" href="#__codelineno-74-6"></a><span class="s2">    dist.increment(bpf_log2l(req-&gt;__data_len / 1024));</span>
<a id="__codelineno-74-7" name="__codelineno-74-7" href="#__codelineno-74-7"></a><span class="s2">    return 0;</span>
<a id="__codelineno-74-8" name="__codelineno-74-8" href="#__codelineno-74-8"></a><span class="s2">}</span>
<a id="__codelineno-74-9" name="__codelineno-74-9" href="#__codelineno-74-9"></a><span class="s2">&quot;&quot;&quot;</span><span class="p">)</span>
<a id="__codelineno-74-10" name="__codelineno-74-10" href="#__codelineno-74-10"></a><span class="p">[</span><span class="o">...</span><span class="p">]</span>
<a id="__codelineno-74-11" name="__codelineno-74-11" href="#__codelineno-74-11"></a>
<a id="__codelineno-74-12" name="__codelineno-74-12" href="#__codelineno-74-12"></a><span class="n">b</span><span class="p">[</span><span class="s2">&quot;dist&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">print_log2_hist</span><span class="p">(</span><span class="s2">&quot;kbytes&quot;</span><span class="p">)</span>
</code></pre></div>
<p>Output:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-75-1" name="__codelineno-75-1" href="#__codelineno-75-1"></a><span class="w">     </span>kbytes<span class="w">          </span>:<span class="w"> </span>count<span class="w">     </span>distribution
<a id="__codelineno-75-2" name="__codelineno-75-2" href="#__codelineno-75-2"></a><span class="w">       </span><span class="m">0</span><span class="w"> </span>-&gt;<span class="w"> </span><span class="m">1</span><span class="w">        </span>:<span class="w"> </span><span class="m">3</span><span class="w">        </span><span class="p">|</span><span class="w">                                      </span><span class="p">|</span>
<a id="__codelineno-75-3" name="__codelineno-75-3" href="#__codelineno-75-3"></a><span class="w">       </span><span class="m">2</span><span class="w"> </span>-&gt;<span class="w"> </span><span class="m">3</span><span class="w">        </span>:<span class="w"> </span><span class="m">0</span><span class="w">        </span><span class="p">|</span><span class="w">                                      </span><span class="p">|</span>
<a id="__codelineno-75-4" name="__codelineno-75-4" href="#__codelineno-75-4"></a><span class="w">       </span><span class="m">4</span><span class="w"> </span>-&gt;<span class="w"> </span><span class="m">7</span><span class="w">        </span>:<span class="w"> </span><span class="m">211</span><span class="w">      </span><span class="p">|</span>**********<span class="w">                            </span><span class="p">|</span>
<a id="__codelineno-75-5" name="__codelineno-75-5" href="#__codelineno-75-5"></a><span class="w">       </span><span class="m">8</span><span class="w"> </span>-&gt;<span class="w"> </span><span class="m">15</span><span class="w">       </span>:<span class="w"> </span><span class="m">0</span><span class="w">        </span><span class="p">|</span><span class="w">                                      </span><span class="p">|</span>
<a id="__codelineno-75-6" name="__codelineno-75-6" href="#__codelineno-75-6"></a><span class="w">      </span><span class="m">16</span><span class="w"> </span>-&gt;<span class="w"> </span><span class="m">31</span><span class="w">       </span>:<span class="w"> </span><span class="m">0</span><span class="w">        </span><span class="p">|</span><span class="w">                                      </span><span class="p">|</span>
<a id="__codelineno-75-7" name="__codelineno-75-7" href="#__codelineno-75-7"></a><span class="w">      </span><span class="m">32</span><span class="w"> </span>-&gt;<span class="w"> </span><span class="m">63</span><span class="w">       </span>:<span class="w"> </span><span class="m">0</span><span class="w">        </span><span class="p">|</span><span class="w">                                      </span><span class="p">|</span>
<a id="__codelineno-75-8" name="__codelineno-75-8" href="#__codelineno-75-8"></a><span class="w">      </span><span class="m">64</span><span class="w"> </span>-&gt;<span class="w"> </span><span class="m">127</span><span class="w">      </span>:<span class="w"> </span><span class="m">1</span><span class="w">        </span><span class="p">|</span><span class="w">                                      </span><span class="p">|</span>
<a id="__codelineno-75-9" name="__codelineno-75-9" href="#__codelineno-75-9"></a><span class="w">     </span><span class="m">128</span><span class="w"> </span>-&gt;<span class="w"> </span><span class="m">255</span><span class="w">      </span>:<span class="w"> </span><span class="m">800</span><span class="w">      </span><span class="p">|</span>**************************************<span class="p">|</span>
</code></pre></div>
<p>This output shows a multi-modal distribution, with the largest mode of 128-&gt;255 kbytes and a count of 800.</p>
<p>This is an efficient way to summarize data, as the summarization is performed in-kernel, and only the count column is passed to user space.</p>
<p>Examples in situ:
<a href="https://github.com/iovisor/bcc/tree/master/examples">search /examples</a>,
<a href="https://github.com/iovisor/bcc/tree/master/tools">search /tools</a></p>
<h3 id="11-print_linear_hist">11. print_linear_hist()</h3>
<p>Syntax: <code>table.print_linear_hist(val_type="value", section_header="Bucket ptr", section_print_fn=None)</code></p>
<p>Prints a table as a linear histogram in ASCII. This is intended to visualize small integer ranges, eg, 0 to 100.</p>
<p>Arguments:</p>
<ul>
<li>val_type: optional, column header.</li>
<li>section_header: if the histogram has a secondary key, multiple tables will print and section_header can be used as a header description for each.</li>
<li>section_print_fn: if section_print_fn is not None, it will be passed the bucket value.</li>
</ul>
<p>Example:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-76-1" name="__codelineno-76-1" href="#__codelineno-76-1"></a><span class="n">b</span> <span class="o">=</span> <span class="n">BPF</span><span class="p">(</span><span class="n">text</span><span class="o">=</span><span class="s2">&quot;&quot;&quot;</span>
<a id="__codelineno-76-2" name="__codelineno-76-2" href="#__codelineno-76-2"></a><span class="s2">BPF_HISTOGRAM(dist);</span>
<a id="__codelineno-76-3" name="__codelineno-76-3" href="#__codelineno-76-3"></a>
<a id="__codelineno-76-4" name="__codelineno-76-4" href="#__codelineno-76-4"></a><span class="s2">int kprobe__blk_account_io_done(struct pt_regs *ctx, struct request *req)</span>
<a id="__codelineno-76-5" name="__codelineno-76-5" href="#__codelineno-76-5"></a><span class="s2">{</span>
<a id="__codelineno-76-6" name="__codelineno-76-6" href="#__codelineno-76-6"></a><span class="s2">    dist.increment(req-&gt;__data_len / 1024);</span>
<a id="__codelineno-76-7" name="__codelineno-76-7" href="#__codelineno-76-7"></a><span class="s2">    return 0;</span>
<a id="__codelineno-76-8" name="__codelineno-76-8" href="#__codelineno-76-8"></a><span class="s2">}</span>
<a id="__codelineno-76-9" name="__codelineno-76-9" href="#__codelineno-76-9"></a><span class="s2">&quot;&quot;&quot;</span><span class="p">)</span>
<a id="__codelineno-76-10" name="__codelineno-76-10" href="#__codelineno-76-10"></a><span class="p">[</span><span class="o">...</span><span class="p">]</span>
<a id="__codelineno-76-11" name="__codelineno-76-11" href="#__codelineno-76-11"></a>
<a id="__codelineno-76-12" name="__codelineno-76-12" href="#__codelineno-76-12"></a><span class="n">b</span><span class="p">[</span><span class="s2">&quot;dist&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">print_linear_hist</span><span class="p">(</span><span class="s2">&quot;kbytes&quot;</span><span class="p">)</span>
</code></pre></div>
<p>Output:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-77-1" name="__codelineno-77-1" href="#__codelineno-77-1"></a><span class="w">     </span>kbytes<span class="w">        </span>:<span class="w"> </span>count<span class="w">     </span>distribution
<a id="__codelineno-77-2" name="__codelineno-77-2" href="#__codelineno-77-2"></a><span class="w">        </span><span class="m">0</span><span class="w">          </span>:<span class="w"> </span><span class="m">3</span><span class="w">        </span><span class="p">|</span>******<span class="w">                                  </span><span class="p">|</span>
<a id="__codelineno-77-3" name="__codelineno-77-3" href="#__codelineno-77-3"></a><span class="w">        </span><span class="m">1</span><span class="w">          </span>:<span class="w"> </span><span class="m">0</span><span class="w">        </span><span class="p">|</span><span class="w">                                        </span><span class="p">|</span>
<a id="__codelineno-77-4" name="__codelineno-77-4" href="#__codelineno-77-4"></a><span class="w">        </span><span class="m">2</span><span class="w">          </span>:<span class="w"> </span><span class="m">0</span><span class="w">        </span><span class="p">|</span><span class="w">                                        </span><span class="p">|</span>
<a id="__codelineno-77-5" name="__codelineno-77-5" href="#__codelineno-77-5"></a><span class="w">        </span><span class="m">3</span><span class="w">          </span>:<span class="w"> </span><span class="m">0</span><span class="w">        </span><span class="p">|</span><span class="w">                                        </span><span class="p">|</span>
<a id="__codelineno-77-6" name="__codelineno-77-6" href="#__codelineno-77-6"></a><span class="w">        </span><span class="m">4</span><span class="w">          </span>:<span class="w"> </span><span class="m">19</span><span class="w">       </span><span class="p">|</span>****************************************<span class="p">|</span>
<a id="__codelineno-77-7" name="__codelineno-77-7" href="#__codelineno-77-7"></a><span class="w">        </span><span class="m">5</span><span class="w">          </span>:<span class="w"> </span><span class="m">0</span><span class="w">        </span><span class="p">|</span><span class="w">                                        </span><span class="p">|</span>
<a id="__codelineno-77-8" name="__codelineno-77-8" href="#__codelineno-77-8"></a><span class="w">        </span><span class="m">6</span><span class="w">          </span>:<span class="w"> </span><span class="m">0</span><span class="w">        </span><span class="p">|</span><span class="w">                                        </span><span class="p">|</span>
<a id="__codelineno-77-9" name="__codelineno-77-9" href="#__codelineno-77-9"></a><span class="w">        </span><span class="m">7</span><span class="w">          </span>:<span class="w"> </span><span class="m">0</span><span class="w">        </span><span class="p">|</span><span class="w">                                        </span><span class="p">|</span>
<a id="__codelineno-77-10" name="__codelineno-77-10" href="#__codelineno-77-10"></a><span class="w">        </span><span class="m">8</span><span class="w">          </span>:<span class="w"> </span><span class="m">4</span><span class="w">        </span><span class="p">|</span>********<span class="w">                                </span><span class="p">|</span>
<a id="__codelineno-77-11" name="__codelineno-77-11" href="#__codelineno-77-11"></a><span class="w">        </span><span class="m">9</span><span class="w">          </span>:<span class="w"> </span><span class="m">0</span><span class="w">        </span><span class="p">|</span><span class="w">                                        </span><span class="p">|</span>
<a id="__codelineno-77-12" name="__codelineno-77-12" href="#__codelineno-77-12"></a><span class="w">        </span><span class="m">10</span><span class="w">         </span>:<span class="w"> </span><span class="m">0</span><span class="w">        </span><span class="p">|</span><span class="w">                                        </span><span class="p">|</span>
<a id="__codelineno-77-13" name="__codelineno-77-13" href="#__codelineno-77-13"></a><span class="w">        </span><span class="m">11</span><span class="w">         </span>:<span class="w"> </span><span class="m">0</span><span class="w">        </span><span class="p">|</span><span class="w">                                        </span><span class="p">|</span>
<a id="__codelineno-77-14" name="__codelineno-77-14" href="#__codelineno-77-14"></a><span class="w">        </span><span class="m">12</span><span class="w">         </span>:<span class="w"> </span><span class="m">0</span><span class="w">        </span><span class="p">|</span><span class="w">                                        </span><span class="p">|</span>
<a id="__codelineno-77-15" name="__codelineno-77-15" href="#__codelineno-77-15"></a><span class="w">        </span><span class="m">13</span><span class="w">         </span>:<span class="w"> </span><span class="m">0</span><span class="w">        </span><span class="p">|</span><span class="w">                                        </span><span class="p">|</span>
<a id="__codelineno-77-16" name="__codelineno-77-16" href="#__codelineno-77-16"></a><span class="w">        </span><span class="m">14</span><span class="w">         </span>:<span class="w"> </span><span class="m">0</span><span class="w">        </span><span class="p">|</span><span class="w">                                        </span><span class="p">|</span>
<a id="__codelineno-77-17" name="__codelineno-77-17" href="#__codelineno-77-17"></a><span class="w">        </span><span class="m">15</span><span class="w">         </span>:<span class="w"> </span><span class="m">0</span><span class="w">        </span><span class="p">|</span><span class="w">                                        </span><span class="p">|</span>
<a id="__codelineno-77-18" name="__codelineno-77-18" href="#__codelineno-77-18"></a><span class="w">        </span><span class="m">16</span><span class="w">         </span>:<span class="w"> </span><span class="m">2</span><span class="w">        </span><span class="p">|</span>****<span class="w">                                    </span><span class="p">|</span>
<a id="__codelineno-77-19" name="__codelineno-77-19" href="#__codelineno-77-19"></a><span class="o">[</span>...<span class="o">]</span>
</code></pre></div>
<p>This is an efficient way to summarize data, as the summarization is performed in-kernel, and only the values in the count column are passed to user space.</p>
<p>Examples in situ:
<a href="https://github.com/iovisor/bcc/tree/master/examples">search /examples</a>,
<a href="https://github.com/iovisor/bcc/tree/master/tools">search /tools</a></p>
<h3 id="12-open_ring_buffer">12. open_ring_buffer()</h3>
<p>Syntax: <code>table.open_ring_buffer(callback, ctx=None)</code></p>
<p>This operates on a table as defined in BPF as BPF_RINGBUF_OUTPUT(), and associates the callback Python function <code>callback</code> to be called when data is available in the ringbuf ring buffer. This is part of the new (Linux 5.8+) recommended mechanism for transferring per-event data from kernel to user space. Unlike perf buffers, ringbuf sizes are specified within the BPF program, as part of the <code>BPF_RINGBUF_OUTPUT</code> macro. If the callback is not processing data fast enough, some submitted data may be lost. In this case, the events should be polled more frequently and/or the size of the ring buffer should be increased.</p>
<p>Example:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-78-1" name="__codelineno-78-1" href="#__codelineno-78-1"></a><span class="c1"># process event</span>
<a id="__codelineno-78-2" name="__codelineno-78-2" href="#__codelineno-78-2"></a><span class="k">def</span> <span class="nf">print_event</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">size</span><span class="p">):</span>
<a id="__codelineno-78-3" name="__codelineno-78-3" href="#__codelineno-78-3"></a>    <span class="n">event</span> <span class="o">=</span> <span class="n">ct</span><span class="o">.</span><span class="n">cast</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">ct</span><span class="o">.</span><span class="n">POINTER</span><span class="p">(</span><span class="n">Data</span><span class="p">))</span><span class="o">.</span><span class="n">contents</span>
<a id="__codelineno-78-4" name="__codelineno-78-4" href="#__codelineno-78-4"></a>    <span class="p">[</span><span class="o">...</span><span class="p">]</span>
<a id="__codelineno-78-5" name="__codelineno-78-5" href="#__codelineno-78-5"></a>
<a id="__codelineno-78-6" name="__codelineno-78-6" href="#__codelineno-78-6"></a><span class="c1"># loop with callback to print_event</span>
<a id="__codelineno-78-7" name="__codelineno-78-7" href="#__codelineno-78-7"></a><span class="n">b</span><span class="p">[</span><span class="s2">&quot;events&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">open_ring_buffer</span><span class="p">(</span><span class="n">print_event</span><span class="p">)</span>
<a id="__codelineno-78-8" name="__codelineno-78-8" href="#__codelineno-78-8"></a><span class="k">while</span> <span class="mi">1</span><span class="p">:</span>
<a id="__codelineno-78-9" name="__codelineno-78-9" href="#__codelineno-78-9"></a>    <span class="k">try</span><span class="p">:</span>
<a id="__codelineno-78-10" name="__codelineno-78-10" href="#__codelineno-78-10"></a>        <span class="n">b</span><span class="o">.</span><span class="n">ring_buffer_poll</span><span class="p">()</span>
<a id="__codelineno-78-11" name="__codelineno-78-11" href="#__codelineno-78-11"></a>    <span class="k">except</span> <span class="ne">KeyboardInterrupt</span><span class="p">:</span>
<a id="__codelineno-78-12" name="__codelineno-78-12" href="#__codelineno-78-12"></a>        <span class="n">exit</span><span class="p">()</span>
</code></pre></div>
<p>Note that the data structure transferred will need to be declared in C in the BPF program. For example:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-79-1" name="__codelineno-79-1" href="#__codelineno-79-1"></a><span class="c1">// define output data structure in C</span>
<a id="__codelineno-79-2" name="__codelineno-79-2" href="#__codelineno-79-2"></a><span class="k">struct</span><span class="w"> </span><span class="nc">data_t</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-79-3" name="__codelineno-79-3" href="#__codelineno-79-3"></a><span class="w">    </span><span class="n">u32</span><span class="w"> </span><span class="n">pid</span><span class="p">;</span>
<a id="__codelineno-79-4" name="__codelineno-79-4" href="#__codelineno-79-4"></a><span class="w">    </span><span class="n">u64</span><span class="w"> </span><span class="n">ts</span><span class="p">;</span>
<a id="__codelineno-79-5" name="__codelineno-79-5" href="#__codelineno-79-5"></a><span class="w">    </span><span class="kt">char</span><span class="w"> </span><span class="n">comm</span><span class="p">[</span><span class="n">TASK_COMM_LEN</span><span class="p">];</span>
<a id="__codelineno-79-6" name="__codelineno-79-6" href="#__codelineno-79-6"></a><span class="p">};</span>
<a id="__codelineno-79-7" name="__codelineno-79-7" href="#__codelineno-79-7"></a><span class="n">BPF_RINGBUF_OUTPUT</span><span class="p">(</span><span class="n">events</span><span class="p">,</span><span class="w"> </span><span class="mi">8</span><span class="p">);</span>
<a id="__codelineno-79-8" name="__codelineno-79-8" href="#__codelineno-79-8"></a><span class="p">[...]</span>
</code></pre></div>
<p>In Python, you can either let bcc generate the data structure from C declaration automatically (recommended):</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-80-1" name="__codelineno-80-1" href="#__codelineno-80-1"></a><span class="k">def</span> <span class="nf">print_event</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">size</span><span class="p">):</span>
<a id="__codelineno-80-2" name="__codelineno-80-2" href="#__codelineno-80-2"></a>    <span class="n">event</span> <span class="o">=</span> <span class="n">b</span><span class="p">[</span><span class="s2">&quot;events&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">event</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
<a id="__codelineno-80-3" name="__codelineno-80-3" href="#__codelineno-80-3"></a><span class="p">[</span><span class="o">...</span><span class="p">]</span>
</code></pre></div>
<p>or define it manually:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-81-1" name="__codelineno-81-1" href="#__codelineno-81-1"></a><span class="c1"># define output data structure in Python</span>
<a id="__codelineno-81-2" name="__codelineno-81-2" href="#__codelineno-81-2"></a><span class="n">TASK_COMM_LEN</span> <span class="o">=</span> <span class="mi">16</span>    <span class="c1"># linux/sched.h</span>
<a id="__codelineno-81-3" name="__codelineno-81-3" href="#__codelineno-81-3"></a><span class="k">class</span> <span class="nc">Data</span><span class="p">(</span><span class="n">ct</span><span class="o">.</span><span class="n">Structure</span><span class="p">):</span>
<a id="__codelineno-81-4" name="__codelineno-81-4" href="#__codelineno-81-4"></a>    <span class="n">_fields_</span> <span class="o">=</span> <span class="p">[(</span><span class="s2">&quot;pid&quot;</span><span class="p">,</span> <span class="n">ct</span><span class="o">.</span><span class="n">c_ulonglong</span><span class="p">),</span>
<a id="__codelineno-81-5" name="__codelineno-81-5" href="#__codelineno-81-5"></a>                <span class="p">(</span><span class="s2">&quot;ts&quot;</span><span class="p">,</span> <span class="n">ct</span><span class="o">.</span><span class="n">c_ulonglong</span><span class="p">),</span>
<a id="__codelineno-81-6" name="__codelineno-81-6" href="#__codelineno-81-6"></a>                <span class="p">(</span><span class="s2">&quot;comm&quot;</span><span class="p">,</span> <span class="n">ct</span><span class="o">.</span><span class="n">c_char</span> <span class="o">*</span> <span class="n">TASK_COMM_LEN</span><span class="p">)]</span>
<a id="__codelineno-81-7" name="__codelineno-81-7" href="#__codelineno-81-7"></a>
<a id="__codelineno-81-8" name="__codelineno-81-8" href="#__codelineno-81-8"></a><span class="k">def</span> <span class="nf">print_event</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">size</span><span class="p">):</span>
<a id="__codelineno-81-9" name="__codelineno-81-9" href="#__codelineno-81-9"></a>    <span class="n">event</span> <span class="o">=</span> <span class="n">ct</span><span class="o">.</span><span class="n">cast</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">ct</span><span class="o">.</span><span class="n">POINTER</span><span class="p">(</span><span class="n">Data</span><span class="p">))</span><span class="o">.</span><span class="n">contents</span>
<a id="__codelineno-81-10" name="__codelineno-81-10" href="#__codelineno-81-10"></a><span class="p">[</span><span class="o">...</span><span class="p">]</span>
</code></pre></div>
<p>Examples in situ:
<a href="https://github.com/iovisor/bcc/tree/master/examples">search /examples</a>,</p>
<h3 id="13-push">13. push()</h3>
<p>Syntax: <code>table.push(leaf, flags=0)</code></p>
<p>Push an element onto a Stack or Queue table. Raises an exception if the operation does not succeed.
Passing QueueStack.BPF_EXIST as a flag causes the Queue or Stack to discard the oldest element if it is full.</p>
<p>Examples in situ:
<a href="https://github.com/iovisor/bcc/tree/master/tests">search /tests</a>,</p>
<h3 id="14-pop">14. pop()</h3>
<p>Syntax: <code>leaf = table.pop()</code></p>
<p>Pop an element from a Stack or Queue table. Unlike <code>peek()</code>, <code>pop()</code>
removes the element from the table before returning it.
Raises a KeyError exception if the operation does not succeed.</p>
<p>Examples in situ:
<a href="https://github.com/iovisor/bcc/tree/master/tests">search /tests</a>,</p>
<h3 id="15-peek">15. peek()</h3>
<p>Syntax: <code>leaf = table.peek()</code></p>
<p>Peek the element at the head of a Stack or Queue table. Unlike <code>pop()</code>, <code>peek()</code>
does not remove the element from the table. Raises an exception if the operation does not succeed.</p>
<p>Examples in situ:
<a href="https://github.com/iovisor/bcc/tree/master/tests">search /tests</a>,</p>
<h2 id="helpers">Helpers</h2>
<p>Some helper methods provided by bcc. Note that since we're in Python, we can import any Python library and their methods, including, for example, the libraries: argparse, collections, ctypes, datetime, re, socket, struct, subprocess, sys, and time.</p>
<h3 id="1-ksym">1. ksym()</h3>
<p>Syntax: <code>BPF.ksym(addr)</code></p>
<p>Translate a kernel memory address into a kernel function name, which is returned.</p>
<p>Example:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-82-1" name="__codelineno-82-1" href="#__codelineno-82-1"></a><span class="nb">print</span><span class="p">(</span><span class="s2">&quot;kernel function: &quot;</span> <span class="o">+</span> <span class="n">b</span><span class="o">.</span><span class="n">ksym</span><span class="p">(</span><span class="n">addr</span><span class="p">))</span>
</code></pre></div>
<p>Examples in situ:
<a href="https://github.com/iovisor/bcc/tree/master/examples">search /examples</a>,
<a href="https://github.com/iovisor/bcc/tree/master/tools">search /tools</a></p>
<h3 id="2-ksymname">2. ksymname()</h3>
<p>Syntax: <code>BPF.ksymname(name)</code></p>
<p>Translate a kernel name into an address. This is the reverse of ksym. Returns -1 when the function name is unknown.</p>
<p>Example:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-83-1" name="__codelineno-83-1" href="#__codelineno-83-1"></a><span class="nb">print</span><span class="p">(</span><span class="s2">&quot;kernel address: </span><span class="si">%x</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">b</span><span class="o">.</span><span class="n">ksymname</span><span class="p">(</span><span class="s2">&quot;vfs_read&quot;</span><span class="p">))</span>
</code></pre></div>
<p>Examples in situ:
<a href="https://github.com/iovisor/bcc/tree/master/examples">search /examples</a>,
<a href="https://github.com/iovisor/bcc/tree/master/tools">search /tools</a></p>
<h3 id="3-sym">3. sym()</h3>
<p>Syntax: <code>BPF.sym(addr, pid, show_module=False, show_offset=False)</code></p>
<p>Translate a memory address into a function name for a pid, which is returned. A pid of less than zero will access the kernel symbol cache. The <code>show_module</code> and <code>show_offset</code> parameters control whether the module in which the symbol lies should be displayed, and whether the instruction offset from the beginning of the symbol should be displayed. These extra parameters default to <code>False</code>.</p>
<p>Example:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-84-1" name="__codelineno-84-1" href="#__codelineno-84-1"></a><span class="nb">print</span><span class="p">(</span><span class="s2">&quot;function: &quot;</span> <span class="o">+</span> <span class="n">b</span><span class="o">.</span><span class="n">sym</span><span class="p">(</span><span class="n">addr</span><span class="p">,</span> <span class="n">pid</span><span class="p">))</span>
</code></pre></div>
<p>Examples in situ:
<a href="https://github.com/iovisor/bcc/tree/master/examples">search /examples</a>,
<a href="https://github.com/iovisor/bcc/tree/master/tools">search /tools</a></p>
<h3 id="4-num_open_kprobes">4. num_open_kprobes()</h3>
<p>Syntax: <code>BPF.num_open_kprobes()</code></p>
<p>Returns the number of open k[ret]probes. Can be useful for scenarios where event_re is used while attaching and detaching probes. Excludes perf_events readers.</p>
<p>Example:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-85-1" name="__codelineno-85-1" href="#__codelineno-85-1"></a><span class="n">b</span><span class="o">.</span><span class="n">attach_kprobe</span><span class="p">(</span><span class="n">event_re</span><span class="o">=</span><span class="n">pattern</span><span class="p">,</span> <span class="n">fn_name</span><span class="o">=</span><span class="s2">&quot;trace_count&quot;</span><span class="p">)</span>
<a id="__codelineno-85-2" name="__codelineno-85-2" href="#__codelineno-85-2"></a><span class="n">matched</span> <span class="o">=</span> <span class="n">b</span><span class="o">.</span><span class="n">num_open_kprobes</span><span class="p">()</span>
<a id="__codelineno-85-3" name="__codelineno-85-3" href="#__codelineno-85-3"></a><span class="k">if</span> <span class="n">matched</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
<a id="__codelineno-85-4" name="__codelineno-85-4" href="#__codelineno-85-4"></a>    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;0 functions matched by </span><span class="se">\&quot;</span><span class="si">%s</span><span class="se">\&quot;</span><span class="s2">. Exiting.&quot;</span> <span class="o">%</span> <span class="n">args</span><span class="o">.</span><span class="n">pattern</span><span class="p">)</span>
<a id="__codelineno-85-5" name="__codelineno-85-5" href="#__codelineno-85-5"></a>    <span class="n">exit</span><span class="p">()</span>
</code></pre></div>
<p>Examples in situ:
<a href="https://github.com/iovisor/bcc/tree/master/examples">search /examples</a>,
<a href="https://github.com/iovisor/bcc/tree/master/tools">search /tools</a></p>
<h3 id="5-get_syscall_fnname">5. get_syscall_fnname()</h3>
<p>Syntax: <code>BPF.get_syscall_fnname(name : str)</code></p>
<p>Return the corresponding kernel function name of the syscall. This helper function will try different prefixes and use the right one to concatenate with the syscall name. Note that the return value may vary in different versions of linux kernel and sometimes it will causing trouble. (see <a href="https://github.com/iovisor/bcc/issues/2590">#2590</a>)</p>
<p>Example:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-86-1" name="__codelineno-86-1" href="#__codelineno-86-1"></a><span class="nb">print</span><span class="p">(</span><span class="s2">&quot;The function name of </span><span class="si">%s</span><span class="s2"> in kernel is </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="s2">&quot;clone&quot;</span><span class="p">,</span> <span class="n">b</span><span class="o">.</span><span class="n">get_syscall_fnname</span><span class="p">(</span><span class="s2">&quot;clone&quot;</span><span class="p">)))</span>
<a id="__codelineno-86-2" name="__codelineno-86-2" href="#__codelineno-86-2"></a><span class="c1"># sys_clone or __x64_sys_clone or ...</span>
</code></pre></div>
<p>Examples in situ:
<a href="https://github.com/iovisor/bcc/tree/master/examples">search /examples</a>,
<a href="https://github.com/iovisor/bcc/tree/master/tools">search /tools</a></p>
<h1 id="bpf-errors">BPF Errors</h1>
<p>See the "Understanding eBPF verifier messages" section in the kernel source under Documentation/networking/filter.txt.</p>
<h2 id="1-invalid-mem-access">1. Invalid mem access</h2>
<p>This can be due to trying to read memory directly, instead of operating on memory on the BPF stack. All kernel memory reads must be passed via bpf_probe_read_kernel() to copy kernel memory into the BPF stack, which can be automatic by the bcc rewriter in some cases of simple dereferencing. bpf_probe_read_kernel() does all the required checks.</p>
<p>Example:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-87-1" name="__codelineno-87-1" href="#__codelineno-87-1"></a>bpf:<span class="w"> </span>Permission<span class="w"> </span>denied
<a id="__codelineno-87-2" name="__codelineno-87-2" href="#__codelineno-87-2"></a><span class="m">0</span>:<span class="w"> </span><span class="o">(</span>bf<span class="o">)</span><span class="w"> </span><span class="nv">r6</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>r1
<a id="__codelineno-87-3" name="__codelineno-87-3" href="#__codelineno-87-3"></a><span class="m">1</span>:<span class="w"> </span><span class="o">(</span><span class="m">79</span><span class="o">)</span><span class="w"> </span><span class="nv">r7</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>*<span class="o">(</span>u64<span class="w"> </span>*<span class="o">)(</span>r6<span class="w"> </span>+80<span class="o">)</span>
<a id="__codelineno-87-4" name="__codelineno-87-4" href="#__codelineno-87-4"></a><span class="m">2</span>:<span class="w"> </span><span class="o">(</span><span class="m">85</span><span class="o">)</span><span class="w"> </span>call<span class="w"> </span><span class="m">14</span>
<a id="__codelineno-87-5" name="__codelineno-87-5" href="#__codelineno-87-5"></a><span class="m">3</span>:<span class="w"> </span><span class="o">(</span>bf<span class="o">)</span><span class="w"> </span><span class="nv">r8</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>r0
<a id="__codelineno-87-6" name="__codelineno-87-6" href="#__codelineno-87-6"></a><span class="o">[</span>...<span class="o">]</span>
<a id="__codelineno-87-7" name="__codelineno-87-7" href="#__codelineno-87-7"></a><span class="m">23</span>:<span class="w"> </span><span class="o">(</span><span class="m">69</span><span class="o">)</span><span class="w"> </span><span class="nv">r1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>*<span class="o">(</span>u16<span class="w"> </span>*<span class="o">)(</span>r7<span class="w"> </span>+16<span class="o">)</span>
<a id="__codelineno-87-8" name="__codelineno-87-8" href="#__codelineno-87-8"></a>R7<span class="w"> </span>invalid<span class="w"> </span>mem<span class="w"> </span>access<span class="w"> </span><span class="s1">&#39;inv&#39;</span>
<a id="__codelineno-87-9" name="__codelineno-87-9" href="#__codelineno-87-9"></a>
<a id="__codelineno-87-10" name="__codelineno-87-10" href="#__codelineno-87-10"></a>Traceback<span class="w"> </span><span class="o">(</span>most<span class="w"> </span>recent<span class="w"> </span>call<span class="w"> </span>last<span class="o">)</span>:
<a id="__codelineno-87-11" name="__codelineno-87-11" href="#__codelineno-87-11"></a><span class="w">  </span>File<span class="w"> </span><span class="s2">&quot;./tcpaccept&quot;</span>,<span class="w"> </span>line<span class="w"> </span><span class="m">179</span>,<span class="w"> </span><span class="k">in</span><span class="w"> </span>&lt;module&gt;
<a id="__codelineno-87-12" name="__codelineno-87-12" href="#__codelineno-87-12"></a><span class="w">    </span><span class="nv">b</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>BPF<span class="o">(</span><span class="nv">text</span><span class="o">=</span>bpf_text<span class="o">)</span>
<a id="__codelineno-87-13" name="__codelineno-87-13" href="#__codelineno-87-13"></a><span class="w">  </span>File<span class="w"> </span><span class="s2">&quot;/usr/lib/python2.7/dist-packages/bcc/__init__.py&quot;</span>,<span class="w"> </span>line<span class="w"> </span><span class="m">172</span>,<span class="w"> </span><span class="k">in</span><span class="w"> </span>__init__
<a id="__codelineno-87-14" name="__codelineno-87-14" href="#__codelineno-87-14"></a><span class="w">    </span>self._trace_autoload<span class="o">()</span>
<a id="__codelineno-87-15" name="__codelineno-87-15" href="#__codelineno-87-15"></a><span class="w">  </span>File<span class="w"> </span><span class="s2">&quot;/usr/lib/python2.7/dist-packages/bcc/__init__.py&quot;</span>,<span class="w"> </span>line<span class="w"> </span><span class="m">612</span>,<span class="w"> </span><span class="k">in</span><span class="w"> </span>_trace_autoload
<a id="__codelineno-87-16" name="__codelineno-87-16" href="#__codelineno-87-16"></a><span class="w">    </span><span class="nv">fn</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>self.load_func<span class="o">(</span>func_name,<span class="w"> </span>BPF.KPROBE<span class="o">)</span>
<a id="__codelineno-87-17" name="__codelineno-87-17" href="#__codelineno-87-17"></a><span class="w">  </span>File<span class="w"> </span><span class="s2">&quot;/usr/lib/python2.7/dist-packages/bcc/__init__.py&quot;</span>,<span class="w"> </span>line<span class="w"> </span><span class="m">212</span>,<span class="w"> </span><span class="k">in</span><span class="w"> </span>load_func
<a id="__codelineno-87-18" name="__codelineno-87-18" href="#__codelineno-87-18"></a><span class="w">    </span>raise<span class="w"> </span>Exception<span class="o">(</span><span class="s2">&quot;Failed to load BPF program %s&quot;</span><span class="w"> </span>%<span class="w"> </span>func_name<span class="o">)</span>
<a id="__codelineno-87-19" name="__codelineno-87-19" href="#__codelineno-87-19"></a>Exception:<span class="w"> </span>Failed<span class="w"> </span>to<span class="w"> </span>load<span class="w"> </span>BPF<span class="w"> </span>program<span class="w"> </span>kretprobe__inet_csk_accept
</code></pre></div>
<h2 id="2-cannot-call-gpl-only-function-from-proprietary-program">2. Cannot call GPL only function from proprietary program</h2>
<p>This error happens when a GPL-only helper is called from a non-GPL BPF program. To fix this error, do not use GPL-only helpers from a proprietary BPF program, or relicense the BPF program under a GPL-compatible license. Check which <a href="https://github.com/iovisor/bcc/blob/master/docs/kernel-versions.md#helpers">BPF helpers</a> are GPL-only, and what licenses are considered GPL-compatible.</p>
<p>Example calling <code>bpf_get_stackid()</code>, a GPL-only BPF helper, from a proprietary program (<code>#define BPF_LICENSE Proprietary</code>):</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-88-1" name="__codelineno-88-1" href="#__codelineno-88-1"></a>bpf:<span class="w"> </span>Failed<span class="w"> </span>to<span class="w"> </span>load<span class="w"> </span>program:<span class="w"> </span>Invalid<span class="w"> </span>argument
<a id="__codelineno-88-2" name="__codelineno-88-2" href="#__codelineno-88-2"></a><span class="o">[</span>...<span class="o">]</span>
<a id="__codelineno-88-3" name="__codelineno-88-3" href="#__codelineno-88-3"></a><span class="m">8</span>:<span class="w"> </span><span class="o">(</span><span class="m">85</span><span class="o">)</span><span class="w"> </span>call<span class="w"> </span>bpf_get_stackid#27
<a id="__codelineno-88-4" name="__codelineno-88-4" href="#__codelineno-88-4"></a>cannot<span class="w"> </span>call<span class="w"> </span>GPL<span class="w"> </span>only<span class="w"> </span><span class="k">function</span><span class="w"> </span>from<span class="w"> </span>proprietary<span class="w"> </span>program
</code></pre></div>
<h1 id="environment-variables">Environment Variables</h1>
<h2 id="1-kernel-source-directory">1. Kernel source directory</h2>
<p>eBPF program compilation needs kernel sources or kernel headers with headers
compiled. In case your kernel sources are at a non-standard location where BCC
cannot find then, its possible to provide BCC the absolute path of the location
by setting <code>BCC_KERNEL_SOURCE</code> to it.</p>
<h2 id="2-kernel-version-overriding">2. Kernel version overriding</h2>
<p>By default, BCC stores the <code>LINUX_VERSION_CODE</code> in the generated eBPF object
which is then passed along to the kernel when the eBPF program is loaded.
Sometimes this is quite inconvenient especially when the kernel is slightly
updated such as an LTS kernel release. Its extremely unlikely the slight
mismatch would cause any issues with the loaded eBPF program. By setting
<code>BCC_LINUX_VERSION_CODE</code> to the version of the kernel that's running, the check
for verifying the kernel version can be bypassed. This is needed for programs
that use kprobes. This needs to be encoded in the format: <code>(VERSION * 65536) +
(PATCHLEVEL * 256) + SUBLEVEL</code>. For example, if the running kernel is <code>4.9.10</code>,
then can set <code>export BCC_LINUX_VERSION_CODE=264458</code> to override the kernel
version check successfully.</p>
<p><a class="md-button" href="https://x.com/intent/tweet?text=bcc%20Reference%20Guide%0A&amp;url=https://eunomia.dev/zh/tutorials/bcc-documents/reference_guide_en/">Share on <span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M18.901 1.153h3.68l-8.04 9.19L24 22.846h-7.406l-5.8-7.584-6.638 7.584H.474l8.6-9.83L0 1.154h7.594l5.243 6.932ZM17.61 20.644h2.039L6.486 3.24H4.298Z"/></svg></span></a>
<a class="md-button" href="https://www.facebook.com/sharer/sharer.php?u=https://eunomia.dev/zh/tutorials/bcc-documents/reference_guide_en/">Share on <span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.101 23.691v-7.98H6.627v-3.667h2.474v-1.58c0-4.085 1.848-5.978 5.858-5.978.401 0 .955.042 1.468.103a9 9 0 0 1 1.141.195v3.325a9 9 0 0 0-.653-.036 27 27 0 0 0-.733-.009c-.707 0-1.259.096-1.675.309a1.7 1.7 0 0 0-.679.622c-.258.42-.374.995-.374 1.752v1.297h3.919l-.386 2.103-.287 1.564h-3.246v8.245C19.396 23.238 24 18.179 24 12.044c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.628 3.874 10.35 9.101 11.647"/></svg></span></a></p>







  
    
  
  
    
  


  <aside class="md-source-file">
    
      
  <span class="md-source-file__fact">
    <span class="md-icon" title="Last update">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M21 13.1c-.1 0-.3.1-.4.2l-1 1 2.1 2.1 1-1c.2-.2.2-.6 0-.8l-1.3-1.3c-.1-.1-.2-.2-.4-.2m-1.9 1.8-6.1 6V23h2.1l6.1-6.1zM12.5 7v5.2l4 2.4-1 1L11 13V7zM11 21.9c-5.1-.5-9-4.8-9-9.9C2 6.5 6.5 2 12 2c5.3 0 9.6 4.1 10 9.3-.3-.1-.6-.2-1-.2s-.7.1-1 .2C19.6 7.2 16.2 4 12 4c-4.4 0-8 3.6-8 8 0 4.1 3.1 7.5 7.1 7.9l-.1.2z"/></svg>
    </span>
    <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-date" title="August 24, 2025 04:27:23 UTC">August 24, 2025</span>
  </span>

    
    
      
  <span class="md-source-file__fact">
    <span class="md-icon" title="Created">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M14.47 15.08 11 13V7h1.5v5.25l3.08 1.83c-.41.28-.79.62-1.11 1m-1.39 4.84c-.36.05-.71.08-1.08.08-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8c0 .37-.03.72-.08 1.08.69.1 1.33.32 1.92.64.1-.56.16-1.13.16-1.72 0-5.5-4.5-10-10-10S2 6.5 2 12s4.47 10 10 10c.59 0 1.16-.06 1.72-.16-.32-.59-.54-1.23-.64-1.92M18 15v3h-3v2h3v3h2v-3h3v-2h-3v-3z"/></svg>
    </span>
    <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-date" title="February 10, 2025 23:07:43 UTC">February 10, 2025</span>
  </span>

    
    
      
  
  <span class="md-source-file__fact">
    <span class="md-icon" title="Contributors">
      
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 5.5A3.5 3.5 0 0 1 15.5 9a3.5 3.5 0 0 1-3.5 3.5A3.5 3.5 0 0 1 8.5 9 3.5 3.5 0 0 1 12 5.5M5 8c.56 0 1.08.15 1.53.42-.15 1.43.27 2.85 1.13 3.96C7.16 13.34 6.16 14 5 14a3 3 0 0 1-3-3 3 3 0 0 1 3-3m14 0a3 3 0 0 1 3 3 3 3 0 0 1-3 3c-1.16 0-2.16-.66-2.66-1.62a5.54 5.54 0 0 0 1.13-3.96c.45-.27.97-.42 1.53-.42M5.5 18.25c0-2.07 2.91-3.75 6.5-3.75s6.5 1.68 6.5 3.75V20h-13zM0 20v-1.5c0-1.39 1.89-2.56 4.45-2.9-.59.68-.95 1.62-.95 2.65V20zm24 0h-3.5v-1.75c0-1.03-.36-1.97-.95-2.65 2.56.34 4.45 1.51 4.45 2.9z"/></svg>
      
    </span>
    <nav>
      
        <a href="mailto:yunwei356@gmail.com">yunwei37</a>, 
        <a href="mailto:1067852565@qq.com">云微</a>
    </nav>
  </span>

    
    
  </aside>


  



  <form class="md-feedback" name="feedback" hidden>
    <fieldset>
      <legend class="md-feedback__title">
        Was this page helpful?
      </legend>
      <div class="md-feedback__inner">
        <div class="md-feedback__list">
          
            <button class="md-feedback__icon md-icon" type="submit" title="This page was helpful" data-md-value="1">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 12a8 8 0 0 0-8-8 8 8 0 0 0-8 8 8 8 0 0 0 8 8 8 8 0 0 0 8-8m2 0a10 10 0 0 1-10 10A10 10 0 0 1 2 12 10 10 0 0 1 12 2a10 10 0 0 1 10 10M10 9.5c0 .8-.7 1.5-1.5 1.5S7 10.3 7 9.5 7.7 8 8.5 8s1.5.7 1.5 1.5m7 0c0 .8-.7 1.5-1.5 1.5S14 10.3 14 9.5 14.7 8 15.5 8s1.5.7 1.5 1.5m-5 7.73c-1.75 0-3.29-.73-4.19-1.81L9.23 14c.45.72 1.52 1.23 2.77 1.23s2.32-.51 2.77-1.23l1.42 1.42c-.9 1.08-2.44 1.81-4.19 1.81"/></svg>
            </button>
          
            <button class="md-feedback__icon md-icon" type="submit" title="This page could be improved" data-md-value="0">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 12a8 8 0 0 0-8-8 8 8 0 0 0-8 8 8 8 0 0 0 8 8 8 8 0 0 0 8-8m2 0a10 10 0 0 1-10 10A10 10 0 0 1 2 12 10 10 0 0 1 12 2a10 10 0 0 1 10 10m-6.5-4c.8 0 1.5.7 1.5 1.5s-.7 1.5-1.5 1.5-1.5-.7-1.5-1.5.7-1.5 1.5-1.5M10 9.5c0 .8-.7 1.5-1.5 1.5S7 10.3 7 9.5 7.7 8 8.5 8s1.5.7 1.5 1.5m2 4.5c1.75 0 3.29.72 4.19 1.81l-1.42 1.42C14.32 16.5 13.25 16 12 16s-2.32.5-2.77 1.23l-1.42-1.42C8.71 14.72 10.25 14 12 14"/></svg>
            </button>
          
        </div>
        <div class="md-feedback__note">
          
            <div data-md-value="1" hidden>
              
              
                
              
              
              
                
                
              
              Thanks for your feedback!
            </div>
          
            <div data-md-value="0" hidden>
              
              
                
              
              
              
                
                
              
              Thanks for your feedback! Help us improve this page by using our <a href="https://github.com/orgs/eunomia-bpf/discussions" target="_blank" rel="noopener">Github discussion</a>.
            </div>
          
        </div>
      </div>
    </fieldset>
  </form>


<script src="https://giscus.app/client.js"
        data-repo="eunomia-bpf/bpf-developer-tutorial"
        data-repo-id="R_kgDOIi0KhQ"
        data-category="General"
        data-category-id="DIC_kwDOIi0Khc4CYq-h"
        data-mapping="pathname"
        data-strict="0"
        data-reactions-enabled="1"
        data-emit-metadata="0"
        data-input-position="bottom"
        data-theme="preferred_color_scheme"
        data-lang="en"
        crossorigin="anonymous"
        async>
</script>

                
              </article>
            </div>
          
          
  <script>var tabs=__md_get("__tabs");if(Array.isArray(tabs))e:for(var set of document.querySelectorAll(".tabbed-set")){var labels=set.querySelector(".tabbed-labels");for(var tab of tabs)for(var label of labels.getElementsByTagName("label"))if(label.innerText.trim()===tab){var input=document.getElementById(label.htmlFor);input.checked=!0;continue e}}</script>

<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg>
  Back to top
</button>
        
      </main>
      
        <footer class="md-footer">
  
    
      
      <nav class="md-footer__inner md-grid" aria-label="Footer" >
        
          
          <a href="../reference_guide/" class="md-footer__link md-footer__link--prev" aria-label="Previous: bcc 参考指南">
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
            </div>
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Previous
              </span>
              <div class="md-ellipsis">
                bcc 参考指南
              </div>
            </div>
          </a>
        
        
          
          <a href="../special_filtering/" class="md-footer__link md-footer__link--next" aria-label="Next: 特殊过滤">
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Next
              </span>
              <div class="md-ellipsis">
                特殊过滤
              </div>
            </div>
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11z"/></svg>
            </div>
          </a>
        
      </nav>
    
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Copyright (c) 2025 eunomia-bpf org.
    </div>
  
  
</div>
      
        
<div class="md-social">
  
    
    
    
    
      
      
    
    <a href="https://github.com/eunomia-bpf" target="_blank" rel="noopener" title="github.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path fill="currentColor" d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
    </a>
  
    
    
    
    
    <a href="mailto:yunwei356@gmail.com" target="_blank" rel="noopener" title="" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512"><!--! Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path fill="currentColor" d="M536.4-26.3c9.8-3.5 20.6-1 28 6.3s9.8 18.2 6.3 28l-178 496.9c-5 13.9-18.1 23.1-32.8 23.1-14.2 0-27-8.6-32.3-21.7l-64.2-158c-4.5-11-2.5-23.6 5.2-32.6l94.5-112.4c5.1-6.1 4.7-15-.9-20.6s-14.6-6-20.6-.9l-112.4 94.3c-9.1 7.6-21.6 9.6-32.6 5.2L38.1 216.8c-13.1-5.3-21.7-18.1-21.7-32.3 0-14.7 9.2-27.8 23.1-32.8z"/></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
      <div class="md-progress" data-md-component="progress" role="progressbar"></div>
    
    
    
      
      <script id="__config" type="application/json">{"base": "../../../..", "features": ["search.suggest", "search.highlight", "search.share", "navigation.footer", "navigation.instant", "navigation.instant.progress", "navigation.tabs", "navigation.expand", "navigation.path", "navigation.top", "content.tabs.link", "content.action.edit", "content.action.view"], "search": "../../../../assets/javascripts/workers/search.973d3a69.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
<script src="https://cdn.usefathom.com/script.js" data-site="ZLDAHRNN" defer></script>

      <script src="../../../../assets/javascripts/bundle.92b07e13.min.js"></script>
      
    

  </body>
</html>